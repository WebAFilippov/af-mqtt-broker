import{createRequire as jU}from"node:module";var AU=Object.create;var{getPrototypeOf:LU,defineProperty:zZ,getOwnPropertyNames:EU}=Object;var DU=Object.prototype.hasOwnProperty;var qZ=(K,J,Z)=>{Z=K!=null?AU(LU(K)):{};let X=J||!K||!K.__esModule?zZ(Z,"default",{value:K,enumerable:!0}):Z;for(let M of EU(K))if(!DU.call(X,M))zZ(X,M,{get:()=>K[M],enumerable:!0});return X};var O=(K,J)=>()=>(J||K((J={exports:{}}).exports,J),J.exports);var S=jU(import.meta.url);var QZ=O((HI,$Z)=>{$Z.exports=RU;var xU=Object.prototype.hasOwnProperty;function RU(){var K={};for(var J=0;J<arguments.length;J++){var Z=arguments[J];for(var X in Z)if(xU.call(Z,X))K[X]=Z[X]}return K}});var m8=O((YI,VZ)=>{function BU(K){var J=new K,Z=J;function X(){var H=J;if(H.next)J=H.next;else J=new K,Z=J;return H.next=null,H}function M(H){Z.next=H,Z=H}return{get:X,release:M}}VZ.exports=BU});var nK=O((UI,PZ)=>{var wU=QZ(),WZ=m8(),SU={released:H1,results:!0};function kU(K){K=wU(SU,K);var J=K.released,Z=WZ(K.results?vU:yU),X=WZ(hU),M=K.results?q:V,H=K.results?z:$;return Y;function Y(W,x,_,j){var A=Z.get();if(j=j||H1,x.length===0)j.call(W),J(A);else{if(A._callback=j,A._callThat=W,A._release=U,typeof x==="function")H(W,x,_,A);else M(W,x,_,A);if(A._count===0)A.release()}}function U(W){Z.release(W),J(W)}function G(W){X.release(W)}function z(W,x,_,j){var A=null;j._count=_.length,j._results=new Array(j._count);for(var B=0;B<_.length;B++)if(A=X.get(),A._release=G,A.parent=j,A.pos=B,W)x.call(W,_[B],A.release);else x(_[B],A.release)}function q(W,x,_,j){var A=null,B=H1;j._count=x.length,j._results=new Array(j._count);for(var p=0;p<x.length;p++)if(A=X.get(),A._release=G,A.parent=j,A.pos=p,B=x[p],W)if(B.length===1)B.call(W,A.release);else B.call(W,_,A.release);else if(B.length===1)B(A.release);else B(_,A.release)}function $(W,x,_,j){j._count=_.length;for(var A=0;A<_.length;A++)if(W)x.call(W,_[A],j.release);else x(_[A],j.release)}function V(W,x,_,j){var A=null;j._count=x.length;for(var B=0;B<x.length;B++)if(A=x[B],W)if(A.length===1)A.call(W,j.release);else A.call(W,_,j.release);else if(A.length===1)A(j.release);else A(_,j.release)}}function yU(){this._count=-1,this._callback=H1,this._callThat=null,this._release=null,this.next=null;var K=this,J=0;this.release=function(){var Z=K._callback;if(++J===K._count||K._count===0){if(K._callThat)Z.call(K._callThat);else Z();K._callback=H1,K._callThat=null,J=0,K._release(K)}}}function hU(){this.pos=-1,this._release=H1,this.parent=null,this.next=null;var K=this;this.release=function(J,Z){K.parent.release(J,K.pos,Z),K.pos=-1,K.parent=null,K._release(K)}}function vU(){this._count=-1,this._callback=H1,this._results=null,this._err=null,this._callThat=null,this._release=H1,this.next=null;var K=this,J=0;this.release=function(Z,X,M){if(K._err=K._err||Z,X>=0)K._results[X]=M;var H=K._callback;if(++J===K._count||K._count===0){if(K._callThat)H.call(K._callThat,K._err,K._results);else H(K._err,K._results);K._callback=H1,K._results=null,K._err=null,K._callThat=null,J=0,K._release(K)}}}function H1(){}PZ.exports=kU});var IZ=O((GI,TZ)=>{var gU={results:!0};function uU(K){K=Object.assign({},gU,K);var J,Z;if(K.results)J=cU,Z=dU;else J=mU,Z=fU;return X;function X(M,H,Y,U){if(U=(U||bU).bind(M),H.length===0)U.call(M);else if(H.bind){if(M)H=H.bind(M);J(H,Y,U)}else{var G;if(M){var z=H.length;G=new Array(z);for(var q=0;q<z;q++)G[q]=H[q].bind(M)}else G=H;Z(G,Y,U)}}}function mU(K,J,Z){var X=0,M=J.length;H();function H(){if(X<M)f8(K,J[X++],H);else Z()}}function fU(K,J,Z){var X=0,M=K.length,H;if(K[0].length===1)H=FZ;else H=f8;Y();function Y(){if(X<M)H(K[X++],J,Y);else Z()}}function cU(K,J,Z){var X=0,M=J.length,H=new Array(M);Y(null,null);function Y(U,G){if(U){Z(U);return}if(X>0)H[X-1]=G;if(X<M)f8(K,J[X++],Y);else Z(null,H)}}function dU(K,J,Z){var X=0,M=K.length,H;if(K[0].length===1)H=FZ;else H=f8;var Y=new Array(M);U(null,null);function U(G,z){if(G){Z(G);return}if(X>0)Y[X-1]=z;if(X<M)H(K[X++],J,U);else Z(null,Y)}}function FZ(K,J,Z){K(Z)}function f8(K,J,Z){K(J,Z)}function bU(){}TZ.exports=uU});var CZ=O((OZ)=>{Object.defineProperty(OZ,"__esModule",{value:!0});OZ.default=void 0;var zI=OZ.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var LZ=O((_Z)=>{Object.defineProperty(_Z,"__esModule",{value:!0});_Z.default=void 0;var $I=_Z.default="00000000-0000-0000-0000-000000000000"});var jZ=O((EZ)=>{Object.defineProperty(EZ,"__esModule",{value:!0});EZ.default=void 0;var VI=EZ.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var Q8=O((xZ)=>{Object.defineProperty(xZ,"__esModule",{value:!0});xZ.default=void 0;var pU=lU(jZ());function lU(K){return K&&K.__esModule?K:{default:K}}function iU(K){return typeof K==="string"&&pU.default.test(K)}var PI=xZ.default=iU});var V8=O((BZ)=>{Object.defineProperty(BZ,"__esModule",{value:!0});BZ.default=void 0;var nU=oU(Q8());function oU(K){return K&&K.__esModule?K:{default:K}}function rU(K){if(!nU.default(K))throw TypeError("Invalid UUID");let J,Z=new Uint8Array(16);return Z[0]=(J=parseInt(K.slice(0,8),16))>>>24,Z[1]=J>>>16&255,Z[2]=J>>>8&255,Z[3]=J&255,Z[4]=(J=parseInt(K.slice(9,13),16))>>>8,Z[5]=J&255,Z[6]=(J=parseInt(K.slice(14,18),16))>>>8,Z[7]=J&255,Z[8]=(J=parseInt(K.slice(19,23),16))>>>8,Z[9]=J&255,Z[10]=(J=parseInt(K.slice(24,36),16))/1099511627776&255,Z[11]=J/4294967296&255,Z[12]=J>>>24&255,Z[13]=J>>>16&255,Z[14]=J>>>8&255,Z[15]=J&255,Z}var TI=BZ.default=rU});var Y1=O((kZ)=>{Object.defineProperty(kZ,"__esModule",{value:!0});kZ.default=void 0;kZ.unsafeStringify=SZ;var aU=sU(Q8());function sU(K){return K&&K.__esModule?K:{default:K}}var z0=[];for(let K=0;K<256;++K)z0.push((K+256).toString(16).slice(1));function SZ(K,J=0){return(z0[K[J+0]]+z0[K[J+1]]+z0[K[J+2]]+z0[K[J+3]]+"-"+z0[K[J+4]]+z0[K[J+5]]+"-"+z0[K[J+6]]+z0[K[J+7]]+"-"+z0[K[J+8]]+z0[K[J+9]]+"-"+z0[K[J+10]]+z0[K[J+11]]+z0[K[J+12]]+z0[K[J+13]]+z0[K[J+14]]+z0[K[J+15]]).toLowerCase()}function tU(K,J=0){let Z=SZ(K,J);if(!aU.default(Z))throw TypeError("Stringified UUID is invalid");return Z}var OI=kZ.default=tU});var b8=O((hZ)=>{Object.defineProperty(hZ,"__esModule",{value:!0});hZ.default=ZG;var KG=JG(S("node:crypto"));function JG(K){return K&&K.__esModule?K:{default:K}}var d8=new Uint8Array(256),c8=d8.length;function ZG(){if(c8>d8.length-16)KG.default.randomFillSync(d8),c8=0;return d8.slice(c8,c8+=16)}});var sK=O((vZ)=>{Object.defineProperty(vZ,"__esModule",{value:!0});vZ.default=void 0;var MG=YG(b8()),HG=Y1();function YG(K){return K&&K.__esModule?K:{default:K}}var oK,p8,rK=0,aK=0;function UG(K,J,Z){let X=J&&Z||0,M=J||new Array(16);K=K||{};let{node:H,clockseq:Y}=K;if(!K._v6){if(!H)H=oK;if(Y==null)Y=p8}if(H==null||Y==null){let V=K.random||(K.rng||MG.default)();if(H==null){if(H=[V[0],V[1],V[2],V[3],V[4],V[5]],!oK&&!K._v6)H[0]|=1,oK=H}if(Y==null){if(Y=(V[6]<<8|V[7])&16383,p8===void 0&&!K._v6)p8=Y}}let U=K.msecs!==void 0?K.msecs:Date.now(),G=K.nsecs!==void 0?K.nsecs:aK+1,z=U-rK+(G-aK)/1e4;if(z<0&&K.clockseq===void 0)Y=Y+1&16383;if((z<0||U>rK)&&K.nsecs===void 0)G=0;if(G>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");rK=U,aK=G,p8=Y,U+=12219292800000;let q=((U&268435455)*1e4+G)%4294967296;M[X++]=q>>>24&255,M[X++]=q>>>16&255,M[X++]=q>>>8&255,M[X++]=q&255;let $=U/4294967296*1e4&268435455;M[X++]=$>>>8&255,M[X++]=$&255,M[X++]=$>>>24&15|16,M[X++]=$>>>16&255,M[X++]=Y>>>8|128,M[X++]=Y&255;for(let V=0;V<6;++V)M[X+V]=H[V];return J||HG.unsafeStringify(M)}var _I=vZ.default=UG});var tK=O((uZ)=>{Object.defineProperty(uZ,"__esModule",{value:!0});uZ.default=$G;var GG=qG(V8()),zG=Y1();function qG(K){return K&&K.__esModule?K:{default:K}}function $G(K){let J=typeof K==="string"?GG.default(K):K,Z=QG(J);return typeof K==="string"?zG.unsafeStringify(Z):Z}function QG(K,J=!1){return Uint8Array.of((K[6]&15)<<4|K[7]>>4&15,(K[7]&15)<<4|(K[4]&240)>>4,(K[4]&15)<<4|(K[5]&240)>>4,(K[5]&15)<<4|(K[0]&240)>>4,(K[0]&15)<<4|(K[1]&240)>>4,(K[1]&15)<<4|(K[2]&240)>>4,96|K[2]&15,K[3],K[8],K[9],K[10],K[11],K[12],K[13],K[14],K[15])}});var eK=O((mZ)=>{Object.defineProperty(mZ,"__esModule",{value:!0});mZ.URL=mZ.DNS=void 0;mZ.default=NG;var WG=Y1(),PG=FG(V8());function FG(K){return K&&K.__esModule?K:{default:K}}function TG(K){K=unescape(encodeURIComponent(K));let J=[];for(let Z=0;Z<K.length;++Z)J.push(K.charCodeAt(Z));return J}var IG=mZ.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",OG=mZ.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function NG(K,J,Z){function X(M,H,Y,U){var G;if(typeof M==="string")M=TG(M);if(typeof H==="string")H=PG.default(H);if(((G=H)===null||G===void 0?void 0:G.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let z=new Uint8Array(16+M.length);if(z.set(H),z.set(M,H.length),z=Z(z),z[6]=z[6]&15|J,z[8]=z[8]&63|128,Y){U=U||0;for(let q=0;q<16;++q)Y[U+q]=z[q];return Y}return WG.unsafeStringify(z)}try{X.name=K}catch(M){}return X.DNS=IG,X.URL=OG,X}});var bZ=O((cZ)=>{Object.defineProperty(cZ,"__esModule",{value:!0});cZ.default=void 0;var AG=LG(S("node:crypto"));function LG(K){return K&&K.__esModule?K:{default:K}}function EG(K){if(Array.isArray(K))K=Buffer.from(K);else if(typeof K==="string")K=Buffer.from(K,"utf8");return AG.default.createHash("md5").update(K).digest()}var DI=cZ.default=EG});var nZ=O((lZ)=>{Object.defineProperty(lZ,"__esModule",{value:!0});lZ.default=void 0;var DG=pZ(eK()),jG=pZ(bZ());function pZ(K){return K&&K.__esModule?K:{default:K}}var xG=DG.default("v3",48,jG.default),xI=lZ.default=xG});var aZ=O((oZ)=>{Object.defineProperty(oZ,"__esModule",{value:!0});oZ.default=void 0;var RG=BG(S("node:crypto"));function BG(K){return K&&K.__esModule?K:{default:K}}var BI=oZ.default={randomUUID:RG.default.randomUUID}});var J6=O((eZ)=>{Object.defineProperty(eZ,"__esModule",{value:!0});eZ.default=void 0;var sZ=tZ(aZ()),wG=tZ(b8()),SG=Y1();function tZ(K){return K&&K.__esModule?K:{default:K}}function kG(K,J,Z){if(sZ.default.randomUUID&&!J&&!K)return sZ.default.randomUUID();K=K||{};let X=K.random||(K.rng||wG.default)();if(X[6]=X[6]&15|64,X[8]=X[8]&63|128,J){Z=Z||0;for(let M=0;M<16;++M)J[Z+M]=X[M];return J}return SG.unsafeStringify(X)}var SI=eZ.default=kG});var M6=O((Z6)=>{Object.defineProperty(Z6,"__esModule",{value:!0});Z6.default=void 0;var yG=hG(S("node:crypto"));function hG(K){return K&&K.__esModule?K:{default:K}}function vG(K){if(Array.isArray(K))K=Buffer.from(K);else if(typeof K==="string")K=Buffer.from(K,"utf8");return yG.default.createHash("sha1").update(K).digest()}var yI=Z6.default=vG});var G6=O((Y6)=>{Object.defineProperty(Y6,"__esModule",{value:!0});Y6.default=void 0;var gG=H6(eK()),uG=H6(M6());function H6(K){return K&&K.__esModule?K:{default:K}}var mG=gG.default("v5",80,uG.default),vI=Y6.default=mG});var $6=O((q6)=>{Object.defineProperty(q6,"__esModule",{value:!0});q6.default=bG;var fG=Y1(),cG=z6(sK()),dG=z6(tK());function z6(K){return K&&K.__esModule?K:{default:K}}function bG(K={},J,Z=0){let X=cG.default({...K,_v6:!0},new Uint8Array(16));if(X=dG.default(X),J){for(let M=0;M<16;M++)J[Z+M]=X[M];return J}return fG.unsafeStringify(X)}});var V6=O((Q6)=>{Object.defineProperty(Q6,"__esModule",{value:!0});Q6.default=oG;var lG=nG(V8()),iG=Y1();function nG(K){return K&&K.__esModule?K:{default:K}}function oG(K){let J=typeof K==="string"?lG.default(K):K,Z=rG(J);return typeof K==="string"?iG.unsafeStringify(Z):Z}function rG(K){return Uint8Array.of((K[3]&15)<<4|K[4]>>4&15,(K[4]&15)<<4|(K[5]&240)>>4,(K[5]&15)<<4|K[6]&15,K[7],(K[1]&15)<<4|(K[2]&240)>>4,(K[2]&15)<<4|(K[3]&240)>>4,16|(K[0]&240)>>4,(K[0]&15)<<4|(K[1]&240)>>4,K[8],K[9],K[10],K[11],K[12],K[13],K[14],K[15])}});var I6=O((F6)=>{Object.defineProperty(F6,"__esModule",{value:!0});F6.default=void 0;var sG=eG(b8()),tG=Y1();function eG(K){return K&&K.__esModule?K:{default:K}}var W6=null,P6=null,u0=0;function Kz(K,J,Z){K=K||{};let X=J&&Z||0,M=J||new Uint8Array(16),H=K.random||(K.rng||sG.default)(),Y=K.msecs!==void 0?K.msecs:Date.now(),U=K.seq!==void 0?K.seq:null,G=P6,z=W6;if(Y>u0&&K.msecs===void 0){if(u0=Y,U!==null)G=null,z=null}if(U!==null){if(U>2147483647)U=2147483647;G=U>>>19&4095,z=U&524287}if(G===null||z===null)G=H[6]&127,G=G<<8|H[7],z=H[8]&63,z=z<<8|H[9],z=z<<5|H[10]>>>3;if(Y+1e4>u0&&U===null){if(++z>524287){if(z=0,++G>4095)G=0,u0++}}else u0=Y;return P6=G,W6=z,M[X++]=u0/1099511627776&255,M[X++]=u0/4294967296&255,M[X++]=u0/16777216&255,M[X++]=u0/65536&255,M[X++]=u0/256&255,M[X++]=u0&255,M[X++]=G>>>4&15|112,M[X++]=G&255,M[X++]=z>>>13&63|128,M[X++]=z>>>5&255,M[X++]=z<<3&255|H[10]&7,M[X++]=H[11],M[X++]=H[12],M[X++]=H[13],M[X++]=H[14],M[X++]=H[15],J||tG.unsafeStringify(M)}var fI=F6.default=Kz});var C6=O((O6)=>{Object.defineProperty(O6,"__esModule",{value:!0});O6.default=void 0;var Jz=Zz(Q8());function Zz(K){return K&&K.__esModule?K:{default:K}}function Xz(K){if(!Jz.default(K))throw TypeError("Invalid UUID");return parseInt(K.slice(14,15),16)}var dI=O6.default=Xz});var _6=O((V0)=>{Object.defineProperty(V0,"__esModule",{value:!0});Object.defineProperty(V0,"MAX",{enumerable:!0,get:function(){return Mz.default}});Object.defineProperty(V0,"NIL",{enumerable:!0,get:function(){return Hz.default}});Object.defineProperty(V0,"parse",{enumerable:!0,get:function(){return Yz.default}});Object.defineProperty(V0,"stringify",{enumerable:!0,get:function(){return Uz.default}});Object.defineProperty(V0,"v1",{enumerable:!0,get:function(){return Gz.default}});Object.defineProperty(V0,"v1ToV6",{enumerable:!0,get:function(){return zz.default}});Object.defineProperty(V0,"v3",{enumerable:!0,get:function(){return qz.default}});Object.defineProperty(V0,"v4",{enumerable:!0,get:function(){return $z.default}});Object.defineProperty(V0,"v5",{enumerable:!0,get:function(){return Qz.default}});Object.defineProperty(V0,"v6",{enumerable:!0,get:function(){return Vz.default}});Object.defineProperty(V0,"v6ToV1",{enumerable:!0,get:function(){return Wz.default}});Object.defineProperty(V0,"v7",{enumerable:!0,get:function(){return Pz.default}});Object.defineProperty(V0,"validate",{enumerable:!0,get:function(){return Fz.default}});Object.defineProperty(V0,"version",{enumerable:!0,get:function(){return Tz.default}});var Mz=N0(CZ()),Hz=N0(LZ()),Yz=N0(V8()),Uz=N0(Y1()),Gz=N0(sK()),zz=N0(tK()),qz=N0(nZ()),$z=N0(J6()),Qz=N0(G6()),Vz=N0($6()),Wz=N0(V6()),Pz=N0(I6()),Fz=N0(Q8()),Tz=N0(C6());function N0(K){return K&&K.__esModule?K:{default:K}}});var p1=O((lI,A6)=>{function Iz(K,J){if(Object.prototype.hasOwnProperty.call(K,"clientId"))this.clientId=K.clientId;if(Object.prototype.hasOwnProperty.call(K,"nl"))this.nl=K.nl;if(this.cmd=K.cmd||"publish",this.brokerId=K.brokerId||J&&J.id,this.brokerCounter=K.brokerCounter||(J?++J.counter:0),this.topic=K.topic,this.payload=K.payload||Buffer.alloc(0),this.qos=K.qos||0,this.retain=K.retain||!1,this.dup=K.dup||!1,this.qos>0||this.cmd!=="publish")this.messageId=void 0}A6.exports=Iz});var K9=O((iI,L6)=>{var m0=S("util");L6.exports=function(K,J){class Z extends K{constructor(X){super(X);this.addP=m0.promisify(this.add_async),this.removeP=m0.promisify(this.remove_async),this.matchP=m0.promisify(this.match_async),this.testP=m0.promisify(this.test_async),this.clearP=m0.promisify(this.clear_async),this._get_visitorP=m0.promisify(this.get_visitor_async),this._visit_nextP=m0.promisify(this.visit_next_async),this._get_restorerP=m0.promisify(this.get_restorer_async),this._restore_nextP=m0.promisify(this.restore_next_async),this._match_iterP=m0.promisify(this.match_iter_async),this._match_nextP=m0.promisify(this.match_next_async)}*visit(){let X=this.get_visitor();while(!0){let M=this.visit_next(X);if(M===void 0)break;yield M}}async*visitP(){let X=await this._get_visitorP();while(!0){let M=await this._visit_nextP(X);if(M===void 0)break;yield M}}*match_iter(X,M){let H=super.match_iter(X,M);while(!0){let Y=this.match_next(H);if(Y===void 0)break;yield Y.value}}async*match_iterP(X,M){let H=await this._match_iterP(X,M);while(!0){let Y=await this._match_nextP(H);if(Y===void 0)break;yield Y.value}}get_trie(){let X=new J(this.options),M=X.get_restorer();for(let H of this.visit())M(H);return X.get_trie()}get_restorer(X){let M=super.get_restorer(X);return(H)=>{super.restore_next(M,H)}}async get_restorerP(X){let M=await this._get_restorerP(X);return async(H)=>{await this._restore_nextP(M,H)}}}return Z.is_native=!0,Z.nonNative=J,Z}});var X9=O((D6)=>{var l8=S("util");function d(K){if(K=K||{},this._separator=K.separator||".",this._wildcard_one=K.wildcard_one||"*",this._wildcard_some=K.wildcard_some||"#",this._max_words=K.max_words||100,this._max_wildcard_somes=K.max_wildcard_somes||3,this._match_empty_levels=K.match_empty_levels,this._trie=new Map,K.cache_adds instanceof Map)this._shortcuts=K.cache_adds;else if(K.cache_adds)this._shortcuts=new Map;if(K.cache_splits>0)this._cache_splits=K.cache_splits,this._split_cache=new Map}d.prototype._initial_value=function(K){return[K]};d.prototype._add_value=function(K,J){K[K.length]=J};d.prototype._add_values=function(K,J){var Z,X=K.length,M=J.length;for(Z=0;Z<M;Z+=1)K[X+Z]=J[Z]};d.prototype._iter_values=function(K,J){return K[Symbol.iterator](J)};d.prototype._remove_value=function(K,J){if(J===void 0)return!0;var Z=K.lastIndexOf(J);if(Z>=0)K.splice(Z,1);return K.length===0};d.prototype._add=function(K,J,Z,X){var M,H;if(J===Z.length){if(M=X.get(this._separator),M)this._add_value(M,K);else M=this._initial_value(K),X.set(this._separator,M);return M}if(H=Z[J],M=X.get(H),!M)M=new Map,X.set(H,M);return this._add(K,J+1,Z,M)};d.prototype._remove=function(K,J,Z,X){var M,H,Y;if(J===Z.length){if(M=X.get(this._separator),M&&this._remove_value(M,K))return X.delete(this._separator),!0;return!1}if(H=Z[J],M=X.get(H),!M)return!1;if(Y=this._remove(K,J+1,Z,M),M.size===0)X.delete(H);return Y};d.prototype._match_some=function(K,J,Z,X,M){var H,Y;for(Y of X.keys())if(Y!==this._separator){for(H=J;H<Z.length;H+=1)K=this._match(K,H,Z,X,M);break}return K};d.prototype._match=function(K,J,Z,X,M){var H,Y;if(Y=X.get(this._wildcard_some),Y)K=this._match_some(K,J,Z,Y,M),K=this._match(K,Z.length,Z,Y,M);if(J===Z.length){if(Y=X.get(this._separator),Y)if(K.dest)this._add_values(K.dest,K.source,M),this._add_values(K.dest,Y,M),K=K.dest;else if(K.source)K.dest=K.source,K.source=Y;else this._add_values(K,Y,M)}else{if(H=Z[J],H!==this._wildcard_one&&H!==this._wildcard_some){if(Y=X.get(H),Y)K=this._match(K,J+1,Z,Y,M)}if(H||this._match_empty_levels){if(Y=X.get(this._wildcard_one),Y)K=this._match(K,J+1,Z,Y,M)}}return K};d.prototype._match2=function(K,J,Z){var X=this._match({source:K},0,this._split(J,!1),this._trie,Z);return X.source||X};d.prototype._test_some=function(K,J,Z,X){var M,H;for(H of X.keys())if(H!==this._separator){for(M=J;M<Z.length;M+=1)if(this._test(K,M,Z,X))return!0;break}return!1};d.prototype._test=function(K,J,Z,X){var M,H;if(H=X.get(this._wildcard_some),H){if(this._test_some(K,J,Z,H)||this._test(K,Z.length,Z,H))return!0}if(J===Z.length){if(H=X.get(this._separator),H&&this.test_values(H,K))return!0}else{if(M=Z[J],M!==this._wildcard_one&&M!==this._wildcard_some){if(H=X.get(M),H&&this._test(K,J+1,Z,H))return!0}if(M||this._match_empty_levels){if(H=X.get(this._wildcard_one),H&&this._test(K,J+1,Z,H))return!0}}return!1};d.prototype._match_some_iter=function*(K,J,Z,X){var M,H;for(H of Z.keys())if(H!==this._separator){for(M=K;M<J.length;M+=1)yield*this._match_iter(M,J,Z,X);break}};d.prototype._match_iter=function*(K,J,Z,X){var M,H;if(H=Z.get(this._wildcard_some),H)yield*this._match_some_iter(K,J,H,X),yield*this._match_iter(J.length,J,H,X);if(K===J.length){if(H=Z.get(this._separator),H)yield*this._iter_values(H,X)}else{if(M=J[K],M!==this._wildcard_one&&M!==this._wildcard_some){if(H=Z.get(M),H)yield*this._match_iter(K+1,J,H,X)}if(M||this._match_empty_levels){if(H=Z.get(this._wildcard_one),H)yield*this._match_iter(K+1,J,H,X)}}};d.prototype._split_words=function(K){let J=K.split(this._separator);if(J.length>this._max_words)throw new Error("too many words");return J};d.prototype._split=function(K,J){let Z;if(this._split_cache){if(Z=this._split_cache.get(K),Z===void 0){if(Z=this._split_words(K),this._split_cache.set(K,Z),this._split_cache.size>this._cache_splits)for(let X of this._split_cache.keys()){this._split_cache.delete(X);break}}}else Z=this._split_words(K);if(J&&Z.reduce((X,M)=>X+(M===this._wildcard_some),0)>this._max_wildcard_somes)throw new Error("too many wildcard somes");return Z};d.prototype.add=function(K,J){var Z=this._shortcuts&&this._shortcuts.get(K);if(Z)this._add_value(Z,J);else if(Z=this._add(J,0,this._split(K,!0),this._trie),this._shortcuts)this._shortcuts.set(K,Z);return this};d.prototype.remove=function(K,J){if(this._remove(J,0,this._split(K,!1),this._trie)&&this._shortcuts)this._shortcuts.delete(K);return this};d.prototype.match=function(K,J){return this._match2([],K,J)};d.prototype.match_iter=function(K,J){return this._match_iter(0,this._split(K,!1),this._trie,J)};d.prototype.test=function(K,J){return this._test(J,0,this._split(K,!1),this._trie)};d.prototype.test_values=function(K,J){return K.indexOf(J)>=0};d.prototype.clear=function(){if(this._trie.clear(),this._shortcuts)this._shortcuts.clear();if(this._split_cache)this._split_cache.clear();return this};d.prototype.get_trie=function(){return this._trie};d.prototype.visit=function*(){let K=[],J=this._trie.entries(),Z=0;while(!0){if(Z===0)yield{type:"start_entries"};let X=J.next();if(X.done){yield{type:"end_entries"};let Y=K.pop();if(Y===void 0)return;[J,Z]=Y;continue}let[M,H]=X.value;if(yield{type:"entry",key:M},++Z,M===this._separator){if(yield{type:"start_values"},H[Symbol.iterator])for(let Y of H)yield{type:"value",value:Y};else yield{type:"value",value:H};yield{type:"end_values"};continue}K.push([J,Z]),J=H.entries(),Z=0}};d.prototype.get_restorer=function(K){K=K||{};let J=[],Z=this._trie,X="";return(M)=>{switch(M.type){case"entry":if(Z=Z||new Map,J.push([Z,M.key,X]),Z=Z.get(M.key),K.cache_adds){if(X)X+=this._separator;X+=M.key}break;case"value":if(Z)this._add_value(Z,M.value);else Z=this._initial_value(M.value);break;case"end_entries":if(Z&&Z.size===0)Z=void 0;case"end_values":let H=J.pop();if(H===void 0)Z=void 0,X="";else{let[Y,U,G]=H;if(Z){if(K.cache_adds&&this._shortcuts&&M.type==="end_values")this._shortcuts.set(G,Z);Y.set(U,Z)}Z=Y,X=G}break}}};function j0(K){d.call(this,K)}l8.inherits(j0,d);j0.prototype._initial_value=function(K){return new Set().add(K)};j0.prototype._add_value=function(K,J){K.add(J)};j0.prototype._add_values=function(K,J){J.forEach(function(Z){K.add(Z)})};j0.prototype._remove_value=function(K,J){if(J===void 0)return!0;return K.delete(J),K.size===0};j0.prototype.test_values=function(K,J){return K.has(J)};j0.prototype.match=function(K,J){return this._match2(new Set,K,J)};function i0(K){d.call(this,K)}l8.inherits(i0,d);i0.prototype._initial_value=function(){return!0};i0.prototype._add_value=function(){};i0.prototype._remove_value=function(){return!0};i0.prototype._iter_values=function*(){yield!0};i0.prototype.test_values=function(){return!0};i0.prototype.match=function(K,J){return this.test(K,J)};var i8=S("stream");function J9(K){i8.Readable.call(this,{objectMode:!0}),this._iterator=K.visit()}l8.inherits(J9,i8.Readable);J9.prototype._read=function(){while(!0){let{done:K,value:J}=this._iterator.next();if(K){this.push(null);break}if(!this.push(J))break}};function Z9(K){i8.Writable.call(this,{objectMode:!0}),this._restorer=K.get_restorer()}l8.inherits(Z9,i8.Writable);Z9.prototype._write=function(K,J,Z){this._restorer(K),Z()};var E6=null;function Oz(K){if(K!==E6){let J=K9();d.nativeString=J(K.QlobberString,d),d.nativeNumber=J(K.QlobberNumber,d),j0.nativeString=J(K.QlobberDedupString,j0),j0.nativeNumber=J(K.QlobberDedupNumber,j0),i0.native=J(K.QlobberTrue,i0),E6=K}return D6}D6.Qlobber=d;D6.QlobberDedup=j0;D6.QlobberTrue=i0;D6.VisitorStream=J9;D6.RestorerStream=Z9;D6.set_native=Oz});var j6=O((oI,H9)=>{var Dz=S("util"),jz=X9(),M9=jz.Qlobber;function x0(K){M9.call(this,K),this.subscriptionsCount=0}Dz.inherits(x0,M9);x0.prototype._initial_value=function(K){this.subscriptionsCount+=1;let J={topic:K.topic,clientMap:new Map().set(K.clientId,{qos:K.qos,rh:K.rh,rap:K.rap,nl:K.nl})};return J[Symbol.iterator]=function*(Z){if(Z===void 0)for(let[X,M]of J.clientMap)yield{topic:J.topic,clientId:X,...M};else if(J.topic===Z)for(let[X,M]of J.clientMap)yield{clientId:X,...M}},J};x0.prototype._add_value=function(K,J){var Z=K.clientMap,X=Z.size;if(Z.set(J.clientId,{qos:J.qos,rh:J.rh,rap:J.rap,nl:J.nl}),Z.size>X)this.subscriptionsCount+=1};x0.prototype._add_values=function(K,J,Z){if(Z===void 0)for(let[X,M]of J.clientMap)K.push({clientId:X,topic:J.topic,...M});else if(J.topic===Z)for(let[X,M]of J.clientMap)K.push({clientId:X,...M})};x0.prototype._remove_value=function(K,J){var Z=K.clientMap,X=Z.size;Z.delete(J.clientId);var M=Z.size;if(M<X)this.subscriptionsCount-=1;return M===0};x0.prototype.test_values=function(K,J){var Z=K.clientMap;return K.topic===J.topic&&Z.size===1&&Z.has(J.clientId)};x0.prototype.match=function(K,J){return this._match([],0,K.split(this._separator),this._trie,J)};x0.prototype.clear=function(){return this.subscriptionsCount=0,M9.prototype.clear.call(this)};x0.set_native=function(K){let J=K9();return x0.native=J(K.QlobberSub,x0),H9.exports};H9.exports=x0});var w6=O((rI,U9)=>{var{Readable:W8}=S("stream"),xz=j6(),{QlobberTrue:Rz}=X9(),Y9=p1(),R6={wildcard_one:"+",wildcard_some:"#",separator:"/"};function*Bz(K){for(let J of K)yield*J}function*x6(K,J){let Z=new Rz(R6);Z.add(J);for(let[X,M]of K)if(Z.test(X))yield M}function*wz(K,J){for(let Z of K.values())if(!J[Z.brokerId])yield Z}function*Sz(K,J){for(let[Z,X]of K)if(X.has(J))yield Z}class B6{#J;#K;#M;#H;#Z;#Y;#X;constructor(){this.#J=new Map,this.#K=new Map,this.#M=new Map,this.#H=new Map,this.#Z=new Map,this.#Y=0,this.#X=new xz(R6)}storeRetained(K,J){let Z=Object.assign({},K);if(Z.payload.length===0)this.#J.delete(Z.topic);else this.#J.set(Z.topic,Z);J(null)}createRetainedStreamCombi(K){let J=K.map((Z)=>{return x6(this.#J,Z)});return W8.from(Bz(J))}createRetainedStream(K){return W8.from(x6(this.#J,K))}addSubscriptions(K,J,Z){let X=this.#K.get(K.id),M=this.#X;if(!X)X=new Map,this.#K.set(K.id,X),this.#Y++;for(let H of J){let Y=X.get(H.topic);if(H.qos>0)M.add(H.topic,{clientId:K.id,topic:H.topic,qos:H.qos,rh:H.rh,rap:H.rap,nl:H.nl});else if(Y?.qos>0)M.remove(H.topic,{clientId:K.id,topic:H.topic});X.set(H.topic,{qos:H.qos,rh:H.rh,rap:H.rap,nl:H.nl})}Z(null,K)}removeSubscriptions(K,J,Z){let X=this.#K.get(K.id),M=this.#X;if(X){for(let H of J){let Y=X.get(H);if(Y!==void 0){if(Y.qos>0)M.remove(H,{clientId:K.id,topic:H});X.delete(H)}}if(X.size===0)this.#Y--,this.#K.delete(K.id)}Z(null,K)}subscriptionsByClient(K,J){let Z=null,X=this.#K.get(K.id);if(X){Z=[];for(let[M,H]of X)Z.push({topic:M,...H})}J(null,Z,K)}countOffline(K){return K(null,this.#X.subscriptionsCount,this.#Y)}subscriptionsByTopic(K,J){J(null,this.#X.match(K))}cleanSubscriptions(K,J){let Z=this.#X,X=this.#K.get(K.id);if(X){for(let[M,H]of X)if(H.qos>0)Z.remove(M,{clientId:K.id,topic:M});this.#Y--,this.#K.delete(K.id)}J(null,K)}#U(K,J){let Z=K.clientId,X=_1(this.#M,Z,[],!0);X[X.length]=new Y9(J)}outgoingEnqueue(K,J,Z){this.#U(K,J),process.nextTick(Z)}outgoingEnqueueCombi(K,J,Z){for(let X=0;X<K.length;X++)this.#U(K[X],J);process.nextTick(Z)}outgoingUpdate(K,J,Z){let X=_1(this.#M,K.id,[],!0),M;for(let H=0;H<X.length;H++)if(M=X[H],M.brokerId===J.brokerId){if(M.brokerCounter===J.brokerCounter)return M.messageId=J.messageId,Z(null,K,J)}else if(M.messageId===J.messageId)return X[H]=J,Z(null,K,J);Z(new Error("no such packet"),K,J)}outgoingClearMessageId(K,J,Z){let X=_1(this.#M,K.id,[],!0),M;for(let H=0;H<X.length;H++)if(M=X[H],M.messageId===J.messageId)return X.splice(H,1),Z(null,M);Z()}outgoingStream(K){let J=[].concat(_1(this.#M,K.id,[]));return W8.from(J)}incomingStorePacket(K,J,Z){let X=K.id,M=_1(this.#H,X,{},!0);M[J.messageId]=new Y9(J),M[J.messageId].messageId=J.messageId,Z(null)}incomingGetPacket(K,J,Z){let X=K.id,M=_1(this.#H,X,{}),H=null;if(this.#H.set(X,M),!M[J.messageId])H=new Error("no such packet");Z(H,M[J.messageId])}incomingDelPacket(K,J,Z){let X=K.id,M=_1(this.#H,X,{}),H=M[J.messageId],Y=null;if(!H)Y=new Error("no such packet");else delete M[J.messageId];Z(Y)}putWill(K,J,Z){J.brokerId=this.broker.id,J.clientId=K.id,this.#Z.set(K.id,J),Z(null,K)}getWill(K,J){J(null,this.#Z.get(K.id),K)}delWill(K,J){let Z=this.#Z.get(K.id);this.#Z.delete(K.id),J(null,Z,K)}streamWill(K={}){return W8.from(wz(this.#Z,K))}getClientList(K){return W8.from(Sz(this.#K,K))}destroy(K){if(this.#J=null,K)K(null)}}function _1(K,J,Z,X=!1){let M=K.get(J);if(M===void 0&&X)K.set(J,Z);return M||Z}U9.exports=()=>{return new B6};U9.exports.Packet=Y9});var k6=O((aI,S6)=>{var f0=S("util");S6.exports=function(K,J){class Z extends K{constructor(X){super(X);this.addP=f0.promisify(this.add_async),this.removeP=f0.promisify(this.remove_async),this.matchP=f0.promisify(this.match_async),this.testP=f0.promisify(this.test_async),this.clearP=f0.promisify(this.clear_async),this._get_visitorP=f0.promisify(this.get_visitor_async),this._visit_nextP=f0.promisify(this.visit_next_async),this._get_restorerP=f0.promisify(this.get_restorer_async),this._restore_nextP=f0.promisify(this.restore_next_async),this._match_iterP=f0.promisify(this.match_iter_async),this._match_nextP=f0.promisify(this.match_next_async)}*visit(){let X=this.get_visitor();while(!0){let M=this.visit_next(X);if(M===void 0)break;yield M}}async*visitP(){let X=await this._get_visitorP();while(!0){let M=await this._visit_nextP(X);if(M===void 0)break;yield M}}*match_iter(X,M){let H=super.match_iter(X,M);while(!0){let Y=this.match_next(H);if(Y===void 0)break;yield Y.value}}async*match_iterP(X,M){let H=await this._match_iterP(X,M);while(!0){let Y=await this._match_nextP(H);if(Y===void 0)break;yield Y.value}}get_trie(){let X=new J(this.options),M=X.get_restorer();for(let H of this.visit())M(H);return X.get_trie()}get_restorer(X){let M=super.get_restorer(X);return(H)=>{super.restore_next(M,H)}}async get_restorerP(X){let M=await this._get_restorerP(X);return async(H)=>{await this._restore_nextP(M,H)}}}return Z.is_native=!0,Z.nonNative=J,Z}});var v6=O((h6)=>{var n8=S("util");function b(K){if(K=K||{},this._separator=K.separator||".",this._wildcard_one=K.wildcard_one||"*",this._wildcard_some=K.wildcard_some||"#",this._max_words=K.max_words||100,this._max_wildcard_somes=K.max_wildcard_somes||3,this._match_empty_levels=K.match_empty_levels,this._trie=new Map,K.cache_adds instanceof Map)this._shortcuts=K.cache_adds;else if(K.cache_adds)this._shortcuts=new Map;if(K.cache_splits>0)this._cache_splits=K.cache_splits,this._split_cache=new Map}b.prototype._initial_value=function(K){return[K]};b.prototype._add_value=function(K,J){K[K.length]=J};b.prototype._add_values=function(K,J){var Z,X=K.length,M=J.length;for(Z=0;Z<M;Z+=1)K[X+Z]=J[Z]};b.prototype._iter_values=function(K,J){return K[Symbol.iterator](J)};b.prototype._remove_value=function(K,J){if(J===void 0)return!0;var Z=K.lastIndexOf(J);if(Z>=0)K.splice(Z,1);return K.length===0};b.prototype._add=function(K,J,Z,X){var M,H;if(J===Z.length){if(M=X.get(this._separator),M)this._add_value(M,K);else M=this._initial_value(K),X.set(this._separator,M);return M}if(H=Z[J],M=X.get(H),!M)M=new Map,X.set(H,M);return this._add(K,J+1,Z,M)};b.prototype._remove=function(K,J,Z,X){var M,H,Y;if(J===Z.length){if(M=X.get(this._separator),M&&this._remove_value(M,K))return X.delete(this._separator),!0;return!1}if(H=Z[J],M=X.get(H),!M)return!1;if(Y=this._remove(K,J+1,Z,M),M.size===0)X.delete(H);return Y};b.prototype._match_some=function(K,J,Z,X,M){var H,Y;for(Y of X.keys())if(Y!==this._separator){for(H=J;H<Z.length;H+=1)K=this._match(K,H,Z,X,M);break}return K};b.prototype._match=function(K,J,Z,X,M){var H,Y;if(Y=X.get(this._wildcard_some),Y)K=this._match_some(K,J,Z,Y,M),K=this._match(K,Z.length,Z,Y,M);if(J===Z.length){if(Y=X.get(this._separator),Y)if(K.dest)this._add_values(K.dest,K.source,M),this._add_values(K.dest,Y,M),K=K.dest;else if(K.source)K.dest=K.source,K.source=Y;else this._add_values(K,Y,M)}else{if(H=Z[J],H!==this._wildcard_one&&H!==this._wildcard_some){if(Y=X.get(H),Y)K=this._match(K,J+1,Z,Y,M)}if(H||this._match_empty_levels){if(Y=X.get(this._wildcard_one),Y)K=this._match(K,J+1,Z,Y,M)}}return K};b.prototype._match2=function(K,J,Z){var X=this._match({source:K},0,this._split(J,!1),this._trie,Z);return X.source||X};b.prototype._test_some=function(K,J,Z,X){var M,H;for(H of X.keys())if(H!==this._separator){for(M=J;M<Z.length;M+=1)if(this._test(K,M,Z,X))return!0;break}return!1};b.prototype._test=function(K,J,Z,X){var M,H;if(H=X.get(this._wildcard_some),H){if(this._test_some(K,J,Z,H)||this._test(K,Z.length,Z,H))return!0}if(J===Z.length){if(H=X.get(this._separator),H&&this.test_values(H,K))return!0}else{if(M=Z[J],M!==this._wildcard_one&&M!==this._wildcard_some){if(H=X.get(M),H&&this._test(K,J+1,Z,H))return!0}if(M||this._match_empty_levels){if(H=X.get(this._wildcard_one),H&&this._test(K,J+1,Z,H))return!0}}return!1};b.prototype._match_some_iter=function*(K,J,Z,X){var M,H;for(H of Z.keys())if(H!==this._separator){for(M=K;M<J.length;M+=1)yield*this._match_iter(M,J,Z,X);break}};b.prototype._match_iter=function*(K,J,Z,X){var M,H;if(H=Z.get(this._wildcard_some),H)yield*this._match_some_iter(K,J,H,X),yield*this._match_iter(J.length,J,H,X);if(K===J.length){if(H=Z.get(this._separator),H)yield*this._iter_values(H,X)}else{if(M=J[K],M!==this._wildcard_one&&M!==this._wildcard_some){if(H=Z.get(M),H)yield*this._match_iter(K+1,J,H,X)}if(M||this._match_empty_levels){if(H=Z.get(this._wildcard_one),H)yield*this._match_iter(K+1,J,H,X)}}};b.prototype._split_words=function(K){let J=K.split(this._separator);if(J.length>this._max_words)throw new Error("too many words");return J};b.prototype._split=function(K,J){let Z;if(this._split_cache){if(Z=this._split_cache.get(K),Z===void 0){if(Z=this._split_words(K),this._split_cache.set(K,Z),this._split_cache.size>this._cache_splits)for(let X of this._split_cache.keys()){this._split_cache.delete(X);break}}}else Z=this._split_words(K);if(J&&Z.reduce((X,M)=>X+(M===this._wildcard_some),0)>this._max_wildcard_somes)throw new Error("too many wildcard somes");return Z};b.prototype.add=function(K,J){var Z=this._shortcuts&&this._shortcuts.get(K);if(Z)this._add_value(Z,J);else if(Z=this._add(J,0,this._split(K,!0),this._trie),this._shortcuts)this._shortcuts.set(K,Z);return this};b.prototype.remove=function(K,J){if(this._remove(J,0,this._split(K,!1),this._trie)&&this._shortcuts)this._shortcuts.delete(K);return this};b.prototype.match=function(K,J){return this._match2([],K,J)};b.prototype.match_iter=function(K,J){return this._match_iter(0,this._split(K,!1),this._trie,J)};b.prototype.test=function(K,J){return this._test(J,0,this._split(K,!1),this._trie)};b.prototype.test_values=function(K,J){return K.indexOf(J)>=0};b.prototype.clear=function(){if(this._trie.clear(),this._shortcuts)this._shortcuts.clear();if(this._split_cache)this._split_cache.clear();return this};b.prototype.get_trie=function(){return this._trie};b.prototype.visit=function*(){let K=[],J=this._trie.entries(),Z=0;while(!0){if(Z===0)yield{type:"start_entries"};let X=J.next();if(X.done){yield{type:"end_entries"};let Y=K.pop();if(Y===void 0)return;[J,Z]=Y;continue}let[M,H]=X.value;if(yield{type:"entry",key:M},++Z,M===this._separator){if(yield{type:"start_values"},H[Symbol.iterator])for(let Y of H)yield{type:"value",value:Y};else yield{type:"value",value:H};yield{type:"end_values"};continue}K.push([J,Z]),J=H.entries(),Z=0}};b.prototype.get_restorer=function(K){K=K||{};let J=[],Z=this._trie,X="";return(M)=>{switch(M.type){case"entry":if(Z=Z||new Map,J.push([Z,M.key,X]),Z=Z.get(M.key),K.cache_adds){if(X)X+=this._separator;X+=M.key}break;case"value":if(Z)this._add_value(Z,M.value);else Z=this._initial_value(M.value);break;case"end_entries":if(Z&&Z.size===0)Z=void 0;case"end_values":let H=J.pop();if(H===void 0)Z=void 0,X="";else{let[Y,U,G]=H;if(Z){if(K.cache_adds&&this._shortcuts&&M.type==="end_values")this._shortcuts.set(G,Z);Y.set(U,Z)}Z=Y,X=G}break}}};function R0(K){b.call(this,K)}n8.inherits(R0,b);R0.prototype._initial_value=function(K){return new Set().add(K)};R0.prototype._add_value=function(K,J){K.add(J)};R0.prototype._add_values=function(K,J){J.forEach(function(Z){K.add(Z)})};R0.prototype._remove_value=function(K,J){if(J===void 0)return!0;return K.delete(J),K.size===0};R0.prototype.test_values=function(K,J){return K.has(J)};R0.prototype.match=function(K,J){return this._match2(new Set,K,J)};function n0(K){b.call(this,K)}n8.inherits(n0,b);n0.prototype._initial_value=function(){return!0};n0.prototype._add_value=function(){};n0.prototype._remove_value=function(){return!0};n0.prototype._iter_values=function*(){yield!0};n0.prototype.test_values=function(){return!0};n0.prototype.match=function(K,J){return this.test(K,J)};var o8=S("stream");function G9(K){o8.Readable.call(this,{objectMode:!0}),this._iterator=K.visit()}n8.inherits(G9,o8.Readable);G9.prototype._read=function(){while(!0){let{done:K,value:J}=this._iterator.next();if(K){this.push(null);break}if(!this.push(J))break}};function z9(K){o8.Writable.call(this,{objectMode:!0}),this._restorer=K.get_restorer()}n8.inherits(z9,o8.Writable);z9.prototype._write=function(K,J,Z){this._restorer(K),Z()};var y6=null;function kz(K){if(K!==y6){let J=k6();b.nativeString=J(K.QlobberString,b),b.nativeNumber=J(K.QlobberNumber,b),R0.nativeString=J(K.QlobberDedupString,R0),R0.nativeNumber=J(K.QlobberDedupNumber,R0),n0.native=J(K.QlobberTrue,n0),y6=K}return h6}h6.Qlobber=b;h6.QlobberDedup=R0;h6.QlobberTrue=n0;h6.VisitorStream=G9;h6.RestorerStream=z9;h6.set_native=kz});var u6=O((tI,g6)=>{var{Qlobber:fz}=v6(),l1=S("assert"),cz=nK();function o0(K){if(!(this instanceof o0))return new o0(K);let J=this;K=K||{},K.matchEmptyLevels=K.matchEmptyLevels===void 0?!0:!!K.matchEmptyLevels,K.separator=K.separator||"/",K.wildcardOne=K.wildcardOne||"+",K.wildcardSome=K.wildcardSome||"#",this._messageQueue=[],this._messageCallbacks=[],this._parallel=cz({results:!1,released:Z}),this.concurrency=K.concurrency||0,this.current=0,this._doing=!1,this._matcher=new fz({match_empty_levels:K.matchEmptyLevels,separator:K.separator,wildcard_one:K.wildcardOne,wildcard_some:K.wildcardSome}),this.closed=!1,this._released=Z;function Z(){J.current--;let X=J._messageQueue.shift(),M=J._messageCallbacks.shift();if(X)J._do(X,M);else J._doing=!1}}Object.defineProperty(o0.prototype,"length",{get:function(){return this._messageQueue.length},enumerable:!0});o0.prototype.on=function K(J,Z,X){if(l1(J),l1(Z),this._matcher.add(J,Z),X)setImmediate(X);return this};o0.prototype.removeListener=function K(J,Z,X){l1(J),l1(Z);let M=this;return setImmediate(function(){if(M._matcher.remove(J,Z),X)X()}),this};o0.prototype.removeAllListeners=function K(J,Z){if(l1(J),this._matcher.remove(J),Z)setImmediate(Z);return this};o0.prototype.emit=function K(J,Z){if(l1(J),Z=Z||dz,this.closed)return Z(new Error("mqemitter is closed"));if(this.concurrency>0&&this.current>=this.concurrency){if(this._messageQueue.push(J),this._messageCallbacks.push(Z),!this._doing)process.emitWarning("MqEmitter leak detected",{detail:"For more info check: https://github.com/mcollina/mqemitter/pull/94"}),this._released()}else this._do(J,Z);return this};o0.prototype.close=function K(J){return this.closed=!0,setImmediate(J),this};o0.prototype._do=function(K,J){this._doing=!0;let Z=this._matcher.match(K.topic);return this.current++,this._parallel(this,Z,K,J),this};function dz(){}g6.exports=o0});var e=O((eI,m6)=>{m6.exports={ArrayIsArray(K){return Array.isArray(K)},ArrayPrototypeIncludes(K,J){return K.includes(J)},ArrayPrototypeIndexOf(K,J){return K.indexOf(J)},ArrayPrototypeJoin(K,J){return K.join(J)},ArrayPrototypeMap(K,J){return K.map(J)},ArrayPrototypePop(K,J){return K.pop(J)},ArrayPrototypePush(K,J){return K.push(J)},ArrayPrototypeSlice(K,J,Z){return K.slice(J,Z)},Error,FunctionPrototypeCall(K,J,...Z){return K.call(J,...Z)},FunctionPrototypeSymbolHasInstance(K,J){return Function.prototype[Symbol.hasInstance].call(K,J)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(K,J){return Object.defineProperties(K,J)},ObjectDefineProperty(K,J,Z){return Object.defineProperty(K,J,Z)},ObjectGetOwnPropertyDescriptor(K,J){return Object.getOwnPropertyDescriptor(K,J)},ObjectKeys(K){return Object.keys(K)},ObjectSetPrototypeOf(K,J){return Object.setPrototypeOf(K,J)},Promise,PromisePrototypeCatch(K,J){return K.catch(J)},PromisePrototypeThen(K,J,Z){return K.then(J,Z)},PromiseReject(K){return Promise.reject(K)},PromiseResolve(K){return Promise.resolve(K)},ReflectApply:Reflect.apply,RegExpPrototypeTest(K,J){return K.test(J)},SafeSet:Set,String,StringPrototypeSlice(K,J,Z){return K.slice(J,Z)},StringPrototypeToLowerCase(K){return K.toLowerCase()},StringPrototypeToUpperCase(K){return K.toUpperCase()},StringPrototypeTrim(K){return K.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(K,J,Z){return K.set(J,Z)},Boolean,Uint8Array}});var a6=O((r6,F8)=>{Object.defineProperty(r6,"__esModule",{value:!0});var l6=new WeakMap,q9=new WeakMap;function r(K){let J=l6.get(K);return console.assert(J!=null,"'this' is expected an Event object, but got",K),J}function f6(K){if(K.passiveListener!=null){if(typeof console!=="undefined"&&typeof console.error==="function")console.error("Unable to preventDefault inside passive event listener invocation.",K.passiveListener);return}if(!K.event.cancelable)return;if(K.canceled=!0,typeof K.event.preventDefault==="function")K.event.preventDefault()}function i1(K,J){l6.set(this,{eventTarget:K,event:J,eventPhase:2,currentTarget:K,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:J.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let Z=Object.keys(J);for(let X=0;X<Z.length;++X){let M=Z[X];if(!(M in this))Object.defineProperty(this,M,i6(M))}}i1.prototype={get type(){return r(this).event.type},get target(){return r(this).eventTarget},get currentTarget(){return r(this).currentTarget},composedPath(){let K=r(this).currentTarget;if(K==null)return[];return[K]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return r(this).eventPhase},stopPropagation(){let K=r(this);if(K.stopped=!0,typeof K.event.stopPropagation==="function")K.event.stopPropagation()},stopImmediatePropagation(){let K=r(this);if(K.stopped=!0,K.immediateStopped=!0,typeof K.event.stopImmediatePropagation==="function")K.event.stopImmediatePropagation()},get bubbles(){return Boolean(r(this).event.bubbles)},get cancelable(){return Boolean(r(this).event.cancelable)},preventDefault(){f6(r(this))},get defaultPrevented(){return r(this).canceled},get composed(){return Boolean(r(this).event.composed)},get timeStamp(){return r(this).timeStamp},get srcElement(){return r(this).eventTarget},get cancelBubble(){return r(this).stopped},set cancelBubble(K){if(!K)return;let J=r(this);if(J.stopped=!0,typeof J.event.cancelBubble==="boolean")J.event.cancelBubble=!0},get returnValue(){return!r(this).canceled},set returnValue(K){if(!K)f6(r(this))},initEvent(){}};Object.defineProperty(i1.prototype,"constructor",{value:i1,configurable:!0,writable:!0});if(typeof window!=="undefined"&&typeof window.Event!=="undefined")Object.setPrototypeOf(i1.prototype,window.Event.prototype),q9.set(window.Event.prototype,i1);function i6(K){return{get(){return r(this).event[K]},set(J){r(this).event[K]=J},configurable:!0,enumerable:!0}}function bz(K){return{value(){let J=r(this).event;return J[K].apply(J,arguments)},configurable:!0,enumerable:!0}}function pz(K,J){let Z=Object.keys(J);if(Z.length===0)return K;function X(M,H){K.call(this,M,H)}X.prototype=Object.create(K.prototype,{constructor:{value:X,configurable:!0,writable:!0}});for(let M=0;M<Z.length;++M){let H=Z[M];if(!(H in K.prototype)){let U=typeof Object.getOwnPropertyDescriptor(J,H).value==="function";Object.defineProperty(X.prototype,H,U?bz(H):i6(H))}}return X}function n6(K){if(K==null||K===Object.prototype)return i1;let J=q9.get(K);if(J==null)J=pz(n6(Object.getPrototypeOf(K)),K),q9.set(K,J);return J}function lz(K,J){return new(n6(Object.getPrototypeOf(J)))(K,J)}function iz(K){return r(K).immediateStopped}function nz(K,J){r(K).eventPhase=J}function oz(K,J){r(K).currentTarget=J}function c6(K,J){r(K).passiveListener=J}var o6=new WeakMap,d6=1,b6=2,r8=3;function a8(K){return K!==null&&typeof K==="object"}function P8(K){let J=o6.get(K);if(J==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return J}function rz(K){return{get(){let Z=P8(this).get(K);while(Z!=null){if(Z.listenerType===r8)return Z.listener;Z=Z.next}return null},set(J){if(typeof J!=="function"&&!a8(J))J=null;let Z=P8(this),X=null,M=Z.get(K);while(M!=null){if(M.listenerType===r8)if(X!==null)X.next=M.next;else if(M.next!==null)Z.set(K,M.next);else Z.delete(K);else X=M;M=M.next}if(J!==null){let H={listener:J,listenerType:r8,passive:!1,once:!1,next:null};if(X===null)Z.set(K,H);else X.next=H}},configurable:!0,enumerable:!0}}function $9(K,J){Object.defineProperty(K,`on${J}`,rz(J))}function p6(K){function J(){c0.call(this)}J.prototype=Object.create(c0.prototype,{constructor:{value:J,configurable:!0,writable:!0}});for(let Z=0;Z<K.length;++Z)$9(J.prototype,K[Z]);return J}function c0(){if(this instanceof c0){o6.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return p6(arguments[0]);if(arguments.length>0){let K=new Array(arguments.length);for(let J=0;J<arguments.length;++J)K[J]=arguments[J];return p6(K)}throw new TypeError("Cannot call a class as a function")}c0.prototype={addEventListener(K,J,Z){if(J==null)return;if(typeof J!=="function"&&!a8(J))throw new TypeError("'listener' should be a function or an object.");let X=P8(this),M=a8(Z),Y=(M?Boolean(Z.capture):Boolean(Z))?d6:b6,U={listener:J,listenerType:Y,passive:M&&Boolean(Z.passive),once:M&&Boolean(Z.once),next:null},G=X.get(K);if(G===void 0){X.set(K,U);return}let z=null;while(G!=null){if(G.listener===J&&G.listenerType===Y)return;z=G,G=G.next}z.next=U},removeEventListener(K,J,Z){if(J==null)return;let X=P8(this),H=(a8(Z)?Boolean(Z.capture):Boolean(Z))?d6:b6,Y=null,U=X.get(K);while(U!=null){if(U.listener===J&&U.listenerType===H){if(Y!==null)Y.next=U.next;else if(U.next!==null)X.set(K,U.next);else X.delete(K);return}Y=U,U=U.next}},dispatchEvent(K){if(K==null||typeof K.type!=="string")throw new TypeError('"event.type" should be a string.');let J=P8(this),Z=K.type,X=J.get(Z);if(X==null)return!0;let M=lz(this,K),H=null;while(X!=null){if(X.once)if(H!==null)H.next=X.next;else if(X.next!==null)J.set(Z,X.next);else J.delete(Z);else H=X;if(c6(M,X.passive?X.listener:null),typeof X.listener==="function")try{X.listener.call(this,M)}catch(Y){if(typeof console!=="undefined"&&typeof console.error==="function")console.error(Y)}else if(X.listenerType!==r8&&typeof X.listener.handleEvent==="function")X.listener.handleEvent(M);if(iz(M))break;X=X.next}return c6(M,null),nz(M,0),oz(M,null),!M.defaultPrevented}};Object.defineProperty(c0.prototype,"constructor",{value:c0,configurable:!0,writable:!0});if(typeof window!=="undefined"&&typeof window.EventTarget!=="undefined")Object.setPrototypeOf(c0.prototype,window.EventTarget.prototype);r6.defineEventAttribute=$9;r6.EventTarget=c0;r6.default=c0;F8.exports=c0;F8.exports.EventTarget=F8.exports.default=c0;F8.exports.defineEventAttribute=$9});var n1=O((e6,T8)=>{Object.defineProperty(e6,"__esModule",{value:!0});var Q9=a6();class A1 extends Q9.EventTarget{constructor(){super();throw new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let K=s8.get(this);if(typeof K!=="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return K}}Q9.defineEventAttribute(A1.prototype,"abort");function ez(){let K=Object.create(A1.prototype);return Q9.EventTarget.call(K),s8.set(K,!1),K}function K7(K){if(s8.get(K)!==!1)return;s8.set(K,!0),K.dispatchEvent({type:"abort"})}var s8=new WeakMap;Object.defineProperties(A1.prototype,{aborted:{enumerable:!0}});if(typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol")Object.defineProperty(A1.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class L1{constructor(){t6.set(this,ez())}get signal(){return s6(this)}abort(){K7(s6(this))}}var t6=new WeakMap;function s6(K){let J=t6.get(K);if(J==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${K===null?"null":typeof K}`);return J}Object.defineProperties(L1.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});if(typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol")Object.defineProperty(L1.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});e6.AbortController=L1;e6.AbortSignal=A1;e6.default=L1;T8.exports=L1;T8.exports.AbortController=T8.exports.default=L1;T8.exports.AbortSignal=A1});var W0=O((KO,V9)=>{var M7=S("buffer"),{kResistStopPropagation:H7,SymbolDispose:Y7}=e(),U7=globalThis.AbortSignal||n1().AbortSignal,G7=globalThis.AbortController||n1().AbortController,z7=Object.getPrototypeOf(async function(){}).constructor,KX=globalThis.Blob||M7.Blob,q7=typeof KX!=="undefined"?function K(J){return J instanceof KX}:function K(J){return!1},JX=(K,J)=>{if(K!==void 0&&(K===null||typeof K!=="object"||!("aborted"in K)))throw new ERR_INVALID_ARG_TYPE(J,"AbortSignal",K)},$7=(K,J)=>{if(typeof K!=="function")throw new ERR_INVALID_ARG_TYPE(J,"Function",K)};class ZX extends Error{constructor(K){if(!Array.isArray(K))throw new TypeError(`Expected input to be an Array, got ${typeof K}`);let J="";for(let Z=0;Z<K.length;Z++)J+=`    ${K[Z].stack}\n`;super(J);this.name="AggregateError",this.errors=K}}V9.exports={AggregateError:ZX,kEmptyObject:Object.freeze({}),once(K){let J=!1;return function(...Z){if(J)return;J=!0,K.apply(this,Z)}},createDeferredPromise:function(){let K,J;return{promise:new Promise((X,M)=>{K=X,J=M}),resolve:K,reject:J}},promisify(K){return new Promise((J,Z)=>{K((X,...M)=>{if(X)return Z(X);return J(...M)})})},debuglog(){return function(){}},format(K,...J){return K.replace(/%([sdifj])/g,function(...[Z,X]){let M=J.shift();if(X==="f")return M.toFixed(6);else if(X==="j")return JSON.stringify(M);else if(X==="s"&&typeof M==="object")return`${M.constructor!==Object?M.constructor.name:""} {}`.trim();else return M.toString()})},inspect(K){switch(typeof K){case"string":if(K.includes("'")){if(!K.includes('"'))return`"${K}"`;else if(!K.includes("`")&&!K.includes("${"))return`\`${K}\``}return`'${K}'`;case"number":if(isNaN(K))return"NaN";else if(Object.is(K,-0))return String(K);return K;case"bigint":return`${String(K)}n`;case"boolean":case"undefined":return String(K);case"object":return"{}"}},types:{isAsyncFunction(K){return K instanceof z7},isArrayBufferView(K){return ArrayBuffer.isView(K)}},isBlob:q7,deprecate(K,J){return K},addAbortListener:S("events").addAbortListener||function K(J,Z){if(J===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",J);JX(J,"signal"),$7(Z,"listener");let X;if(J.aborted)queueMicrotask(()=>Z());else J.addEventListener("abort",Z,{__proto__:null,once:!0,[H7]:!0}),X=()=>{J.removeEventListener("abort",Z)};return{__proto__:null,[Y7](){var M;(M=X)===null||M===void 0||M()}}},AbortSignalAny:U7.any||function K(J){if(J.length===1)return J[0];let Z=new G7,X=()=>Z.abort();return J.forEach((M)=>{JX(M,"signals"),M.addEventListener("abort",X,{once:!0})}),Z.signal.addEventListener("abort",()=>{J.forEach((M)=>M.removeEventListener("abort",X))},{once:!0}),Z.signal}};V9.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var I0=O((JO,YX)=>{var{format:Q7,inspect:t8,AggregateError:V7}=W0(),W7=globalThis.AggregateError||V7,P7=Symbol("kIsNodeError"),F7=["string","function","number","object","Function","Object","boolean","bigint","symbol"],T7=/^([A-Z][a-z0-9]*)+$/,e8={};function E1(K,J){if(!K)throw new e8.ERR_INTERNAL_ASSERTION(J)}function XX(K){let J="",Z=K.length,X=K[0]==="-"?1:0;for(;Z>=X+4;Z-=3)J=`_${K.slice(Z-3,Z)}${J}`;return`${K.slice(0,Z)}${J}`}function I7(K,J,Z){if(typeof J==="function")return E1(J.length<=Z.length,`Code: ${K}; The provided arguments length (${Z.length}) does not match the required ones (${J.length}).`),J(...Z);let X=(J.match(/%[dfijoOs]/g)||[]).length;if(E1(X===Z.length,`Code: ${K}; The provided arguments length (${Z.length}) does not match the required ones (${X}).`),Z.length===0)return J;return Q7(J,...Z)}function q0(K,J,Z){if(!Z)Z=Error;class X extends Z{constructor(...M){super(I7(K,J,M))}toString(){return`${this.name} [${K}]: ${this.message}`}}Object.defineProperties(X.prototype,{name:{value:Z.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${K}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),X.prototype.code=K,X.prototype[P7]=!0,e8[K]=X}function MX(K){let J="__node_internal_"+K.name;return Object.defineProperty(K,"name",{value:J}),K}function O7(K,J){if(K&&J&&K!==J){if(Array.isArray(J.errors))return J.errors.push(K),J;let Z=new W7([J,K],J.message);return Z.code=J.code,Z}return K||J}class HX extends Error{constructor(K="The operation was aborted",J=void 0){if(J!==void 0&&typeof J!=="object")throw new e8.ERR_INVALID_ARG_TYPE("options","Object",J);super(K,J);this.code="ABORT_ERR",this.name="AbortError"}}q0("ERR_ASSERTION","%s",Error);q0("ERR_INVALID_ARG_TYPE",(K,J,Z)=>{if(E1(typeof K==="string","'name' must be a string"),!Array.isArray(J))J=[J];let X="The ";if(K.endsWith(" argument"))X+=`${K} `;else X+=`"${K}" ${K.includes(".")?"property":"argument"} `;X+="must be ";let M=[],H=[],Y=[];for(let G of J)if(E1(typeof G==="string","All expected entries have to be of type string"),F7.includes(G))M.push(G.toLowerCase());else if(T7.test(G))H.push(G);else E1(G!=="object",'The value "object" should be written as "Object"'),Y.push(G);if(H.length>0){let G=M.indexOf("object");if(G!==-1)M.splice(M,G,1),H.push("Object")}if(M.length>0){switch(M.length){case 1:X+=`of type ${M[0]}`;break;case 2:X+=`one of type ${M[0]} or ${M[1]}`;break;default:{let G=M.pop();X+=`one of type ${M.join(", ")}, or ${G}`}}if(H.length>0||Y.length>0)X+=" or "}if(H.length>0){switch(H.length){case 1:X+=`an instance of ${H[0]}`;break;case 2:X+=`an instance of ${H[0]} or ${H[1]}`;break;default:{let G=H.pop();X+=`an instance of ${H.join(", ")}, or ${G}`}}if(Y.length>0)X+=" or "}switch(Y.length){case 0:break;case 1:if(Y[0].toLowerCase()!==Y[0])X+="an ";X+=`${Y[0]}`;break;case 2:X+=`one of ${Y[0]} or ${Y[1]}`;break;default:{let G=Y.pop();X+=`one of ${Y.join(", ")}, or ${G}`}}if(Z==null)X+=`. Received ${Z}`;else if(typeof Z==="function"&&Z.name)X+=`. Received function ${Z.name}`;else if(typeof Z==="object"){var U;if((U=Z.constructor)!==null&&U!==void 0&&U.name)X+=`. Received an instance of ${Z.constructor.name}`;else{let G=t8(Z,{depth:-1});X+=`. Received ${G}`}}else{let G=t8(Z,{colors:!1});if(G.length>25)G=`${G.slice(0,25)}...`;X+=`. Received type ${typeof Z} (${G})`}return X},TypeError);q0("ERR_INVALID_ARG_VALUE",(K,J,Z="is invalid")=>{let X=t8(J);if(X.length>128)X=X.slice(0,128)+"...";return`The ${K.includes(".")?"property":"argument"} '${K}' ${Z}. Received ${X}`},TypeError);q0("ERR_INVALID_RETURN_VALUE",(K,J,Z)=>{var X;let M=Z!==null&&Z!==void 0&&(X=Z.constructor)!==null&&X!==void 0&&X.name?`instance of ${Z.constructor.name}`:`type ${typeof Z}`;return`Expected ${K} to be returned from the "${J}" function but got ${M}.`},TypeError);q0("ERR_MISSING_ARGS",(...K)=>{E1(K.length>0,"At least one arg needs to be specified");let J,Z=K.length;switch(K=(Array.isArray(K)?K:[K]).map((X)=>`"${X}"`).join(" or "),Z){case 1:J+=`The ${K[0]} argument`;break;case 2:J+=`The ${K[0]} and ${K[1]} arguments`;break;default:{let X=K.pop();J+=`The ${K.join(", ")}, and ${X} arguments`}break}return`${J} must be specified`},TypeError);q0("ERR_OUT_OF_RANGE",(K,J,Z)=>{E1(J,'Missing "range" argument');let X;if(Number.isInteger(Z)&&Math.abs(Z)>4294967296)X=XX(String(Z));else if(typeof Z==="bigint"){if(X=String(Z),Z>2n**32n||Z<-(2n**32n))X=XX(X);X+="n"}else X=t8(Z);return`The value of "${K}" is out of range. It must be ${J}. Received ${X}`},RangeError);q0("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);q0("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);q0("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);q0("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);q0("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);q0("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);q0("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);q0("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);q0("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);q0("ERR_STREAM_WRITE_AFTER_END","write after end",Error);q0("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);YX.exports={AbortError:HX,aggregateTwoErrors:MX(O7),hideStackFrames:MX,codes:e8}});var r1=O((ZO,FX)=>{var{ArrayIsArray:P9,ArrayPrototypeIncludes:qX,ArrayPrototypeJoin:$X,ArrayPrototypeMap:N7,NumberIsInteger:F9,NumberIsNaN:C7,NumberMAX_SAFE_INTEGER:_7,NumberMIN_SAFE_INTEGER:A7,NumberParseInt:L7,ObjectPrototypeHasOwnProperty:E7,RegExpPrototypeExec:QX,String:D7,StringPrototypeToUpperCase:j7,StringPrototypeTrim:x7}=e(),{hideStackFrames:B0,codes:{ERR_SOCKET_BAD_PORT:R7,ERR_INVALID_ARG_TYPE:P0,ERR_INVALID_ARG_VALUE:o1,ERR_OUT_OF_RANGE:D1,ERR_UNKNOWN_SIGNAL:UX}}=I0(),{normalizeEncoding:B7}=W0(),{isAsyncFunction:w7,isArrayBufferView:S7}=W0().types,GX={};function k7(K){return K===(K|0)}function y7(K){return K===K>>>0}var h7=/^[0-7]+$/,v7="must be a 32-bit unsigned integer or an octal string";function g7(K,J,Z){if(typeof K==="undefined")K=Z;if(typeof K==="string"){if(QX(h7,K)===null)throw new o1(J,K,v7);K=L7(K,8)}return VX(K,J),K}var u7=B0((K,J,Z=A7,X=_7)=>{if(typeof K!=="number")throw new P0(J,"number",K);if(!F9(K))throw new D1(J,"an integer",K);if(K<Z||K>X)throw new D1(J,`>= ${Z} && <= ${X}`,K)}),m7=B0((K,J,Z=-2147483648,X=2147483647)=>{if(typeof K!=="number")throw new P0(J,"number",K);if(!F9(K))throw new D1(J,"an integer",K);if(K<Z||K>X)throw new D1(J,`>= ${Z} && <= ${X}`,K)}),VX=B0((K,J,Z=!1)=>{if(typeof K!=="number")throw new P0(J,"number",K);if(!F9(K))throw new D1(J,"an integer",K);let X=Z?1:0,M=4294967295;if(K<X||K>M)throw new D1(J,`>= ${X} && <= ${M}`,K)});function T9(K,J){if(typeof K!=="string")throw new P0(J,"string",K)}function f7(K,J,Z=void 0,X){if(typeof K!=="number")throw new P0(J,"number",K);if(Z!=null&&K<Z||X!=null&&K>X||(Z!=null||X!=null)&&C7(K))throw new D1(J,`${Z!=null?`>= ${Z}`:""}${Z!=null&&X!=null?" && ":""}${X!=null?`<= ${X}`:""}`,K)}var c7=B0((K,J,Z)=>{if(!qX(Z,K)){let M="must be one of: "+$X(N7(Z,(H)=>typeof H==="string"?`'${H}'`:D7(H)),", ");throw new o1(J,K,M)}});function WX(K,J){if(typeof K!=="boolean")throw new P0(J,"boolean",K)}function W9(K,J,Z){return K==null||!E7(K,J)?Z:K[J]}var d7=B0((K,J,Z=null)=>{let X=W9(Z,"allowArray",!1),M=W9(Z,"allowFunction",!1);if(!W9(Z,"nullable",!1)&&K===null||!X&&P9(K)||typeof K!=="object"&&(!M||typeof K!=="function"))throw new P0(J,"Object",K)}),b7=B0((K,J)=>{if(K!=null&&typeof K!=="object"&&typeof K!=="function")throw new P0(J,"a dictionary",K)}),KK=B0((K,J,Z=0)=>{if(!P9(K))throw new P0(J,"Array",K);if(K.length<Z){let X=`must be longer than ${Z}`;throw new o1(J,K,X)}});function p7(K,J){KK(K,J);for(let Z=0;Z<K.length;Z++)T9(K[Z],`${J}[${Z}]`)}function l7(K,J){KK(K,J);for(let Z=0;Z<K.length;Z++)WX(K[Z],`${J}[${Z}]`)}function i7(K,J){KK(K,J);for(let Z=0;Z<K.length;Z++){let X=K[Z],M=`${J}[${Z}]`;if(X==null)throw new P0(M,"AbortSignal",X);PX(X,M)}}function n7(K,J="signal"){if(T9(K,J),GX[K]===void 0){if(GX[j7(K)]!==void 0)throw new UX(K+" (signals must use all capital letters)");throw new UX(K)}}var o7=B0((K,J="buffer")=>{if(!S7(K))throw new P0(J,["Buffer","TypedArray","DataView"],K)});function r7(K,J){let Z=B7(J),X=K.length;if(Z==="hex"&&X%2!==0)throw new o1("encoding",J,`is invalid for data of length ${X}`)}function a7(K,J="Port",Z=!0){if(typeof K!=="number"&&typeof K!=="string"||typeof K==="string"&&x7(K).length===0||+K!==+K>>>0||K>65535||K===0&&!Z)throw new R7(J,K,Z);return K|0}var PX=B0((K,J)=>{if(K!==void 0&&(K===null||typeof K!=="object"||!("aborted"in K)))throw new P0(J,"AbortSignal",K)}),s7=B0((K,J)=>{if(typeof K!=="function")throw new P0(J,"Function",K)}),t7=B0((K,J)=>{if(typeof K!=="function"||w7(K))throw new P0(J,"Function",K)}),e7=B0((K,J)=>{if(K!==void 0)throw new P0(J,"undefined",K)});function Kq(K,J,Z){if(!qX(Z,K))throw new P0(J,`('${$X(Z,"|")}')`,K)}var Jq=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function zX(K,J){if(typeof K==="undefined"||!QX(Jq,K))throw new o1(J,K,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Zq(K){if(typeof K==="string")return zX(K,"hints"),K;else if(P9(K)){let J=K.length,Z="";if(J===0)return Z;for(let X=0;X<J;X++){let M=K[X];if(zX(M,"hints"),Z+=M,X!==J-1)Z+=", "}return Z}throw new o1("hints",K,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}FX.exports={isInt32:k7,isUint32:y7,parseFileMode:g7,validateArray:KK,validateStringArray:p7,validateBooleanArray:l7,validateAbortSignalArray:i7,validateBoolean:WX,validateBuffer:o7,validateDictionary:b7,validateEncoding:r7,validateFunction:s7,validateInt32:m7,validateInteger:u7,validateNumber:f7,validateObject:d7,validateOneOf:c7,validatePlainFunction:t7,validatePort:a7,validateSignalName:n7,validateString:T9,validateUint32:VX,validateUndefined:e7,validateUnion:Kq,validateAbortSignal:PX,validateLinkHeaderValue:Zq}});var P1=O((XO,TX)=>{TX.exports=global.process});var a0=O((MO,SX)=>{var{SymbolAsyncIterator:IX,SymbolIterator:OX,SymbolFor:j1}=e(),NX=j1("nodejs.stream.destroyed"),CX=j1("nodejs.stream.errored"),I9=j1("nodejs.stream.readable"),O9=j1("nodejs.stream.writable"),_X=j1("nodejs.stream.disturbed"),Xq=j1("nodejs.webstream.isClosedPromise"),Mq=j1("nodejs.webstream.controllerErrorFunction");function JK(K,J=!1){var Z;return!!(K&&typeof K.pipe==="function"&&typeof K.on==="function"&&(!J||typeof K.pause==="function"&&typeof K.resume==="function")&&(!K._writableState||((Z=K._readableState)===null||Z===void 0?void 0:Z.readable)!==!1)&&(!K._writableState||K._readableState))}function ZK(K){var J;return!!(K&&typeof K.write==="function"&&typeof K.on==="function"&&(!K._readableState||((J=K._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function Hq(K){return!!(K&&typeof K.pipe==="function"&&K._readableState&&typeof K.on==="function"&&typeof K.write==="function")}function r0(K){return K&&(K._readableState||K._writableState||typeof K.write==="function"&&typeof K.on==="function"||typeof K.pipe==="function"&&typeof K.on==="function")}function AX(K){return!!(K&&!r0(K)&&typeof K.pipeThrough==="function"&&typeof K.getReader==="function"&&typeof K.cancel==="function")}function LX(K){return!!(K&&!r0(K)&&typeof K.getWriter==="function"&&typeof K.abort==="function")}function EX(K){return!!(K&&!r0(K)&&typeof K.readable==="object"&&typeof K.writable==="object")}function Yq(K){return AX(K)||LX(K)||EX(K)}function Uq(K,J){if(K==null)return!1;if(J===!0)return typeof K[IX]==="function";if(J===!1)return typeof K[OX]==="function";return typeof K[IX]==="function"||typeof K[OX]==="function"}function XK(K){if(!r0(K))return null;let{_writableState:J,_readableState:Z}=K,X=J||Z;return!!(K.destroyed||K[NX]||X!==null&&X!==void 0&&X.destroyed)}function DX(K){if(!ZK(K))return null;if(K.writableEnded===!0)return!0;let J=K._writableState;if(J!==null&&J!==void 0&&J.errored)return!1;if(typeof(J===null||J===void 0?void 0:J.ended)!=="boolean")return null;return J.ended}function Gq(K,J){if(!ZK(K))return null;if(K.writableFinished===!0)return!0;let Z=K._writableState;if(Z!==null&&Z!==void 0&&Z.errored)return!1;if(typeof(Z===null||Z===void 0?void 0:Z.finished)!=="boolean")return null;return!!(Z.finished||J===!1&&Z.ended===!0&&Z.length===0)}function zq(K){if(!JK(K))return null;if(K.readableEnded===!0)return!0;let J=K._readableState;if(!J||J.errored)return!1;if(typeof(J===null||J===void 0?void 0:J.ended)!=="boolean")return null;return J.ended}function jX(K,J){if(!JK(K))return null;let Z=K._readableState;if(Z!==null&&Z!==void 0&&Z.errored)return!1;if(typeof(Z===null||Z===void 0?void 0:Z.endEmitted)!=="boolean")return null;return!!(Z.endEmitted||J===!1&&Z.ended===!0&&Z.length===0)}function xX(K){if(K&&K[I9]!=null)return K[I9];if(typeof(K===null||K===void 0?void 0:K.readable)!=="boolean")return null;if(XK(K))return!1;return JK(K)&&K.readable&&!jX(K)}function RX(K){if(K&&K[O9]!=null)return K[O9];if(typeof(K===null||K===void 0?void 0:K.writable)!=="boolean")return null;if(XK(K))return!1;return ZK(K)&&K.writable&&!DX(K)}function qq(K,J){if(!r0(K))return null;if(XK(K))return!0;if((J===null||J===void 0?void 0:J.readable)!==!1&&xX(K))return!1;if((J===null||J===void 0?void 0:J.writable)!==!1&&RX(K))return!1;return!0}function $q(K){var J,Z;if(!r0(K))return null;if(K.writableErrored)return K.writableErrored;return(J=(Z=K._writableState)===null||Z===void 0?void 0:Z.errored)!==null&&J!==void 0?J:null}function Qq(K){var J,Z;if(!r0(K))return null;if(K.readableErrored)return K.readableErrored;return(J=(Z=K._readableState)===null||Z===void 0?void 0:Z.errored)!==null&&J!==void 0?J:null}function Vq(K){if(!r0(K))return null;if(typeof K.closed==="boolean")return K.closed;let{_writableState:J,_readableState:Z}=K;if(typeof(J===null||J===void 0?void 0:J.closed)==="boolean"||typeof(Z===null||Z===void 0?void 0:Z.closed)==="boolean")return(J===null||J===void 0?void 0:J.closed)||(Z===null||Z===void 0?void 0:Z.closed);if(typeof K._closed==="boolean"&&BX(K))return K._closed;return null}function BX(K){return typeof K._closed==="boolean"&&typeof K._defaultKeepAlive==="boolean"&&typeof K._removedConnection==="boolean"&&typeof K._removedContLen==="boolean"}function wX(K){return typeof K._sent100==="boolean"&&BX(K)}function Wq(K){var J;return typeof K._consuming==="boolean"&&typeof K._dumped==="boolean"&&((J=K.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function Pq(K){if(!r0(K))return null;let{_writableState:J,_readableState:Z}=K,X=J||Z;return!X&&wX(K)||!!(X&&X.autoDestroy&&X.emitClose&&X.closed===!1)}function Fq(K){var J;return!!(K&&((J=K[_X])!==null&&J!==void 0?J:K.readableDidRead||K.readableAborted))}function Tq(K){var J,Z,X,M,H,Y,U,G,z,q;return!!(K&&((J=(Z=(X=(M=(H=(Y=K[CX])!==null&&Y!==void 0?Y:K.readableErrored)!==null&&H!==void 0?H:K.writableErrored)!==null&&M!==void 0?M:(U=K._readableState)===null||U===void 0?void 0:U.errorEmitted)!==null&&X!==void 0?X:(G=K._writableState)===null||G===void 0?void 0:G.errorEmitted)!==null&&Z!==void 0?Z:(z=K._readableState)===null||z===void 0?void 0:z.errored)!==null&&J!==void 0?J:(q=K._writableState)===null||q===void 0?void 0:q.errored))}SX.exports={isDestroyed:XK,kIsDestroyed:NX,isDisturbed:Fq,kIsDisturbed:_X,isErrored:Tq,kIsErrored:CX,isReadable:xX,kIsReadable:I9,kIsClosedPromise:Xq,kControllerErrorFunction:Mq,kIsWritable:O9,isClosed:Vq,isDuplexNodeStream:Hq,isFinished:qq,isIterable:Uq,isReadableNodeStream:JK,isReadableStream:AX,isReadableEnded:zq,isReadableFinished:jX,isReadableErrored:Qq,isNodeStream:r0,isWebStream:Yq,isWritable:RX,isWritableNodeStream:ZK,isWritableStream:LX,isWritableEnded:DX,isWritableFinished:Gq,isWritableErrored:$q,isServerRequest:Wq,isServerResponse:wX,willEmitClose:Pq,isTransformStream:EX}});var U1=O((HO,L9)=>{var F1=P1(),{AbortError:cX,codes:Iq}=I0(),{ERR_INVALID_ARG_TYPE:Oq,ERR_STREAM_PREMATURE_CLOSE:kX}=Iq,{kEmptyObject:C9,once:_9}=W0(),{validateAbortSignal:Nq,validateFunction:Cq,validateObject:_q,validateBoolean:Aq}=r1(),{Promise:Lq,PromisePrototypeThen:Eq,SymbolDispose:dX}=e(),{isClosed:Dq,isReadable:yX,isReadableNodeStream:N9,isReadableStream:jq,isReadableFinished:hX,isReadableErrored:vX,isWritable:gX,isWritableNodeStream:uX,isWritableStream:xq,isWritableFinished:mX,isWritableErrored:fX,isNodeStream:Rq,willEmitClose:Bq,kIsClosedPromise:wq}=a0(),a1;function Sq(K){return K.setHeader&&typeof K.abort==="function"}var A9=()=>{};function bX(K,J,Z){var X,M;if(arguments.length===2)Z=J,J=C9;else if(J==null)J=C9;else _q(J,"options");if(Cq(Z,"callback"),Nq(J.signal,"options.signal"),Z=_9(Z),jq(K)||xq(K))return kq(K,J,Z);if(!Rq(K))throw new Oq("stream",["ReadableStream","WritableStream","Stream"],K);let H=(X=J.readable)!==null&&X!==void 0?X:N9(K),Y=(M=J.writable)!==null&&M!==void 0?M:uX(K),U=K._writableState,G=K._readableState,z=()=>{if(!K.writable)V()},q=Bq(K)&&N9(K)===H&&uX(K)===Y,$=mX(K,!1),V=()=>{if($=!0,K.destroyed)q=!1;if(q&&(!K.readable||H))return;if(!H||W)Z.call(K)},W=hX(K,!1),x=()=>{if(W=!0,K.destroyed)q=!1;if(q&&(!K.writable||Y))return;if(!Y||$)Z.call(K)},_=(t)=>{Z.call(K,t)},j=Dq(K),A=()=>{j=!0;let t=fX(K)||vX(K);if(t&&typeof t!=="boolean")return Z.call(K,t);if(H&&!W&&N9(K,!0)){if(!hX(K,!1))return Z.call(K,new kX)}if(Y&&!$){if(!mX(K,!1))return Z.call(K,new kX)}Z.call(K)},B=()=>{j=!0;let t=fX(K)||vX(K);if(t&&typeof t!=="boolean")return Z.call(K,t);Z.call(K)},p=()=>{K.req.on("finish",V)};if(Sq(K)){if(K.on("complete",V),!q)K.on("abort",A);if(K.req)p();else K.on("request",p)}else if(Y&&!U)K.on("end",z),K.on("close",z);if(!q&&typeof K.aborted==="boolean")K.on("aborted",A);if(K.on("end",x),K.on("finish",V),J.error!==!1)K.on("error",_);if(K.on("close",A),j)F1.nextTick(A);else if(U!==null&&U!==void 0&&U.errorEmitted||G!==null&&G!==void 0&&G.errorEmitted){if(!q)F1.nextTick(B)}else if(!H&&(!q||yX(K))&&($||gX(K)===!1))F1.nextTick(B);else if(!Y&&(!q||gX(K))&&(W||yX(K)===!1))F1.nextTick(B);else if(G&&K.req&&K.aborted)F1.nextTick(B);let v=()=>{if(Z=A9,K.removeListener("aborted",A),K.removeListener("complete",V),K.removeListener("abort",A),K.removeListener("request",p),K.req)K.req.removeListener("finish",V);K.removeListener("end",z),K.removeListener("close",z),K.removeListener("finish",V),K.removeListener("end",x),K.removeListener("error",_),K.removeListener("close",A)};if(J.signal&&!j){let t=()=>{let L0=Z;v(),L0.call(K,new cX(void 0,{cause:J.signal.reason}))};if(J.signal.aborted)F1.nextTick(t);else{a1=a1||W0().addAbortListener;let L0=a1(J.signal,t),U0=Z;Z=_9((...g0)=>{L0[dX](),U0.apply(K,g0)})}}return v}function kq(K,J,Z){let X=!1,M=A9;if(J.signal)if(M=()=>{X=!0,Z.call(K,new cX(void 0,{cause:J.signal.reason}))},J.signal.aborted)F1.nextTick(M);else{a1=a1||W0().addAbortListener;let Y=a1(J.signal,M),U=Z;Z=_9((...G)=>{Y[dX](),U.apply(K,G)})}let H=(...Y)=>{if(!X)F1.nextTick(()=>Z.apply(K,Y))};return Eq(K[wq].promise,H,H),A9}function yq(K,J){var Z;let X=!1;if(J===null)J=C9;if((Z=J)!==null&&Z!==void 0&&Z.cleanup)Aq(J.cleanup,"cleanup"),X=J.cleanup;return new Lq((M,H)=>{let Y=bX(K,J,(U)=>{if(X)Y();if(U)H(U);else M()})})}L9.exports=bX;L9.exports.finished=yq});var x1=O((YO,sX)=>{var s0=P1(),{aggregateTwoErrors:hq,codes:{ERR_MULTIPLE_CALLBACK:vq},AbortError:gq}=I0(),{Symbol:iX}=e(),{kIsDestroyed:uq,isDestroyed:mq,isFinished:fq,isServerRequest:cq}=a0(),nX=iX("kDestroy"),E9=iX("kConstruct");function oX(K,J,Z){if(K){if(K.stack,J&&!J.errored)J.errored=K;if(Z&&!Z.errored)Z.errored=K}}function dq(K,J){let Z=this._readableState,X=this._writableState,M=X||Z;if(X!==null&&X!==void 0&&X.destroyed||Z!==null&&Z!==void 0&&Z.destroyed){if(typeof J==="function")J();return this}if(oX(K,X,Z),X)X.destroyed=!0;if(Z)Z.destroyed=!0;if(!M.constructed)this.once(nX,function(H){pX(this,hq(H,K),J)});else pX(this,K,J);return this}function pX(K,J,Z){let X=!1;function M(H){if(X)return;X=!0;let{_readableState:Y,_writableState:U}=K;if(oX(H,U,Y),U)U.closed=!0;if(Y)Y.closed=!0;if(typeof Z==="function")Z(H);if(H)s0.nextTick(bq,K,H);else s0.nextTick(rX,K)}try{K._destroy(J||null,M)}catch(H){M(H)}}function bq(K,J){D9(K,J),rX(K)}function rX(K){let{_readableState:J,_writableState:Z}=K;if(Z)Z.closeEmitted=!0;if(J)J.closeEmitted=!0;if(Z!==null&&Z!==void 0&&Z.emitClose||J!==null&&J!==void 0&&J.emitClose)K.emit("close")}function D9(K,J){let{_readableState:Z,_writableState:X}=K;if(X!==null&&X!==void 0&&X.errorEmitted||Z!==null&&Z!==void 0&&Z.errorEmitted)return;if(X)X.errorEmitted=!0;if(Z)Z.errorEmitted=!0;K.emit("error",J)}function pq(){let K=this._readableState,J=this._writableState;if(K)K.constructed=!0,K.closed=!1,K.closeEmitted=!1,K.destroyed=!1,K.errored=null,K.errorEmitted=!1,K.reading=!1,K.ended=K.readable===!1,K.endEmitted=K.readable===!1;if(J)J.constructed=!0,J.destroyed=!1,J.closed=!1,J.closeEmitted=!1,J.errored=null,J.errorEmitted=!1,J.finalCalled=!1,J.prefinished=!1,J.ended=J.writable===!1,J.ending=J.writable===!1,J.finished=J.writable===!1}function j9(K,J,Z){let{_readableState:X,_writableState:M}=K;if(M!==null&&M!==void 0&&M.destroyed||X!==null&&X!==void 0&&X.destroyed)return this;if(X!==null&&X!==void 0&&X.autoDestroy||M!==null&&M!==void 0&&M.autoDestroy)K.destroy(J);else if(J){if(J.stack,M&&!M.errored)M.errored=J;if(X&&!X.errored)X.errored=J;if(Z)s0.nextTick(D9,K,J);else D9(K,J)}}function lq(K,J){if(typeof K._construct!=="function")return;let{_readableState:Z,_writableState:X}=K;if(Z)Z.constructed=!1;if(X)X.constructed=!1;if(K.once(E9,J),K.listenerCount(E9)>1)return;s0.nextTick(iq,K)}function iq(K){let J=!1;function Z(X){if(J){j9(K,X!==null&&X!==void 0?X:new vq);return}J=!0;let{_readableState:M,_writableState:H}=K,Y=H||M;if(M)M.constructed=!0;if(H)H.constructed=!0;if(Y.destroyed)K.emit(nX,X);else if(X)j9(K,X,!0);else s0.nextTick(nq,K)}try{K._construct((X)=>{s0.nextTick(Z,X)})}catch(X){s0.nextTick(Z,X)}}function nq(K){K.emit(E9)}function lX(K){return(K===null||K===void 0?void 0:K.setHeader)&&typeof K.abort==="function"}function aX(K){K.emit("close")}function oq(K,J){K.emit("error",J),s0.nextTick(aX,K)}function rq(K,J){if(!K||mq(K))return;if(!J&&!fq(K))J=new gq;if(cq(K))K.socket=null,K.destroy(J);else if(lX(K))K.abort();else if(lX(K.req))K.req.abort();else if(typeof K.destroy==="function")K.destroy(J);else if(typeof K.close==="function")K.close();else if(J)s0.nextTick(oq,K,J);else s0.nextTick(aX,K);if(!K.destroyed)K[uq]=!0}sX.exports={construct:lq,destroyer:rq,destroy:dq,undestroy:pq,errorOrDestroy:j9}});var YK=O((UO,eX)=>{var{ArrayIsArray:aq,ObjectSetPrototypeOf:tX}=e(),{EventEmitter:MK}=S("events");function HK(K){MK.call(this,K)}tX(HK.prototype,MK.prototype);tX(HK,MK);HK.prototype.pipe=function(K,J){let Z=this;function X(q){if(K.writable&&K.write(q)===!1&&Z.pause)Z.pause()}Z.on("data",X);function M(){if(Z.readable&&Z.resume)Z.resume()}if(K.on("drain",M),!K._isStdio&&(!J||J.end!==!1))Z.on("end",Y),Z.on("close",U);let H=!1;function Y(){if(H)return;H=!0,K.end()}function U(){if(H)return;if(H=!0,typeof K.destroy==="function")K.destroy()}function G(q){if(z(),MK.listenerCount(this,"error")===0)this.emit("error",q)}x9(Z,"error",G),x9(K,"error",G);function z(){Z.removeListener("data",X),K.removeListener("drain",M),Z.removeListener("end",Y),Z.removeListener("close",U),Z.removeListener("error",G),K.removeListener("error",G),Z.removeListener("end",z),Z.removeListener("close",z),K.removeListener("close",z)}return Z.on("end",z),Z.on("close",z),K.on("close",z),K.emit("pipe",Z),K};function x9(K,J,Z){if(typeof K.prependListener==="function")return K.prependListener(J,Z);if(!K._events||!K._events[J])K.on(J,Z);else if(aq(K._events[J]))K._events[J].unshift(Z);else K._events[J]=[Z,K._events[J]]}eX.exports={Stream:HK,prependListener:x9}});var I8=O((X$,UK)=>{var{SymbolDispose:sq}=e(),{AbortError:K4,codes:tq}=I0(),{isNodeStream:J4,isWebStream:eq,kControllerErrorFunction:K$}=a0(),J$=U1(),{ERR_INVALID_ARG_TYPE:Z4}=tq,R9,Z$=(K,J)=>{if(typeof K!=="object"||!("aborted"in K))throw new Z4(J,"AbortSignal",K)};X$.addAbortSignal=function K(J,Z){if(Z$(J,"signal"),!J4(Z)&&!eq(Z))throw new Z4("stream",["ReadableStream","WritableStream","Stream"],Z);return X$.addAbortSignalNoValidate(J,Z)};X$.addAbortSignalNoValidate=function(K,J){if(typeof K!=="object"||!("aborted"in K))return J;let Z=J4(J)?()=>{J.destroy(new K4(void 0,{cause:K.reason}))}:()=>{J[K$](new K4(void 0,{cause:K.reason}))};if(K.aborted)Z();else{R9=R9||W0().addAbortListener;let X=R9(K,Z);J$(J,X[sq])}return J}});var H4=O((GO,M4)=>{var{StringPrototypeSlice:X4,SymbolIterator:Y$,TypedArrayPrototypeSet:GK,Uint8Array:U$}=e(),{Buffer:B9}=S("buffer"),{inspect:G$}=W0();M4.exports=class K{constructor(){this.head=null,this.tail=null,this.length=0}push(J){let Z={data:J,next:null};if(this.length>0)this.tail.next=Z;else this.head=Z;this.tail=Z,++this.length}unshift(J){let Z={data:J,next:this.head};if(this.length===0)this.tail=Z;this.head=Z,++this.length}shift(){if(this.length===0)return;let J=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;return--this.length,J}clear(){this.head=this.tail=null,this.length=0}join(J){if(this.length===0)return"";let Z=this.head,X=""+Z.data;while((Z=Z.next)!==null)X+=J+Z.data;return X}concat(J){if(this.length===0)return B9.alloc(0);let Z=B9.allocUnsafe(J>>>0),X=this.head,M=0;while(X)GK(Z,X.data,M),M+=X.data.length,X=X.next;return Z}consume(J,Z){let X=this.head.data;if(J<X.length){let M=X.slice(0,J);return this.head.data=X.slice(J),M}if(J===X.length)return this.shift();return Z?this._getString(J):this._getBuffer(J)}first(){return this.head.data}*[Y$](){for(let J=this.head;J;J=J.next)yield J.data}_getString(J){let Z="",X=this.head,M=0;do{let H=X.data;if(J>H.length)Z+=H,J-=H.length;else{if(J===H.length)if(Z+=H,++M,X.next)this.head=X.next;else this.head=this.tail=null;else Z+=X4(H,0,J),this.head=X,X.data=X4(H,J);break}++M}while((X=X.next)!==null);return this.length-=M,Z}_getBuffer(J){let Z=B9.allocUnsafe(J),X=J,M=this.head,H=0;do{let Y=M.data;if(J>Y.length)GK(Z,Y,X-J),J-=Y.length;else{if(J===Y.length)if(GK(Z,Y,X-J),++H,M.next)this.head=M.next;else this.head=this.tail=null;else GK(Z,new U$(Y.buffer,Y.byteOffset,J),X-J),this.head=M,M.data=Y.slice(J);break}++H}while((M=M.next)!==null);return this.length-=H,Z}[Symbol.for("nodejs.util.inspect.custom")](J,Z){return G$(this,{...Z,depth:0,customInspect:!1})}}});var O8=O((zO,z4)=>{var{MathFloor:z$,NumberIsInteger:q$}=e(),{validateInteger:$$}=r1(),{ERR_INVALID_ARG_VALUE:Q$}=I0().codes,Y4=16384,U4=16;function V$(K,J,Z){return K.highWaterMark!=null?K.highWaterMark:J?K[Z]:null}function G4(K){return K?U4:Y4}function W$(K,J){if($$(J,"value",0),K)U4=J;else Y4=J}function P$(K,J,Z,X){let M=V$(J,X,Z);if(M!=null){if(!q$(M)||M<0){let H=X?`options.${Z}`:"options.highWaterMark";throw new Q$(H,M)}return z$(M)}return G4(K.objectMode)}z4.exports={getHighWaterMark:P$,getDefaultHighWaterMark:G4,setDefaultHighWaterMark:W$}});var w9=O((qO,V4)=>{var q4=P1(),{PromisePrototypeThen:F$,SymbolAsyncIterator:$4,SymbolIterator:Q4}=e(),{Buffer:T$}=S("buffer"),{ERR_INVALID_ARG_TYPE:I$,ERR_STREAM_NULL_VALUES:O$}=I0().codes;function N$(K,J,Z){let X;if(typeof J==="string"||J instanceof T$)return new K({objectMode:!0,...Z,read(){this.push(J),this.push(null)}});let M;if(J&&J[$4])M=!0,X=J[$4]();else if(J&&J[Q4])M=!1,X=J[Q4]();else throw new I$("iterable",["Iterable"],J);let H=new K({objectMode:!0,highWaterMark:1,...Z}),Y=!1;H._read=function(){if(!Y)Y=!0,G()},H._destroy=function(z,q){F$(U(z),()=>q4.nextTick(q,z),($)=>q4.nextTick(q,$||z))};async function U(z){let q=z!==void 0&&z!==null,$=typeof X.throw==="function";if(q&&$){let{value:V,done:W}=await X.throw(z);if(await V,W)return}if(typeof X.return==="function"){let{value:V}=await X.return();await V}}async function G(){for(;;){try{let{value:z,done:q}=M?await X.next():X.next();if(q)H.push(null);else{let $=z&&typeof z.then==="function"?await z:z;if($===null)throw Y=!1,new O$;else if(H.push($))continue;else Y=!1}}catch(z){H.destroy(z)}break}}return H}V4.exports=N$});var C8=O(($O,w4)=>{var d0=P1(),{ArrayPrototypeIndexOf:C$,NumberIsInteger:_$,NumberIsNaN:A$,NumberParseInt:L$,ObjectDefineProperties:m9,ObjectKeys:E$,ObjectSetPrototypeOf:F4,Promise:T4,SafeSet:D$,SymbolAsyncDispose:j$,SymbolAsyncIterator:x$,Symbol:R$}=e();w4.exports=g;g.ReadableState=QK;var{EventEmitter:B$}=S("events"),{Stream:T1,prependListener:w$}=YK(),{Buffer:S9}=S("buffer"),{addAbortSignal:S$}=I8(),I4=U1(),f=W0().debuglog("stream",(K)=>{f=K}),k$=H4(),e1=x1(),{getHighWaterMark:y$,getDefaultHighWaterMark:h$}=O8(),{aggregateTwoErrors:W4,codes:{ERR_INVALID_ARG_TYPE:v$,ERR_METHOD_NOT_IMPLEMENTED:g$,ERR_OUT_OF_RANGE:u$,ERR_STREAM_PUSH_AFTER_EOF:m$,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:f$},AbortError:c$}=I0(),{validateObject:d$}=r1(),R1=R$("kPaused"),{StringDecoder:O4}=S("string_decoder"),b$=w9();F4(g.prototype,T1.prototype);F4(g,T1);var k9=()=>{},{errorOrDestroy:s1}=e1,t1=1,p$=2,N4=4,N8=8,C4=16,zK=32,qK=64,_4=128,l$=256,i$=512,n$=1024,g9=2048,u9=4096,o$=8192,r$=16384,a$=32768,A4=65536,s$=131072,t$=262144;function Z0(K){return{enumerable:!1,get(){return(this.state&K)!==0},set(J){if(J)this.state|=K;else this.state&=~K}}}m9(QK.prototype,{objectMode:Z0(t1),ended:Z0(p$),endEmitted:Z0(N4),reading:Z0(N8),constructed:Z0(C4),sync:Z0(zK),needReadable:Z0(qK),emittedReadable:Z0(_4),readableListening:Z0(l$),resumeScheduled:Z0(i$),errorEmitted:Z0(n$),emitClose:Z0(g9),autoDestroy:Z0(u9),destroyed:Z0(o$),closed:Z0(r$),closeEmitted:Z0(a$),multiAwaitDrain:Z0(A4),readingMore:Z0(s$),dataEmitted:Z0(t$)});function QK(K,J,Z){if(typeof Z!=="boolean")Z=J instanceof t0();if(this.state=g9|u9|C4|zK,K&&K.objectMode)this.state|=t1;if(Z&&K&&K.readableObjectMode)this.state|=t1;if(this.highWaterMark=K?y$(this,K,"readableHighWaterMark",Z):h$(!1),this.buffer=new k$,this.length=0,this.pipes=[],this.flowing=null,this[R1]=null,K&&K.emitClose===!1)this.state&=~g9;if(K&&K.autoDestroy===!1)this.state&=~u9;if(this.errored=null,this.defaultEncoding=K&&K.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,K&&K.encoding)this.decoder=new O4(K.encoding),this.encoding=K.encoding}function g(K){if(!(this instanceof g))return new g(K);let J=this instanceof t0();if(this._readableState=new QK(K,this,J),K){if(typeof K.read==="function")this._read=K.read;if(typeof K.destroy==="function")this._destroy=K.destroy;if(typeof K.construct==="function")this._construct=K.construct;if(K.signal&&!J)S$(K.signal,this)}T1.call(this,K),e1.construct(this,()=>{if(this._readableState.needReadable)$K(this,this._readableState)})}g.prototype.destroy=e1.destroy;g.prototype._undestroy=e1.undestroy;g.prototype._destroy=function(K,J){J(K)};g.prototype[B$.captureRejectionSymbol]=function(K){this.destroy(K)};g.prototype[j$]=function(){let K;if(!this.destroyed)K=this.readableEnded?null:new c$,this.destroy(K);return new T4((J,Z)=>I4(this,(X)=>X&&X!==K?Z(X):J(null)))};g.prototype.push=function(K,J){return L4(this,K,J,!1)};g.prototype.unshift=function(K,J){return L4(this,K,J,!0)};function L4(K,J,Z,X){f("readableAddChunk",J);let M=K._readableState,H;if((M.state&t1)===0){if(typeof J==="string"){if(Z=Z||M.defaultEncoding,M.encoding!==Z)if(X&&M.encoding)J=S9.from(J,Z).toString(M.encoding);else J=S9.from(J,Z),Z=""}else if(J instanceof S9)Z="";else if(T1._isUint8Array(J))J=T1._uint8ArrayToBuffer(J),Z="";else if(J!=null)H=new v$("chunk",["string","Buffer","Uint8Array"],J)}if(H)s1(K,H);else if(J===null)M.state&=~N8,JQ(K,M);else if((M.state&t1)!==0||J&&J.length>0)if(X)if((M.state&N4)!==0)s1(K,new f$);else if(M.destroyed||M.errored)return!1;else y9(K,M,J,!0);else if(M.ended)s1(K,new m$);else if(M.destroyed||M.errored)return!1;else if(M.state&=~N8,M.decoder&&!Z)if(J=M.decoder.write(J),M.objectMode||J.length!==0)y9(K,M,J,!1);else $K(K,M);else y9(K,M,J,!1);else if(!X)M.state&=~N8,$K(K,M);return!M.ended&&(M.length<M.highWaterMark||M.length===0)}function y9(K,J,Z,X){if(J.flowing&&J.length===0&&!J.sync&&K.listenerCount("data")>0){if((J.state&A4)!==0)J.awaitDrainWriters.clear();else J.awaitDrainWriters=null;J.dataEmitted=!0,K.emit("data",Z)}else{if(J.length+=J.objectMode?1:Z.length,X)J.buffer.unshift(Z);else J.buffer.push(Z);if((J.state&qK)!==0)VK(K)}$K(K,J)}g.prototype.isPaused=function(){let K=this._readableState;return K[R1]===!0||K.flowing===!1};g.prototype.setEncoding=function(K){let J=new O4(K);this._readableState.decoder=J,this._readableState.encoding=this._readableState.decoder.encoding;let Z=this._readableState.buffer,X="";for(let M of Z)X+=J.write(M);if(Z.clear(),X!=="")Z.push(X);return this._readableState.length=X.length,this};var e$=1073741824;function KQ(K){if(K>e$)throw new u$("size","<= 1GiB",K);else K--,K|=K>>>1,K|=K>>>2,K|=K>>>4,K|=K>>>8,K|=K>>>16,K++;return K}function P4(K,J){if(K<=0||J.length===0&&J.ended)return 0;if((J.state&t1)!==0)return 1;if(A$(K)){if(J.flowing&&J.length)return J.buffer.first().length;return J.length}if(K<=J.length)return K;return J.ended?J.length:0}g.prototype.read=function(K){if(f("read",K),K===void 0)K=NaN;else if(!_$(K))K=L$(K,10);let J=this._readableState,Z=K;if(K>J.highWaterMark)J.highWaterMark=KQ(K);if(K!==0)J.state&=~_4;if(K===0&&J.needReadable&&((J.highWaterMark!==0?J.length>=J.highWaterMark:J.length>0)||J.ended)){if(f("read: emitReadable",J.length,J.ended),J.length===0&&J.ended)h9(this);else VK(this);return null}if(K=P4(K,J),K===0&&J.ended){if(J.length===0)h9(this);return null}let X=(J.state&qK)!==0;if(f("need readable",X),J.length===0||J.length-K<J.highWaterMark)X=!0,f("length less than watermark",X);if(J.ended||J.reading||J.destroyed||J.errored||!J.constructed)X=!1,f("reading, ended or constructing",X);else if(X){if(f("do read"),J.state|=N8|zK,J.length===0)J.state|=qK;try{this._read(J.highWaterMark)}catch(H){s1(this,H)}if(J.state&=~zK,!J.reading)K=P4(Z,J)}let M;if(K>0)M=R4(K,J);else M=null;if(M===null)J.needReadable=J.length<=J.highWaterMark,K=0;else if(J.length-=K,J.multiAwaitDrain)J.awaitDrainWriters.clear();else J.awaitDrainWriters=null;if(J.length===0){if(!J.ended)J.needReadable=!0;if(Z!==K&&J.ended)h9(this)}if(M!==null&&!J.errorEmitted&&!J.closeEmitted)J.dataEmitted=!0,this.emit("data",M);return M};function JQ(K,J){if(f("onEofChunk"),J.ended)return;if(J.decoder){let Z=J.decoder.end();if(Z&&Z.length)J.buffer.push(Z),J.length+=J.objectMode?1:Z.length}if(J.ended=!0,J.sync)VK(K);else J.needReadable=!1,J.emittedReadable=!0,E4(K)}function VK(K){let J=K._readableState;if(f("emitReadable",J.needReadable,J.emittedReadable),J.needReadable=!1,!J.emittedReadable)f("emitReadable",J.flowing),J.emittedReadable=!0,d0.nextTick(E4,K)}function E4(K){let J=K._readableState;if(f("emitReadable_",J.destroyed,J.length,J.ended),!J.destroyed&&!J.errored&&(J.length||J.ended))K.emit("readable"),J.emittedReadable=!1;J.needReadable=!J.flowing&&!J.ended&&J.length<=J.highWaterMark,j4(K)}function $K(K,J){if(!J.readingMore&&J.constructed)J.readingMore=!0,d0.nextTick(ZQ,K,J)}function ZQ(K,J){while(!J.reading&&!J.ended&&(J.length<J.highWaterMark||J.flowing&&J.length===0)){let Z=J.length;if(f("maybeReadMore read 0"),K.read(0),Z===J.length)break}J.readingMore=!1}g.prototype._read=function(K){throw new g$("_read()")};g.prototype.pipe=function(K,J){let Z=this,X=this._readableState;if(X.pipes.length===1){if(!X.multiAwaitDrain)X.multiAwaitDrain=!0,X.awaitDrainWriters=new D$(X.awaitDrainWriters?[X.awaitDrainWriters]:[])}X.pipes.push(K),f("pipe count=%d opts=%j",X.pipes.length,J);let H=(!J||J.end!==!1)&&K!==d0.stdout&&K!==d0.stderr?U:j;if(X.endEmitted)d0.nextTick(H);else Z.once("end",H);K.on("unpipe",Y);function Y(A,B){if(f("onunpipe"),A===Z){if(B&&B.hasUnpiped===!1)B.hasUnpiped=!0,q()}}function U(){f("onend"),K.end()}let G,z=!1;function q(){if(f("cleanup"),K.removeListener("close",x),K.removeListener("finish",_),G)K.removeListener("drain",G);if(K.removeListener("error",W),K.removeListener("unpipe",Y),Z.removeListener("end",U),Z.removeListener("end",j),Z.removeListener("data",V),z=!0,G&&X.awaitDrainWriters&&(!K._writableState||K._writableState.needDrain))G()}function $(){if(!z){if(X.pipes.length===1&&X.pipes[0]===K)f("false write response, pause",0),X.awaitDrainWriters=K,X.multiAwaitDrain=!1;else if(X.pipes.length>1&&X.pipes.includes(K))f("false write response, pause",X.awaitDrainWriters.size),X.awaitDrainWriters.add(K);Z.pause()}if(!G)G=XQ(Z,K),K.on("drain",G)}Z.on("data",V);function V(A){f("ondata");let B=K.write(A);if(f("dest.write",B),B===!1)$()}function W(A){if(f("onerror",A),j(),K.removeListener("error",W),K.listenerCount("error")===0){let B=K._writableState||K._readableState;if(B&&!B.errorEmitted)s1(K,A);else K.emit("error",A)}}w$(K,"error",W);function x(){K.removeListener("finish",_),j()}K.once("close",x);function _(){f("onfinish"),K.removeListener("close",x),j()}K.once("finish",_);function j(){f("unpipe"),Z.unpipe(K)}if(K.emit("pipe",Z),K.writableNeedDrain===!0)$();else if(!X.flowing)f("pipe resume"),Z.resume();return K};function XQ(K,J){return function Z(){let X=K._readableState;if(X.awaitDrainWriters===J)f("pipeOnDrain",1),X.awaitDrainWriters=null;else if(X.multiAwaitDrain)f("pipeOnDrain",X.awaitDrainWriters.size),X.awaitDrainWriters.delete(J);if((!X.awaitDrainWriters||X.awaitDrainWriters.size===0)&&K.listenerCount("data"))K.resume()}}g.prototype.unpipe=function(K){let J=this._readableState,Z={hasUnpiped:!1};if(J.pipes.length===0)return this;if(!K){let M=J.pipes;J.pipes=[],this.pause();for(let H=0;H<M.length;H++)M[H].emit("unpipe",this,{hasUnpiped:!1});return this}let X=C$(J.pipes,K);if(X===-1)return this;if(J.pipes.splice(X,1),J.pipes.length===0)this.pause();return K.emit("unpipe",this,Z),this};g.prototype.on=function(K,J){let Z=T1.prototype.on.call(this,K,J),X=this._readableState;if(K==="data"){if(X.readableListening=this.listenerCount("readable")>0,X.flowing!==!1)this.resume()}else if(K==="readable"){if(!X.endEmitted&&!X.readableListening){if(X.readableListening=X.needReadable=!0,X.flowing=!1,X.emittedReadable=!1,f("on readable",X.length,X.reading),X.length)VK(this);else if(!X.reading)d0.nextTick(MQ,this)}}return Z};g.prototype.addListener=g.prototype.on;g.prototype.removeListener=function(K,J){let Z=T1.prototype.removeListener.call(this,K,J);if(K==="readable")d0.nextTick(D4,this);return Z};g.prototype.off=g.prototype.removeListener;g.prototype.removeAllListeners=function(K){let J=T1.prototype.removeAllListeners.apply(this,arguments);if(K==="readable"||K===void 0)d0.nextTick(D4,this);return J};function D4(K){let J=K._readableState;if(J.readableListening=K.listenerCount("readable")>0,J.resumeScheduled&&J[R1]===!1)J.flowing=!0;else if(K.listenerCount("data")>0)K.resume();else if(!J.readableListening)J.flowing=null}function MQ(K){f("readable nexttick read 0"),K.read(0)}g.prototype.resume=function(){let K=this._readableState;if(!K.flowing)f("resume"),K.flowing=!K.readableListening,HQ(this,K);return K[R1]=!1,this};function HQ(K,J){if(!J.resumeScheduled)J.resumeScheduled=!0,d0.nextTick(YQ,K,J)}function YQ(K,J){if(f("resume",J.reading),!J.reading)K.read(0);if(J.resumeScheduled=!1,K.emit("resume"),j4(K),J.flowing&&!J.reading)K.read(0)}g.prototype.pause=function(){if(f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1)f("pause"),this._readableState.flowing=!1,this.emit("pause");return this._readableState[R1]=!0,this};function j4(K){let J=K._readableState;f("flow",J.flowing);while(J.flowing&&K.read()!==null);}g.prototype.wrap=function(K){let J=!1;K.on("data",(X)=>{if(!this.push(X)&&K.pause)J=!0,K.pause()}),K.on("end",()=>{this.push(null)}),K.on("error",(X)=>{s1(this,X)}),K.on("close",()=>{this.destroy()}),K.on("destroy",()=>{this.destroy()}),this._read=()=>{if(J&&K.resume)J=!1,K.resume()};let Z=E$(K);for(let X=1;X<Z.length;X++){let M=Z[X];if(this[M]===void 0&&typeof K[M]==="function")this[M]=K[M].bind(K)}return this};g.prototype[x$]=function(){return x4(this)};g.prototype.iterator=function(K){if(K!==void 0)d$(K,"options");return x4(this,K)};function x4(K,J){if(typeof K.read!=="function")K=g.wrap(K,{objectMode:!0});let Z=UQ(K,J);return Z.stream=K,Z}async function*UQ(K,J){let Z=k9;function X(Y){if(this===K)Z(),Z=k9;else Z=Y}K.on("readable",X);let M,H=I4(K,{writable:!1},(Y)=>{M=Y?W4(M,Y):null,Z(),Z=k9});try{while(!0){let Y=K.destroyed?null:K.read();if(Y!==null)yield Y;else if(M)throw M;else if(M===null)return;else await new T4(X)}}catch(Y){throw M=W4(M,Y),M}finally{if((M||(J===null||J===void 0?void 0:J.destroyOnReturn)!==!1)&&(M===void 0||K._readableState.autoDestroy))e1.destroyer(K,null);else K.off("readable",X),H()}}m9(g.prototype,{readable:{__proto__:null,get(){let K=this._readableState;return!!K&&K.readable!==!1&&!K.destroyed&&!K.errorEmitted&&!K.endEmitted},set(K){if(this._readableState)this._readableState.readable=!!K}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(K){if(this._readableState)this._readableState.flowing=K}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(K){if(!this._readableState)return;this._readableState.destroyed=K}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});m9(QK.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[R1]!==!1},set(K){this[R1]=!!K}}});g._fromList=R4;function R4(K,J){if(J.length===0)return null;let Z;if(J.objectMode)Z=J.buffer.shift();else if(!K||K>=J.length){if(J.decoder)Z=J.buffer.join("");else if(J.buffer.length===1)Z=J.buffer.first();else Z=J.buffer.concat(J.length);J.buffer.clear()}else Z=J.buffer.consume(K,J.decoder);return Z}function h9(K){let J=K._readableState;if(f("endReadable",J.endEmitted),!J.endEmitted)J.ended=!0,d0.nextTick(GQ,J,K)}function GQ(K,J){if(f("endReadableNT",K.endEmitted,K.length),!K.errored&&!K.closeEmitted&&!K.endEmitted&&K.length===0){if(K.endEmitted=!0,J.emit("end"),J.writable&&J.allowHalfOpen===!1)d0.nextTick(zQ,J);else if(K.autoDestroy){let Z=J._writableState;if(!Z||Z.autoDestroy&&(Z.finished||Z.writable===!1))J.destroy()}}}function zQ(K){if(K.writable&&!K.writableEnded&&!K.destroyed)K.end()}g.from=function(K,J){return b$(g,K,J)};var v9;function B4(){if(v9===void 0)v9={};return v9}g.fromWeb=function(K,J){return B4().newStreamReadableFromReadableStream(K,J)};g.toWeb=function(K,J){return B4().newReadableStreamFromStreamReadable(K,J)};g.wrap=function(K,J){var Z,X;return new g({objectMode:(Z=(X=K.readableObjectMode)!==null&&X!==void 0?X:K.objectMode)!==null&&Z!==void 0?Z:!0,...J,destroy(M,H){e1.destroyer(K,M),H(M)}}).wrap(K)}});var IK=O((QO,b4)=>{var B1=P1(),{ArrayPrototypeSlice:y4,Error:qQ,FunctionPrototypeSymbolHasInstance:h4,ObjectDefineProperty:v4,ObjectDefineProperties:$Q,ObjectSetPrototypeOf:g4,StringPrototypeToLowerCase:QQ,Symbol:VQ,SymbolHasInstance:WQ}=e();b4.exports=K0;K0.WritableState=L8;var{EventEmitter:PQ}=S("events"),_8=YK().Stream,{Buffer:WK}=S("buffer"),TK=x1(),{addAbortSignal:FQ}=I8(),{getHighWaterMark:TQ,getDefaultHighWaterMark:IQ}=O8(),{ERR_INVALID_ARG_TYPE:OQ,ERR_METHOD_NOT_IMPLEMENTED:NQ,ERR_MULTIPLE_CALLBACK:u4,ERR_STREAM_CANNOT_PIPE:CQ,ERR_STREAM_DESTROYED:A8,ERR_STREAM_ALREADY_FINISHED:_Q,ERR_STREAM_NULL_VALUES:AQ,ERR_STREAM_WRITE_AFTER_END:LQ,ERR_UNKNOWN_ENCODING:m4}=I0().codes,{errorOrDestroy:K8}=TK;g4(K0.prototype,_8.prototype);g4(K0,_8);function d9(){}var J8=VQ("kOnFinished");function L8(K,J,Z){if(typeof Z!=="boolean")Z=J instanceof t0();if(this.objectMode=!!(K&&K.objectMode),Z)this.objectMode=this.objectMode||!!(K&&K.writableObjectMode);this.highWaterMark=K?TQ(this,K,"writableHighWaterMark",Z):IQ(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let X=!!(K&&K.decodeStrings===!1);this.decodeStrings=!X,this.defaultEncoding=K&&K.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=DQ.bind(void 0,J),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,FK(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!K||K.emitClose!==!1,this.autoDestroy=!K||K.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[J8]=[]}function FK(K){K.buffered=[],K.bufferedIndex=0,K.allBuffers=!0,K.allNoop=!0}L8.prototype.getBuffer=function K(){return y4(this.buffered,this.bufferedIndex)};v4(L8.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function K0(K){let J=this instanceof t0();if(!J&&!h4(K0,this))return new K0(K);if(this._writableState=new L8(K,this,J),K){if(typeof K.write==="function")this._write=K.write;if(typeof K.writev==="function")this._writev=K.writev;if(typeof K.destroy==="function")this._destroy=K.destroy;if(typeof K.final==="function")this._final=K.final;if(typeof K.construct==="function")this._construct=K.construct;if(K.signal)FQ(K.signal,this)}_8.call(this,K),TK.construct(this,()=>{let Z=this._writableState;if(!Z.writing)p9(this,Z);l9(this,Z)})}v4(K0,WQ,{__proto__:null,value:function(K){if(h4(this,K))return!0;if(this!==K0)return!1;return K&&K._writableState instanceof L8}});K0.prototype.pipe=function(){K8(this,new CQ)};function f4(K,J,Z,X){let M=K._writableState;if(typeof Z==="function")X=Z,Z=M.defaultEncoding;else{if(!Z)Z=M.defaultEncoding;else if(Z!=="buffer"&&!WK.isEncoding(Z))throw new m4(Z);if(typeof X!=="function")X=d9}if(J===null)throw new AQ;else if(!M.objectMode)if(typeof J==="string"){if(M.decodeStrings!==!1)J=WK.from(J,Z),Z="buffer"}else if(J instanceof WK)Z="buffer";else if(_8._isUint8Array(J))J=_8._uint8ArrayToBuffer(J),Z="buffer";else throw new OQ("chunk",["string","Buffer","Uint8Array"],J);let H;if(M.ending)H=new LQ;else if(M.destroyed)H=new A8("write");if(H)return B1.nextTick(X,H),K8(K,H,!0),H;return M.pendingcb++,EQ(K,M,J,Z,X)}K0.prototype.write=function(K,J,Z){return f4(this,K,J,Z)===!0};K0.prototype.cork=function(){this._writableState.corked++};K0.prototype.uncork=function(){let K=this._writableState;if(K.corked){if(K.corked--,!K.writing)p9(this,K)}};K0.prototype.setDefaultEncoding=function K(J){if(typeof J==="string")J=QQ(J);if(!WK.isEncoding(J))throw new m4(J);return this._writableState.defaultEncoding=J,this};function EQ(K,J,Z,X,M){let H=J.objectMode?1:Z.length;J.length+=H;let Y=J.length<J.highWaterMark;if(!Y)J.needDrain=!0;if(J.writing||J.corked||J.errored||!J.constructed){if(J.buffered.push({chunk:Z,encoding:X,callback:M}),J.allBuffers&&X!=="buffer")J.allBuffers=!1;if(J.allNoop&&M!==d9)J.allNoop=!1}else J.writelen=H,J.writecb=M,J.writing=!0,J.sync=!0,K._write(Z,X,J.onwrite),J.sync=!1;return Y&&!J.errored&&!J.destroyed}function S4(K,J,Z,X,M,H,Y){if(J.writelen=X,J.writecb=Y,J.writing=!0,J.sync=!0,J.destroyed)J.onwrite(new A8("write"));else if(Z)K._writev(M,J.onwrite);else K._write(M,H,J.onwrite);J.sync=!1}function k4(K,J,Z,X){--J.pendingcb,X(Z),b9(J),K8(K,Z)}function DQ(K,J){let Z=K._writableState,X=Z.sync,M=Z.writecb;if(typeof M!=="function"){K8(K,new u4);return}if(Z.writing=!1,Z.writecb=null,Z.length-=Z.writelen,Z.writelen=0,J){if(J.stack,!Z.errored)Z.errored=J;if(K._readableState&&!K._readableState.errored)K._readableState.errored=J;if(X)B1.nextTick(k4,K,Z,J,M);else k4(K,Z,J,M)}else{if(Z.buffered.length>Z.bufferedIndex)p9(K,Z);if(X)if(Z.afterWriteTickInfo!==null&&Z.afterWriteTickInfo.cb===M)Z.afterWriteTickInfo.count++;else Z.afterWriteTickInfo={count:1,cb:M,stream:K,state:Z},B1.nextTick(jQ,Z.afterWriteTickInfo);else c4(K,Z,1,M)}}function jQ({stream:K,state:J,count:Z,cb:X}){return J.afterWriteTickInfo=null,c4(K,J,Z,X)}function c4(K,J,Z,X){if(!J.ending&&!K.destroyed&&J.length===0&&J.needDrain)J.needDrain=!1,K.emit("drain");while(Z-- >0)J.pendingcb--,X();if(J.destroyed)b9(J);l9(K,J)}function b9(K){if(K.writing)return;for(let M=K.bufferedIndex;M<K.buffered.length;++M){var J;let{chunk:H,callback:Y}=K.buffered[M],U=K.objectMode?1:H.length;K.length-=U,Y((J=K.errored)!==null&&J!==void 0?J:new A8("write"))}let Z=K[J8].splice(0);for(let M=0;M<Z.length;M++){var X;Z[M]((X=K.errored)!==null&&X!==void 0?X:new A8("end"))}FK(K)}function p9(K,J){if(J.corked||J.bufferProcessing||J.destroyed||!J.constructed)return;let{buffered:Z,bufferedIndex:X,objectMode:M}=J,H=Z.length-X;if(!H)return;let Y=X;if(J.bufferProcessing=!0,H>1&&K._writev){J.pendingcb-=H-1;let U=J.allNoop?d9:(z)=>{for(let q=Y;q<Z.length;++q)Z[q].callback(z)},G=J.allNoop&&Y===0?Z:y4(Z,Y);G.allBuffers=J.allBuffers,S4(K,J,!0,J.length,G,"",U),FK(J)}else{do{let{chunk:U,encoding:G,callback:z}=Z[Y];Z[Y++]=null;let q=M?1:U.length;S4(K,J,!1,q,U,G,z)}while(Y<Z.length&&!J.writing);if(Y===Z.length)FK(J);else if(Y>256)Z.splice(0,Y),J.bufferedIndex=0;else J.bufferedIndex=Y}J.bufferProcessing=!1}K0.prototype._write=function(K,J,Z){if(this._writev)this._writev([{chunk:K,encoding:J}],Z);else throw new NQ("_write()")};K0.prototype._writev=null;K0.prototype.end=function(K,J,Z){let X=this._writableState;if(typeof K==="function")Z=K,K=null,J=null;else if(typeof J==="function")Z=J,J=null;let M;if(K!==null&&K!==void 0){let H=f4(this,K,J);if(H instanceof qQ)M=H}if(X.corked)X.corked=1,this.uncork();if(M);else if(!X.errored&&!X.ending)X.ending=!0,l9(this,X,!0),X.ended=!0;else if(X.finished)M=new _Q("end");else if(X.destroyed)M=new A8("end");if(typeof Z==="function")if(M||X.finished)B1.nextTick(Z,M);else X[J8].push(Z);return this};function PK(K){return K.ending&&!K.destroyed&&K.constructed&&K.length===0&&!K.errored&&K.buffered.length===0&&!K.finished&&!K.writing&&!K.errorEmitted&&!K.closeEmitted}function xQ(K,J){let Z=!1;function X(M){if(Z){K8(K,M!==null&&M!==void 0?M:u4());return}if(Z=!0,J.pendingcb--,M){let H=J[J8].splice(0);for(let Y=0;Y<H.length;Y++)H[Y](M);K8(K,M,J.sync)}else if(PK(J))J.prefinished=!0,K.emit("prefinish"),J.pendingcb++,B1.nextTick(c9,K,J)}J.sync=!0,J.pendingcb++;try{K._final(X)}catch(M){X(M)}J.sync=!1}function RQ(K,J){if(!J.prefinished&&!J.finalCalled)if(typeof K._final==="function"&&!J.destroyed)J.finalCalled=!0,xQ(K,J);else J.prefinished=!0,K.emit("prefinish")}function l9(K,J,Z){if(PK(J)){if(RQ(K,J),J.pendingcb===0){if(Z)J.pendingcb++,B1.nextTick((X,M)=>{if(PK(M))c9(X,M);else M.pendingcb--},K,J);else if(PK(J))J.pendingcb++,c9(K,J)}}}function c9(K,J){J.pendingcb--,J.finished=!0;let Z=J[J8].splice(0);for(let X=0;X<Z.length;X++)Z[X]();if(K.emit("finish"),J.autoDestroy){let X=K._readableState;if(!X||X.autoDestroy&&(X.endEmitted||X.readable===!1))K.destroy()}}$Q(K0.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(K){if(this._writableState)this._writableState.destroyed=K}},writable:{__proto__:null,get(){let K=this._writableState;return!!K&&K.writable!==!1&&!K.destroyed&&!K.errored&&!K.ending&&!K.ended},set(K){if(this._writableState)this._writableState.writable=!!K}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let K=this._writableState;if(!K)return!1;return!K.destroyed&&!K.ending&&K.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var BQ=TK.destroy;K0.prototype.destroy=function(K,J){let Z=this._writableState;if(!Z.destroyed&&(Z.bufferedIndex<Z.buffered.length||Z[J8].length))B1.nextTick(b9,Z);return BQ.call(this,K,J),this};K0.prototype._undestroy=TK.undestroy;K0.prototype._destroy=function(K,J){J(K)};K0.prototype[PQ.captureRejectionSymbol]=function(K){this.destroy(K)};var f9;function d4(){if(f9===void 0)f9={};return f9}K0.fromWeb=function(K,J){return d4().newStreamWritableFromWritableStream(K,J)};K0.toWeb=function(K){return d4().newWritableStreamFromStreamWritable(K)}});var MM=O((VO,XM)=>{var i9=P1(),wQ=S("buffer"),{isReadable:SQ,isWritable:kQ,isIterable:p4,isNodeStream:yQ,isReadableNodeStream:l4,isWritableNodeStream:i4,isDuplexNodeStream:hQ,isReadableStream:n4,isWritableStream:o4}=a0(),r4=U1(),{AbortError:JM,codes:{ERR_INVALID_ARG_TYPE:vQ,ERR_INVALID_RETURN_VALUE:a4}}=I0(),{destroyer:X8}=x1(),gQ=t0(),ZM=C8(),uQ=IK(),{createDeferredPromise:s4}=W0(),t4=w9(),e4=globalThis.Blob||wQ.Blob,mQ=typeof e4!=="undefined"?function K(J){return J instanceof e4}:function K(J){return!1},fQ=globalThis.AbortController||n1().AbortController,{FunctionPrototypeCall:KM}=e();class w1 extends gQ{constructor(K){super(K);if((K===null||K===void 0?void 0:K.readable)===!1)this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0;if((K===null||K===void 0?void 0:K.writable)===!1)this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0}}XM.exports=function K(J,Z){if(hQ(J))return J;if(l4(J))return Z8({readable:J});if(i4(J))return Z8({writable:J});if(yQ(J))return Z8({writable:!1,readable:!1});if(n4(J))return Z8({readable:ZM.fromWeb(J)});if(o4(J))return Z8({writable:uQ.fromWeb(J)});if(typeof J==="function"){let{value:M,write:H,final:Y,destroy:U}=cQ(J);if(p4(M))return t4(w1,M,{objectMode:!0,write:H,final:Y,destroy:U});let G=M===null||M===void 0?void 0:M.then;if(typeof G==="function"){let z,q=KM(G,M,($)=>{if($!=null)throw new a4("nully","body",$)},($)=>{X8(z,$)});return z=new w1({objectMode:!0,readable:!1,write:H,final($){Y(async()=>{try{await q,i9.nextTick($,null)}catch(V){i9.nextTick($,V)}})},destroy:U})}throw new a4("Iterable, AsyncIterable or AsyncFunction",Z,M)}if(mQ(J))return K(J.arrayBuffer());if(p4(J))return t4(w1,J,{objectMode:!0,writable:!1});if(n4(J===null||J===void 0?void 0:J.readable)&&o4(J===null||J===void 0?void 0:J.writable))return w1.fromWeb(J);if(typeof(J===null||J===void 0?void 0:J.writable)==="object"||typeof(J===null||J===void 0?void 0:J.readable)==="object"){let M=J!==null&&J!==void 0&&J.readable?l4(J===null||J===void 0?void 0:J.readable)?J===null||J===void 0?void 0:J.readable:K(J.readable):void 0,H=J!==null&&J!==void 0&&J.writable?i4(J===null||J===void 0?void 0:J.writable)?J===null||J===void 0?void 0:J.writable:K(J.writable):void 0;return Z8({readable:M,writable:H})}let X=J===null||J===void 0?void 0:J.then;if(typeof X==="function"){let M;return KM(X,J,(H)=>{if(H!=null)M.push(H);M.push(null)},(H)=>{X8(M,H)}),M=new w1({objectMode:!0,writable:!1,read(){}})}throw new vQ(Z,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],J)};function cQ(K){let{promise:J,resolve:Z}=s4(),X=new fQ,M=X.signal;return{value:K(async function*(){while(!0){let Y=J;J=null;let{chunk:U,done:G,cb:z}=await Y;if(i9.nextTick(z),G)return;if(M.aborted)throw new JM(void 0,{cause:M.reason});({promise:J,resolve:Z}=s4()),yield U}}(),{signal:M}),write(Y,U,G){let z=Z;Z=null,z({chunk:Y,done:!1,cb:G})},final(Y){let U=Z;Z=null,U({done:!0,cb:Y})},destroy(Y,U){X.abort(),U(Y)}}}function Z8(K){let J=K.readable&&typeof K.readable.read!=="function"?ZM.wrap(K.readable):K.readable,Z=K.writable,X=!!SQ(J),M=!!kQ(Z),H,Y,U,G,z;function q($){let V=G;if(G=null,V)V($);else if($)z.destroy($)}if(z=new w1({readableObjectMode:!!(J!==null&&J!==void 0&&J.readableObjectMode),writableObjectMode:!!(Z!==null&&Z!==void 0&&Z.writableObjectMode),readable:X,writable:M}),M)r4(Z,($)=>{if(M=!1,$)X8(J,$);q($)}),z._write=function($,V,W){if(Z.write($,V))W();else H=W},z._final=function($){Z.end(),Y=$},Z.on("drain",function(){if(H){let $=H;H=null,$()}}),Z.on("finish",function(){if(Y){let $=Y;Y=null,$()}});if(X)r4(J,($)=>{if(X=!1,$)X8(J,$);q($)}),J.on("readable",function(){if(U){let $=U;U=null,$()}}),J.on("end",function(){z.push(null)}),z._read=function(){while(!0){let $=J.read();if($===null){U=z._read;return}if(!z.push($))return}};return z._destroy=function($,V){if(!$&&G!==null)$=new JM;if(U=null,H=null,Y=null,G===null)V($);else G=V,X8(Z,$),X8(J,$)},z}});var t0=O((WO,UM)=>{var{ObjectDefineProperties:dQ,ObjectGetOwnPropertyDescriptor:G1,ObjectKeys:bQ,ObjectSetPrototypeOf:HM}=e();UM.exports=b0;var r9=C8(),w0=IK();HM(b0.prototype,r9.prototype);HM(b0,r9);{let K=bQ(w0.prototype);for(let J=0;J<K.length;J++){let Z=K[J];if(!b0.prototype[Z])b0.prototype[Z]=w0.prototype[Z]}}function b0(K){if(!(this instanceof b0))return new b0(K);if(r9.call(this,K),w0.call(this,K),K){if(this.allowHalfOpen=K.allowHalfOpen!==!1,K.readable===!1)this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0;if(K.writable===!1)this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0}else this.allowHalfOpen=!0}dQ(b0.prototype,{writable:{__proto__:null,...G1(w0.prototype,"writable")},writableHighWaterMark:{__proto__:null,...G1(w0.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...G1(w0.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...G1(w0.prototype,"writableBuffer")},writableLength:{__proto__:null,...G1(w0.prototype,"writableLength")},writableFinished:{__proto__:null,...G1(w0.prototype,"writableFinished")},writableCorked:{__proto__:null,...G1(w0.prototype,"writableCorked")},writableEnded:{__proto__:null,...G1(w0.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...G1(w0.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){if(this._readableState===void 0||this._writableState===void 0)return!1;return this._readableState.destroyed&&this._writableState.destroyed},set(K){if(this._readableState&&this._writableState)this._readableState.destroyed=K,this._writableState.destroyed=K}}});var n9;function YM(){if(n9===void 0)n9={};return n9}b0.fromWeb=function(K,J){return YM().newStreamDuplexFromReadableWritablePair(K,J)};b0.toWeb=function(K){return YM().newReadableWritablePairFromDuplex(K)};var o9;b0.from=function(K){if(!o9)o9=MM();return o9(K,"body")}});var t9=O((PO,zM)=>{var{ObjectSetPrototypeOf:GM,Symbol:pQ}=e();zM.exports=z1;var{ERR_METHOD_NOT_IMPLEMENTED:lQ}=I0().codes,s9=t0(),{getHighWaterMark:iQ}=O8();GM(z1.prototype,s9.prototype);GM(z1,s9);var E8=pQ("kCallback");function z1(K){if(!(this instanceof z1))return new z1(K);let J=K?iQ(this,K,"readableHighWaterMark",!0):null;if(J===0)K={...K,highWaterMark:null,readableHighWaterMark:J,writableHighWaterMark:K.writableHighWaterMark||0};if(s9.call(this,K),this._readableState.sync=!1,this[E8]=null,K){if(typeof K.transform==="function")this._transform=K.transform;if(typeof K.flush==="function")this._flush=K.flush}this.on("prefinish",nQ)}function a9(K){if(typeof this._flush==="function"&&!this.destroyed)this._flush((J,Z)=>{if(J){if(K)K(J);else this.destroy(J);return}if(Z!=null)this.push(Z);if(this.push(null),K)K()});else if(this.push(null),K)K()}function nQ(){if(this._final!==a9)a9.call(this)}z1.prototype._final=a9;z1.prototype._transform=function(K,J,Z){throw new lQ("_transform()")};z1.prototype._write=function(K,J,Z){let X=this._readableState,M=this._writableState,H=X.length;this._transform(K,J,(Y,U)=>{if(Y){Z(Y);return}if(U!=null)this.push(U);if(M.ended||H===X.length||X.length<X.highWaterMark)Z();else this[E8]=Z})};z1.prototype._read=function(){if(this[E8]){let K=this[E8];this[E8]=null,K()}}});var KJ=O((FO,$M)=>{var{ObjectSetPrototypeOf:qM}=e();$M.exports=M8;var e9=t9();qM(M8.prototype,e9.prototype);qM(M8,e9);function M8(K){if(!(this instanceof M8))return new M8(K);e9.call(this,K)}M8.prototype._transform=function(K,J,Z){Z(null,K)}});var _K=O((TO,FM)=>{var D8=P1(),{ArrayIsArray:oQ,Promise:rQ,SymbolAsyncIterator:aQ,SymbolDispose:sQ}=e(),CK=U1(),{once:tQ}=W0(),eQ=x1(),QM=t0(),{aggregateTwoErrors:KV,codes:{ERR_INVALID_ARG_TYPE:zJ,ERR_INVALID_RETURN_VALUE:JJ,ERR_MISSING_ARGS:JV,ERR_STREAM_DESTROYED:ZV,ERR_STREAM_PREMATURE_CLOSE:XV},AbortError:MV}=I0(),{validateFunction:HV,validateAbortSignal:YV}=r1(),{isIterable:S1,isReadable:ZJ,isReadableNodeStream:NK,isNodeStream:VM,isTransformStream:H8,isWebStream:UV,isReadableStream:XJ,isReadableFinished:GV}=a0(),zV=globalThis.AbortController||n1().AbortController,MJ,HJ,YJ;function WM(K,J,Z){let X=!1;K.on("close",()=>{X=!0});let M=CK(K,{readable:J,writable:Z},(H)=>{X=!H});return{destroy:(H)=>{if(X)return;X=!0,eQ.destroyer(K,H||new ZV("pipe"))},cleanup:M}}function qV(K){return HV(K[K.length-1],"streams[stream.length - 1]"),K.pop()}function UJ(K){if(S1(K))return K;else if(NK(K))return $V(K);throw new zJ("val",["Readable","Iterable","AsyncIterable"],K)}async function*$V(K){if(!HJ)HJ=C8();yield*HJ.prototype[aQ].call(K)}async function OK(K,J,Z,{end:X}){let M,H=null,Y=(z)=>{if(z)M=z;if(H){let q=H;H=null,q()}},U=()=>new rQ((z,q)=>{if(M)q(M);else H=()=>{if(M)q(M);else z()}});J.on("drain",Y);let G=CK(J,{readable:!1},Y);try{if(J.writableNeedDrain)await U();for await(let z of K)if(!J.write(z))await U();if(X)J.end(),await U();Z()}catch(z){Z(M!==z?KV(M,z):z)}finally{G(),J.off("drain",Y)}}async function GJ(K,J,Z,{end:X}){if(H8(J))J=J.writable;let M=J.getWriter();try{for await(let H of K)await M.ready,M.write(H).catch(()=>{});if(await M.ready,X)await M.close();Z()}catch(H){try{await M.abort(H),Z(H)}catch(Y){Z(Y)}}}function QV(...K){return PM(K,tQ(qV(K)))}function PM(K,J,Z){if(K.length===1&&oQ(K[0]))K=K[0];if(K.length<2)throw new JV("streams");let X=new zV,M=X.signal,H=Z===null||Z===void 0?void 0:Z.signal,Y=[];YV(H,"options.signal");function U(){x(new MV)}YJ=YJ||W0().addAbortListener;let G;if(H)G=YJ(H,U);let z,q,$=[],V=0;function W(p){x(p,--V===0)}function x(p,v){var t;if(p&&(!z||z.code==="ERR_STREAM_PREMATURE_CLOSE"))z=p;if(!z&&!v)return;while($.length)$.shift()(z);if((t=G)===null||t===void 0||t[sQ](),X.abort(),v){if(!z)Y.forEach((L0)=>L0());D8.nextTick(J,z,q)}}let _;for(let p=0;p<K.length;p++){let v=K[p],t=p<K.length-1,L0=p>0,U0=t||(Z===null||Z===void 0?void 0:Z.end)!==!1,g0=p===K.length-1;if(VM(v)){let M0=function(E0){if(E0&&E0.name!=="AbortError"&&E0.code!=="ERR_STREAM_PREMATURE_CLOSE")W(E0)};var B=M0;if(U0){let{destroy:E0,cleanup:M1}=WM(v,t,L0);if($.push(E0),ZJ(v)&&g0)Y.push(M1)}if(v.on("error",M0),ZJ(v)&&g0)Y.push(()=>{v.removeListener("error",M0)})}if(p===0)if(typeof v==="function"){if(_=v({signal:M}),!S1(_))throw new JJ("Iterable, AsyncIterable or Stream","source",_)}else if(S1(v)||NK(v)||H8(v))_=v;else _=QM.from(v);else if(typeof v==="function"){if(H8(_)){var j;_=UJ((j=_)===null||j===void 0?void 0:j.readable)}else _=UJ(_);if(_=v(_,{signal:M}),t){if(!S1(_,!0))throw new JJ("AsyncIterable",`transform[${p-1}]`,_)}else{var A;if(!MJ)MJ=KJ();let M0=new MJ({objectMode:!0}),E0=(A=_)===null||A===void 0?void 0:A.then;if(typeof E0==="function")V++,E0.call(_,(T0)=>{if(q=T0,T0!=null)M0.write(T0);if(U0)M0.end();D8.nextTick(W)},(T0)=>{M0.destroy(T0),D8.nextTick(W,T0)});else if(S1(_,!0))V++,OK(_,M0,W,{end:U0});else if(XJ(_)||H8(_)){let T0=_.readable||_;V++,OK(T0,M0,W,{end:U0})}else throw new JJ("AsyncIterable or Promise","destination",_);_=M0;let{destroy:M1,cleanup:C1}=WM(_,!1,!0);if($.push(M1),g0)Y.push(C1)}}else if(VM(v)){if(NK(_)){V+=2;let M0=VV(_,v,W,{end:U0});if(ZJ(v)&&g0)Y.push(M0)}else if(H8(_)||XJ(_)){let M0=_.readable||_;V++,OK(M0,v,W,{end:U0})}else if(S1(_))V++,OK(_,v,W,{end:U0});else throw new zJ("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],_);_=v}else if(UV(v)){if(NK(_))V++,GJ(UJ(_),v,W,{end:U0});else if(XJ(_)||S1(_))V++,GJ(_,v,W,{end:U0});else if(H8(_))V++,GJ(_.readable,v,W,{end:U0});else throw new zJ("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],_);_=v}else _=QM.from(v)}if(M!==null&&M!==void 0&&M.aborted||H!==null&&H!==void 0&&H.aborted)D8.nextTick(U);return _}function VV(K,J,Z,{end:X}){let M=!1;if(J.on("close",()=>{if(!M)Z(new XV)}),K.pipe(J,{end:!1}),X){let Y=function(){M=!0,J.end()};var H=Y;if(GV(K))D8.nextTick(Y);else K.once("end",Y)}else Z();return CK(K,{readable:!0,writable:!1},(Y)=>{let U=K._readableState;if(Y&&Y.code==="ERR_STREAM_PREMATURE_CLOSE"&&U&&U.ended&&!U.errored&&!U.errorEmitted)K.once("end",Z).once("error",Z);else Z(Y)}),CK(J,{readable:!1,writable:!0},Z)}FM.exports={pipelineImpl:PM,pipeline:QV}});var $J=O((IO,_M)=>{var{pipeline:WV}=_K(),AK=t0(),{destroyer:PV}=x1(),{isNodeStream:LK,isReadable:TM,isWritable:IM,isWebStream:qJ,isTransformStream:k1,isWritableStream:OM,isReadableStream:NM}=a0(),{AbortError:FV,codes:{ERR_INVALID_ARG_VALUE:CM,ERR_MISSING_ARGS:TV}}=I0(),IV=U1();_M.exports=function K(...J){if(J.length===0)throw new TV("streams");if(J.length===1)return AK.from(J[0]);let Z=[...J];if(typeof J[0]==="function")J[0]=AK.from(J[0]);if(typeof J[J.length-1]==="function"){let W=J.length-1;J[W]=AK.from(J[W])}for(let W=0;W<J.length;++W){if(!LK(J[W])&&!qJ(J[W]))continue;if(W<J.length-1&&!(TM(J[W])||NM(J[W])||k1(J[W])))throw new CM(`streams[${W}]`,Z[W],"must be readable");if(W>0&&!(IM(J[W])||OM(J[W])||k1(J[W])))throw new CM(`streams[${W}]`,Z[W],"must be writable")}let X,M,H,Y,U;function G(W){let x=Y;if(Y=null,x)x(W);else if(W)U.destroy(W);else if(!V&&!$)U.destroy()}let z=J[0],q=WV(J,G),$=!!(IM(z)||OM(z)||k1(z)),V=!!(TM(q)||NM(q)||k1(q));if(U=new AK({writableObjectMode:!!(z!==null&&z!==void 0&&z.writableObjectMode),readableObjectMode:!!(q!==null&&q!==void 0&&q.readableObjectMode),writable:$,readable:V}),$){if(LK(z))U._write=function(x,_,j){if(z.write(x,_))j();else X=j},U._final=function(x){z.end(),M=x},z.on("drain",function(){if(X){let x=X;X=null,x()}});else if(qJ(z)){let _=(k1(z)?z.writable:z).getWriter();U._write=async function(j,A,B){try{await _.ready,_.write(j).catch(()=>{}),B()}catch(p){B(p)}},U._final=async function(j){try{await _.ready,_.close().catch(()=>{}),M=j}catch(A){j(A)}}}let W=k1(q)?q.readable:q;IV(W,()=>{if(M){let x=M;M=null,x()}})}if(V){if(LK(q))q.on("readable",function(){if(H){let W=H;H=null,W()}}),q.on("end",function(){U.push(null)}),U._read=function(){while(!0){let W=q.read();if(W===null){H=U._read;return}if(!U.push(W))return}};else if(qJ(q)){let x=(k1(q)?q.readable:q).getReader();U._read=async function(){while(!0)try{let{value:_,done:j}=await x.read();if(!U.push(_))return;if(j){U.push(null);return}}catch{return}}}}return U._destroy=function(W,x){if(!W&&Y!==null)W=new FV;if(H=null,X=null,M=null,Y===null)x(W);else if(Y=x,LK(q))PV(q,W)},U}});var kM=O((iV,VJ)=>{var OV=globalThis.AbortController||n1().AbortController,{codes:{ERR_INVALID_ARG_VALUE:NV,ERR_INVALID_ARG_TYPE:j8,ERR_MISSING_ARGS:CV,ERR_OUT_OF_RANGE:_V},AbortError:e0}=I0(),{validateAbortSignal:y1,validateInteger:AM,validateObject:h1}=r1(),AV=e().Symbol("kWeak"),LV=e().Symbol("kResistStopPropagation"),{finished:EV}=U1(),DV=$J(),{addAbortSignalNoValidate:jV}=I8(),{isWritable:xV,isNodeStream:RV}=a0(),{deprecate:BV}=W0(),{ArrayPrototypePush:wV,Boolean:SV,MathFloor:LM,Number:kV,NumberIsNaN:yV,Promise:EM,PromiseReject:DM,PromiseResolve:hV,PromisePrototypeThen:jM,Symbol:RM}=e(),EK=RM("kEmpty"),xM=RM("kEof");function vV(K,J){if(J!=null)h1(J,"options");if((J===null||J===void 0?void 0:J.signal)!=null)y1(J.signal,"options.signal");if(RV(K)&&!xV(K))throw new NV("stream",K,"must be writable");let Z=DV(this,K);if(J!==null&&J!==void 0&&J.signal)jV(J.signal,Z);return Z}function DK(K,J){if(typeof K!=="function")throw new j8("fn",["Function","AsyncFunction"],K);if(J!=null)h1(J,"options");if((J===null||J===void 0?void 0:J.signal)!=null)y1(J.signal,"options.signal");let Z=1;if((J===null||J===void 0?void 0:J.concurrency)!=null)Z=LM(J.concurrency);let X=Z-1;if((J===null||J===void 0?void 0:J.highWaterMark)!=null)X=LM(J.highWaterMark);return AM(Z,"options.concurrency",1),AM(X,"options.highWaterMark",0),X+=Z,async function*M(){let H=W0().AbortSignalAny([J===null||J===void 0?void 0:J.signal].filter(SV)),Y=this,U=[],G={signal:H},z,q,$=!1,V=0;function W(){$=!0,x()}function x(){V-=1,_()}function _(){if(q&&!$&&V<Z&&U.length<X)q(),q=null}async function j(){try{for await(let A of Y){if($)return;if(H.aborted)throw new e0;try{if(A=K(A,G),A===EK)continue;A=hV(A)}catch(B){A=DM(B)}if(V+=1,jM(A,x,W),U.push(A),z)z(),z=null;if(!$&&(U.length>=X||V>=Z))await new EM((B)=>{q=B})}U.push(xM)}catch(A){let B=DM(A);jM(B,x,W),U.push(B)}finally{if($=!0,z)z(),z=null}}j();try{while(!0){while(U.length>0){let A=await U[0];if(A===xM)return;if(H.aborted)throw new e0;if(A!==EK)yield A;U.shift(),_()}await new EM((A)=>{z=A})}}finally{if($=!0,q)q(),q=null}}.call(this)}function gV(K=void 0){if(K!=null)h1(K,"options");if((K===null||K===void 0?void 0:K.signal)!=null)y1(K.signal,"options.signal");return async function*J(){let Z=0;for await(let M of this){var X;if(K!==null&&K!==void 0&&(X=K.signal)!==null&&X!==void 0&&X.aborted)throw new e0({cause:K.signal.reason});yield[Z++,M]}}.call(this)}async function BM(K,J=void 0){for await(let Z of QJ.call(this,K,J))return!0;return!1}async function uV(K,J=void 0){if(typeof K!=="function")throw new j8("fn",["Function","AsyncFunction"],K);return!await BM.call(this,async(...Z)=>{return!await K(...Z)},J)}async function mV(K,J){for await(let Z of QJ.call(this,K,J))return Z;return}async function fV(K,J){if(typeof K!=="function")throw new j8("fn",["Function","AsyncFunction"],K);async function Z(X,M){return await K(X,M),EK}for await(let X of DK.call(this,Z,J));}function QJ(K,J){if(typeof K!=="function")throw new j8("fn",["Function","AsyncFunction"],K);async function Z(X,M){if(await K(X,M))return X;return EK}return DK.call(this,Z,J)}class wM extends CV{constructor(){super("reduce");this.message="Reduce of an empty stream requires an initial value"}}async function cV(K,J,Z){var X;if(typeof K!=="function")throw new j8("reducer",["Function","AsyncFunction"],K);if(Z!=null)h1(Z,"options");if((Z===null||Z===void 0?void 0:Z.signal)!=null)y1(Z.signal,"options.signal");let M=arguments.length>1;if(Z!==null&&Z!==void 0&&(X=Z.signal)!==null&&X!==void 0&&X.aborted){let z=new e0(void 0,{cause:Z.signal.reason});throw this.once("error",()=>{}),await EV(this.destroy(z)),z}let H=new OV,Y=H.signal;if(Z!==null&&Z!==void 0&&Z.signal){let z={once:!0,[AV]:this,[LV]:!0};Z.signal.addEventListener("abort",()=>H.abort(),z)}let U=!1;try{for await(let z of this){var G;if(U=!0,Z!==null&&Z!==void 0&&(G=Z.signal)!==null&&G!==void 0&&G.aborted)throw new e0;if(!M)J=z,M=!0;else J=await K(J,z,{signal:Y})}if(!U&&!M)throw new wM}finally{H.abort()}return J}async function dV(K){if(K!=null)h1(K,"options");if((K===null||K===void 0?void 0:K.signal)!=null)y1(K.signal,"options.signal");let J=[];for await(let X of this){var Z;if(K!==null&&K!==void 0&&(Z=K.signal)!==null&&Z!==void 0&&Z.aborted)throw new e0(void 0,{cause:K.signal.reason});wV(J,X)}return J}function bV(K,J){let Z=DK.call(this,K,J);return async function*X(){for await(let M of Z)yield*M}.call(this)}function SM(K){if(K=kV(K),yV(K))return 0;if(K<0)throw new _V("number",">= 0",K);return K}function pV(K,J=void 0){if(J!=null)h1(J,"options");if((J===null||J===void 0?void 0:J.signal)!=null)y1(J.signal,"options.signal");return K=SM(K),async function*Z(){var X;if(J!==null&&J!==void 0&&(X=J.signal)!==null&&X!==void 0&&X.aborted)throw new e0;for await(let H of this){var M;if(J!==null&&J!==void 0&&(M=J.signal)!==null&&M!==void 0&&M.aborted)throw new e0;if(K--<=0)yield H}}.call(this)}function lV(K,J=void 0){if(J!=null)h1(J,"options");if((J===null||J===void 0?void 0:J.signal)!=null)y1(J.signal,"options.signal");return K=SM(K),async function*Z(){var X;if(J!==null&&J!==void 0&&(X=J.signal)!==null&&X!==void 0&&X.aborted)throw new e0;for await(let H of this){var M;if(J!==null&&J!==void 0&&(M=J.signal)!==null&&M!==void 0&&M.aborted)throw new e0;if(K-- >0)yield H;if(K<=0)return}}.call(this)}iV.streamReturningOperators={asIndexedPairs:BV(gV,"readable.asIndexedPairs will be removed in a future version."),drop:pV,filter:QJ,flatMap:bV,map:DK,take:lV,compose:vV};iV.promiseReturningOperators={every:uV,forEach:fV,reduce:cV,toArray:dV,some:BM,find:mV}});var WJ=O((OO,yM)=>{var{ArrayPrototypePop:rV,Promise:aV}=e(),{isIterable:sV,isNodeStream:tV,isWebStream:eV}=a0(),{pipelineImpl:K3}=_K(),{finished:J3}=U1();PJ();function Z3(...K){return new aV((J,Z)=>{let X,M,H=K[K.length-1];if(H&&typeof H==="object"&&!tV(H)&&!sV(H)&&!eV(H)){let Y=rV(K);X=Y.signal,M=Y.end}K3(K,(Y,U)=>{if(Y)Z(Y);else J(U)},{signal:X,end:M})})}yM.exports={finished:J3,pipeline:Z3}});var PJ=O((NO,bM)=>{var{Buffer:X3}=S("buffer"),{ObjectDefineProperty:q1,ObjectKeys:gM,ReflectApply:uM}=e(),{promisify:{custom:mM}}=W0(),{streamReturningOperators:hM,promiseReturningOperators:vM}=kM(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:fM}}=I0(),M3=$J(),{setDefaultHighWaterMark:H3,getDefaultHighWaterMark:Y3}=O8(),{pipeline:cM}=_K(),{destroyer:U3}=x1(),dM=U1(),FJ=WJ(),x8=a0(),a=bM.exports=YK().Stream;a.isDestroyed=x8.isDestroyed;a.isDisturbed=x8.isDisturbed;a.isErrored=x8.isErrored;a.isReadable=x8.isReadable;a.isWritable=x8.isWritable;a.Readable=C8();for(let K of gM(hM)){let Z=function(...X){if(new.target)throw fM();return a.Readable.from(uM(J,this,X))};z3=Z;let J=hM[K];q1(Z,"name",{__proto__:null,value:J.name}),q1(Z,"length",{__proto__:null,value:J.length}),q1(a.Readable.prototype,K,{__proto__:null,value:Z,enumerable:!1,configurable:!0,writable:!0})}var z3;for(let K of gM(vM)){let Z=function(...M){if(new.target)throw fM();return uM(J,this,M)};z3=Z;let J=vM[K];q1(Z,"name",{__proto__:null,value:J.name}),q1(Z,"length",{__proto__:null,value:J.length}),q1(a.Readable.prototype,K,{__proto__:null,value:Z,enumerable:!1,configurable:!0,writable:!0})}var z3;a.Writable=IK();a.Duplex=t0();a.Transform=t9();a.PassThrough=KJ();a.pipeline=cM;var{addAbortSignal:G3}=I8();a.addAbortSignal=G3;a.finished=dM;a.destroy=U3;a.compose=M3;a.setDefaultHighWaterMark=H3;a.getDefaultHighWaterMark=Y3;q1(a,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return FJ}});q1(cM,mM,{__proto__:null,enumerable:!0,get(){return FJ.pipeline}});q1(dM,mM,{__proto__:null,enumerable:!0,get(){return FJ.finished}});a.Stream=a;a._isUint8Array=function K(J){return J instanceof Uint8Array};a._uint8ArrayToBuffer=function K(J){return X3.from(J.buffer,J.byteOffset,J.byteLength)}});var pM=O((CO,m)=>{var X0=S("stream");if(X0&&process.env.READABLE_STREAM==="disable"){let K=X0.promises;m.exports._uint8ArrayToBuffer=X0._uint8ArrayToBuffer,m.exports._isUint8Array=X0._isUint8Array,m.exports.isDisturbed=X0.isDisturbed,m.exports.isErrored=X0.isErrored,m.exports.isReadable=X0.isReadable,m.exports.Readable=X0.Readable,m.exports.Writable=X0.Writable,m.exports.Duplex=X0.Duplex,m.exports.Transform=X0.Transform,m.exports.PassThrough=X0.PassThrough,m.exports.addAbortSignal=X0.addAbortSignal,m.exports.finished=X0.finished,m.exports.destroy=X0.destroy,m.exports.pipeline=X0.pipeline,m.exports.compose=X0.compose,Object.defineProperty(X0,"promises",{configurable:!0,enumerable:!0,get(){return K}}),m.exports.Stream=X0.Stream}else{let K=PJ(),J=WJ(),Z=K.Readable.destroy;m.exports=K.Readable,m.exports._uint8ArrayToBuffer=K._uint8ArrayToBuffer,m.exports._isUint8Array=K._isUint8Array,m.exports.isDisturbed=K.isDisturbed,m.exports.isErrored=K.isErrored,m.exports.isReadable=K.isReadable,m.exports.Readable=K.Readable,m.exports.Writable=K.Writable,m.exports.Duplex=K.Duplex,m.exports.Transform=K.Transform,m.exports.PassThrough=K.PassThrough,m.exports.addAbortSignal=K.addAbortSignal,m.exports.finished=K.finished,m.exports.destroy=K.destroy,m.exports.destroy=Z,m.exports.pipeline=K.pipeline,m.exports.compose=K.compose,Object.defineProperty(K,"promises",{configurable:!0,enumerable:!0,get(){return J}}),m.exports.Stream=K.Stream}m.exports.default=m.exports});var lM=O((uO,TJ)=>{if(typeof Object.create==="function")TJ.exports=function K(J,Z){if(Z)J.super_=Z,J.prototype=Object.create(Z.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}})};else TJ.exports=function K(J,Z){if(Z){J.super_=Z;var X=function(){};X.prototype=Z.prototype,J.prototype=new X,J.prototype.constructor=J}}});var iM=O((mO,OJ)=>{try{if(IJ=S("util"),typeof IJ.inherits!=="function")throw"";OJ.exports=IJ.inherits}catch(K){OJ.exports=lM()}var IJ});var rM=O((fO,oM)=>{var{Buffer:p0}=S("buffer"),nM=Symbol.for("BufferList");function i(K){if(!(this instanceof i))return new i(K);i._init.call(this,K)}i._init=function K(J){if(Object.defineProperty(this,nM,{value:!0}),this._bufs=[],this.length=0,J)this.append(J)};i.prototype._new=function K(J){return new i(J)};i.prototype._offset=function K(J){if(J===0)return[0,0];let Z=0;for(let X=0;X<this._bufs.length;X++){let M=Z+this._bufs[X].length;if(J<M||X===this._bufs.length-1)return[X,J-Z];Z=M}};i.prototype._reverseOffset=function(K){let J=K[0],Z=K[1];for(let X=0;X<J;X++)Z+=this._bufs[X].length;return Z};i.prototype.get=function K(J){if(J>this.length||J<0)return;let Z=this._offset(J);return this._bufs[Z[0]][Z[1]]};i.prototype.slice=function K(J,Z){if(typeof J==="number"&&J<0)J+=this.length;if(typeof Z==="number"&&Z<0)Z+=this.length;return this.copy(null,0,J,Z)};i.prototype.copy=function K(J,Z,X,M){if(typeof X!=="number"||X<0)X=0;if(typeof M!=="number"||M>this.length)M=this.length;if(X>=this.length)return J||p0.alloc(0);if(M<=0)return J||p0.alloc(0);let H=!!J,Y=this._offset(X),U=M-X,G=U,z=H&&Z||0,q=Y[1];if(X===0&&M===this.length){if(!H)return this._bufs.length===1?this._bufs[0]:p0.concat(this._bufs,this.length);for(let $=0;$<this._bufs.length;$++)this._bufs[$].copy(J,z),z+=this._bufs[$].length;return J}if(G<=this._bufs[Y[0]].length-q)return H?this._bufs[Y[0]].copy(J,Z,q,q+G):this._bufs[Y[0]].slice(q,q+G);if(!H)J=p0.allocUnsafe(U);for(let $=Y[0];$<this._bufs.length;$++){let V=this._bufs[$].length-q;if(G>V)this._bufs[$].copy(J,z,q),z+=V;else{this._bufs[$].copy(J,z,q,q+G),z+=V;break}if(G-=V,q)q=0}if(J.length>z)return J.slice(0,z);return J};i.prototype.shallowSlice=function K(J,Z){if(J=J||0,Z=typeof Z!=="number"?this.length:Z,J<0)J+=this.length;if(Z<0)Z+=this.length;if(J===Z)return this._new();let X=this._offset(J),M=this._offset(Z),H=this._bufs.slice(X[0],M[0]+1);if(M[1]===0)H.pop();else H[H.length-1]=H[H.length-1].slice(0,M[1]);if(X[1]!==0)H[0]=H[0].slice(X[1]);return this._new(H)};i.prototype.toString=function K(J,Z,X){return this.slice(Z,X).toString(J)};i.prototype.consume=function K(J){if(J=Math.trunc(J),Number.isNaN(J)||J<=0)return this;while(this._bufs.length)if(J>=this._bufs[0].length)J-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(J),this.length-=J;break}return this};i.prototype.duplicate=function K(){let J=this._new();for(let Z=0;Z<this._bufs.length;Z++)J.append(this._bufs[Z]);return J};i.prototype.append=function K(J){if(J==null)return this;if(J.buffer)this._appendBuffer(p0.from(J.buffer,J.byteOffset,J.byteLength));else if(Array.isArray(J))for(let Z=0;Z<J.length;Z++)this.append(J[Z]);else if(this._isBufferList(J))for(let Z=0;Z<J._bufs.length;Z++)this.append(J._bufs[Z]);else{if(typeof J==="number")J=J.toString();this._appendBuffer(p0.from(J))}return this};i.prototype._appendBuffer=function K(J){this._bufs.push(J),this.length+=J.length};i.prototype.indexOf=function(K,J,Z){if(Z===void 0&&typeof J==="string")Z=J,J=void 0;if(typeof K==="function"||Array.isArray(K))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');else if(typeof K==="number")K=p0.from([K]);else if(typeof K==="string")K=p0.from(K,Z);else if(this._isBufferList(K))K=K.slice();else if(Array.isArray(K.buffer))K=p0.from(K.buffer,K.byteOffset,K.byteLength);else if(!p0.isBuffer(K))K=p0.from(K);if(J=Number(J||0),isNaN(J))J=0;if(J<0)J=this.length+J;if(J<0)J=0;if(K.length===0)return J>this.length?this.length:J;let X=this._offset(J),M=X[0],H=X[1];for(;M<this._bufs.length;M++){let Y=this._bufs[M];while(H<Y.length)if(Y.length-H>=K.length){let G=Y.indexOf(K,H);if(G!==-1)return this._reverseOffset([M,G]);H=Y.length-K.length+1}else{let G=this._reverseOffset([M,H]);if(this._match(G,K))return G;H++}H=0}return-1};i.prototype._match=function(K,J){if(this.length-K<J.length)return!1;for(let Z=0;Z<J.length;Z++)if(this.get(K+Z)!==J[Z])return!1;return!0};(function(){let K={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let J in K)(function(Z){if(K[Z]===null)i.prototype[Z]=function(X,M){return this.slice(X,X+M)[Z](0,M)};else i.prototype[Z]=function(X=0){return this.slice(X,X+K[Z])[Z](0)}})(J)})();i.prototype._isBufferList=function K(J){return J instanceof i||i.isBufferList(J)};i.isBufferList=function K(J){return J!=null&&J[nM]};oM.exports=i});var aM=O((cO,jK)=>{var NJ=pM().Duplex,q3=iM(),R8=rM();function F0(K){if(!(this instanceof F0))return new F0(K);if(typeof K==="function"){this._callback=K;let J=function Z(X){if(this._callback)this._callback(X),this._callback=null}.bind(this);this.on("pipe",function Z(X){X.on("error",J)}),this.on("unpipe",function Z(X){X.removeListener("error",J)}),K=null}R8._init.call(this,K),NJ.call(this)}q3(F0,NJ);Object.assign(F0.prototype,R8.prototype);F0.prototype._new=function K(J){return new F0(J)};F0.prototype._write=function K(J,Z,X){if(this._appendBuffer(J),typeof X==="function")X()};F0.prototype._read=function K(J){if(!this.length)return this.push(null);J=Math.min(J,this.length),this.push(this.slice(0,J)),this.consume(J)};F0.prototype.end=function K(J){if(NJ.prototype.end.call(this,J),this._callback)this._callback(null,this.slice()),this._callback=null};F0.prototype._destroy=function K(J,Z){this._bufs.length=0,this.length=0,Z(J)};F0.prototype._isBufferList=function K(J){return J instanceof F0||J instanceof R8||F0.isBufferList(J)};F0.isBufferList=R8.isBufferList;jK.exports=F0;jK.exports.BufferListStream=F0;jK.exports.BufferList=R8});var eM=O((dO,tM)=>{class sM{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}tM.exports=sM});var CJ=O((bO,KH)=>{var D=bO,{Buffer:C0}=S("buffer");D.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"};D.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0};D.requiredHeaderFlagsErrors={};for(let K in D.requiredHeaderFlags){let J=D.requiredHeaderFlags[K];D.requiredHeaderFlagsErrors[K]="Invalid header flag bits, must be 0x"+J.toString(16)+" for "+D.types[K]+" packet"}D.codes={};for(let K in D.types){let J=D.types[K];D.codes[J]=K}D.CMD_SHIFT=4;D.CMD_MASK=240;D.DUP_MASK=8;D.QOS_MASK=3;D.QOS_SHIFT=1;D.RETAIN_MASK=1;D.VARBYTEINT_MASK=127;D.VARBYTEINT_FIN_MASK=128;D.VARBYTEINT_MAX=268435455;D.SESSIONPRESENT_MASK=1;D.SESSIONPRESENT_HEADER=C0.from([D.SESSIONPRESENT_MASK]);D.CONNACK_HEADER=C0.from([D.codes.connack<<D.CMD_SHIFT]);D.USERNAME_MASK=128;D.PASSWORD_MASK=64;D.WILL_RETAIN_MASK=32;D.WILL_QOS_MASK=24;D.WILL_QOS_SHIFT=3;D.WILL_FLAG_MASK=4;D.CLEAN_SESSION_MASK=2;D.CONNECT_HEADER=C0.from([D.codes.connect<<D.CMD_SHIFT]);D.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11};D.propertiesCodes={};for(let K in D.properties){let J=D.properties[K];D.propertiesCodes[J]=K}D.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function I1(K){return[0,1,2].map((J)=>{return[0,1].map((Z)=>{return[0,1].map((X)=>{let M=C0.alloc(1);return M.writeUInt8(D.codes[K]<<D.CMD_SHIFT|(Z?D.DUP_MASK:0)|J<<D.QOS_SHIFT|X,0,!0),M})})})}D.PUBLISH_HEADER=I1("publish");D.SUBSCRIBE_HEADER=I1("subscribe");D.SUBSCRIBE_OPTIONS_QOS_MASK=3;D.SUBSCRIBE_OPTIONS_NL_MASK=1;D.SUBSCRIBE_OPTIONS_NL_SHIFT=2;D.SUBSCRIBE_OPTIONS_RAP_MASK=1;D.SUBSCRIBE_OPTIONS_RAP_SHIFT=3;D.SUBSCRIBE_OPTIONS_RH_MASK=3;D.SUBSCRIBE_OPTIONS_RH_SHIFT=4;D.SUBSCRIBE_OPTIONS_RH=[0,16,32];D.SUBSCRIBE_OPTIONS_NL=4;D.SUBSCRIBE_OPTIONS_RAP=8;D.SUBSCRIBE_OPTIONS_QOS=[0,1,2];D.UNSUBSCRIBE_HEADER=I1("unsubscribe");D.ACKS={unsuback:I1("unsuback"),puback:I1("puback"),pubcomp:I1("pubcomp"),pubrel:I1("pubrel"),pubrec:I1("pubrec")};D.SUBACK_HEADER=C0.from([D.codes.suback<<D.CMD_SHIFT]);D.VERSION3=C0.from([3]);D.VERSION4=C0.from([4]);D.VERSION5=C0.from([5]);D.VERSION131=C0.from([131]);D.VERSION132=C0.from([132]);D.QOS=[0,1,2].map((K)=>{return C0.from([K])});D.EMPTY={pingreq:C0.from([D.codes.pingreq<<4,0]),pingresp:C0.from([D.codes.pingresp<<4,0]),disconnect:C0.from([D.codes.disconnect<<4,0])};D.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"};D.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"};D.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};D.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"};D.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};D.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}});var ZH=O((pO,JH)=>{var Y8=1000,U8=Y8*60,G8=U8*60,v1=G8*24,$3=v1*7,Q3=v1*365.25;JH.exports=function(K,J){J=J||{};var Z=typeof K;if(Z==="string"&&K.length>0)return V3(K);else if(Z==="number"&&isFinite(K))return J.long?P3(K):W3(K);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(K))};function V3(K){if(K=String(K),K.length>100)return;var J=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(K);if(!J)return;var Z=parseFloat(J[1]),X=(J[2]||"ms").toLowerCase();switch(X){case"years":case"year":case"yrs":case"yr":case"y":return Z*Q3;case"weeks":case"week":case"w":return Z*$3;case"days":case"day":case"d":return Z*v1;case"hours":case"hour":case"hrs":case"hr":case"h":return Z*G8;case"minutes":case"minute":case"mins":case"min":case"m":return Z*U8;case"seconds":case"second":case"secs":case"sec":case"s":return Z*Y8;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Z;default:return}}function W3(K){var J=Math.abs(K);if(J>=v1)return Math.round(K/v1)+"d";if(J>=G8)return Math.round(K/G8)+"h";if(J>=U8)return Math.round(K/U8)+"m";if(J>=Y8)return Math.round(K/Y8)+"s";return K+"ms"}function P3(K){var J=Math.abs(K);if(J>=v1)return xK(K,J,v1,"day");if(J>=G8)return xK(K,J,G8,"hour");if(J>=U8)return xK(K,J,U8,"minute");if(J>=Y8)return xK(K,J,Y8,"second");return K+" ms"}function xK(K,J,Z,X){var M=J>=Z*1.5;return Math.round(K/Z)+" "+X+(M?"s":"")}});var _J=O((lO,XH)=>{function F3(K){Z.debug=Z,Z.default=Z,Z.coerce=G,Z.disable=H,Z.enable=M,Z.enabled=Y,Z.humanize=ZH(),Z.destroy=z,Object.keys(K).forEach((q)=>{Z[q]=K[q]}),Z.names=[],Z.skips=[],Z.formatters={};function J(q){let $=0;for(let V=0;V<q.length;V++)$=($<<5)-$+q.charCodeAt(V),$|=0;return Z.colors[Math.abs($)%Z.colors.length]}Z.selectColor=J;function Z(q){let $,V=null,W,x;function _(...j){if(!_.enabled)return;let A=_,B=Number(new Date),p=B-($||B);if(A.diff=p,A.prev=$,A.curr=B,$=B,j[0]=Z.coerce(j[0]),typeof j[0]!=="string")j.unshift("%O");let v=0;j[0]=j[0].replace(/%([a-zA-Z%])/g,(L0,U0)=>{if(L0==="%%")return"%";v++;let g0=Z.formatters[U0];if(typeof g0==="function"){let M0=j[v];L0=g0.call(A,M0),j.splice(v,1),v--}return L0}),Z.formatArgs.call(A,j),(A.log||Z.log).apply(A,j)}if(_.namespace=q,_.useColors=Z.useColors(),_.color=Z.selectColor(q),_.extend=X,_.destroy=Z.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(V!==null)return V;if(W!==Z.namespaces)W=Z.namespaces,x=Z.enabled(q);return x},set:(j)=>{V=j}}),typeof Z.init==="function")Z.init(_);return _}function X(q,$){let V=Z(this.namespace+(typeof $==="undefined"?":":$)+q);return V.log=this.log,V}function M(q){Z.save(q),Z.namespaces=q,Z.names=[],Z.skips=[];let $,V=(typeof q==="string"?q:"").split(/[\s,]+/),W=V.length;for($=0;$<W;$++){if(!V[$])continue;if(q=V[$].replace(/\*/g,".*?"),q[0]==="-")Z.skips.push(new RegExp("^"+q.slice(1)+"$"));else Z.names.push(new RegExp("^"+q+"$"))}}function H(){let q=[...Z.names.map(U),...Z.skips.map(U).map(($)=>"-"+$)].join(",");return Z.enable(""),q}function Y(q){if(q[q.length-1]==="*")return!0;let $,V;for($=0,V=Z.skips.length;$<V;$++)if(Z.skips[$].test(q))return!1;for($=0,V=Z.names.length;$<V;$++)if(Z.names[$].test(q))return!0;return!1}function U(q){return q.toString().substring(2,q.toString().length-2).replace(/\.\*\?$/,"*")}function G(q){if(q instanceof Error)return q.stack||q.message;return q}function z(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return Z.enable(Z.load()),Z}XH.exports=F3});var HH=O((MH,BK)=>{MH.formatArgs=I3;MH.save=O3;MH.load=N3;MH.useColors=T3;MH.storage=C3();MH.destroy=(()=>{let K=!1;return()=>{if(!K)K=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();MH.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function T3(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let K;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&(K=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(K[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function I3(K){if(K[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+K[0]+(this.useColors?"%c ":" ")+"+"+BK.exports.humanize(this.diff),!this.useColors)return;let J="color: "+this.color;K.splice(1,0,J,"color: inherit");let Z=0,X=0;K[0].replace(/%[a-zA-Z%]/g,(M)=>{if(M==="%%")return;if(Z++,M==="%c")X=Z}),K.splice(X,0,J)}MH.log=console.debug||console.log||(()=>{});function O3(K){try{if(K)MH.storage.setItem("debug",K);else MH.storage.removeItem("debug")}catch(J){}}function N3(){let K;try{K=MH.storage.getItem("debug")}catch(J){}if(!K&&typeof process!=="undefined"&&"env"in process)K=process.env.DEBUG;return K}function C3(){try{return localStorage}catch(K){}}BK.exports=_J()(MH);var{formatters:_3}=BK.exports;_3.j=function(K){try{return JSON.stringify(K)}catch(J){return"[UnexpectedJSONParseError]: "+J.message}}});var UH=O((nO,YH)=>{YH.exports=(K,J=process.argv)=>{let Z=K.startsWith("-")?"":K.length===1?"-":"--",X=J.indexOf(Z+K),M=J.indexOf("--");return X!==-1&&(M===-1||X<M)}});var qH=O((oO,zH)=>{var B3=S("os"),GH=S("tty"),S0=UH(),{env:H0}=process,O1;if(S0("no-color")||S0("no-colors")||S0("color=false")||S0("color=never"))O1=0;else if(S0("color")||S0("colors")||S0("color=true")||S0("color=always"))O1=1;if("FORCE_COLOR"in H0)if(H0.FORCE_COLOR==="true")O1=1;else if(H0.FORCE_COLOR==="false")O1=0;else O1=H0.FORCE_COLOR.length===0?1:Math.min(parseInt(H0.FORCE_COLOR,10),3);function AJ(K){if(K===0)return!1;return{level:K,hasBasic:!0,has256:K>=2,has16m:K>=3}}function LJ(K,J){if(O1===0)return 0;if(S0("color=16m")||S0("color=full")||S0("color=truecolor"))return 3;if(S0("color=256"))return 2;if(K&&!J&&O1===void 0)return 0;let Z=O1||0;if(H0.TERM==="dumb")return Z;if(process.platform==="win32"){let X=B3.release().split(".");if(Number(X[0])>=10&&Number(X[2])>=10586)return Number(X[2])>=14931?3:2;return 1}if("CI"in H0){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((X)=>(X in H0))||H0.CI_NAME==="codeship")return 1;return Z}if("TEAMCITY_VERSION"in H0)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(H0.TEAMCITY_VERSION)?1:0;if(H0.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in H0){let X=parseInt((H0.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(H0.TERM_PROGRAM){case"iTerm.app":return X>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(H0.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(H0.TERM))return 1;if("COLORTERM"in H0)return 1;return Z}function w3(K){let J=LJ(K,K&&K.isTTY);return AJ(J)}zH.exports={supportsColor:w3,stdout:AJ(LJ(!0,GH.isatty(1))),stderr:AJ(LJ(!0,GH.isatty(2)))}});var WH=O((QH,SK)=>{var S3=S("tty"),wK=S("util");QH.init=m3;QH.log=v3;QH.formatArgs=y3;QH.save=g3;QH.load=u3;QH.useColors=k3;QH.destroy=wK.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");QH.colors=[6,2,3,4,5,1];try{let K=qH();if(K&&(K.stderr||K).level>=2)QH.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(K){}QH.inspectOpts=Object.keys(process.env).filter((K)=>{return/^debug_/i.test(K)}).reduce((K,J)=>{let Z=J.substring(6).toLowerCase().replace(/_([a-z])/g,(M,H)=>{return H.toUpperCase()}),X=process.env[J];if(/^(yes|on|true|enabled)$/i.test(X))X=!0;else if(/^(no|off|false|disabled)$/i.test(X))X=!1;else if(X==="null")X=null;else X=Number(X);return K[Z]=X,K},{});function k3(){return"colors"in QH.inspectOpts?Boolean(QH.inspectOpts.colors):S3.isatty(process.stderr.fd)}function y3(K){let{namespace:J,useColors:Z}=this;if(Z){let X=this.color,M="\x1B[3"+(X<8?X:"8;5;"+X),H=`  ${M};1m${J} \x1B[0m`;K[0]=H+K[0].split("\n").join("\n"+H),K.push(M+"m+"+SK.exports.humanize(this.diff)+"\x1B[0m")}else K[0]=h3()+J+" "+K[0]}function h3(){if(QH.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function v3(...K){return process.stderr.write(wK.formatWithOptions(QH.inspectOpts,...K)+"\n")}function g3(K){if(K)process.env.DEBUG=K;else delete process.env.DEBUG}function u3(){return process.env.DEBUG}function m3(K){K.inspectOpts={};let J=Object.keys(QH.inspectOpts);for(let Z=0;Z<J.length;Z++)K.inspectOpts[J[Z]]=QH.inspectOpts[J[Z]]}SK.exports=_J()(QH);var{formatters:$H}=SK.exports;$H.o=function(K){return this.inspectOpts.colors=this.useColors,wK.inspect(K,this.inspectOpts).split("\n").map((J)=>J.trim()).join(" ")};$H.O=function(K){return this.inspectOpts.colors=this.useColors,wK.inspect(K,this.inspectOpts)}});var DJ=O((aO,EJ)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)EJ.exports=HH();else EJ.exports=WH()});var TH=O((sO,FH)=>{var n3=aM(),{EventEmitter:o3}=S("events"),PH=eM(),c=CJ(),y=DJ()("mqtt-packet:parser");class kK extends o3{constructor(){super();this.parser=this.constructor.parser}static parser(K){if(!(this instanceof kK))return new kK().parser(K);return this.settings=K||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this}_resetState(){y("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new PH,this.error=null,this._list=n3(),this._stateCounter=0}parse(K){if(this.error)this._resetState();this._list.append(K),y("parse: current state: %s",this._states[this._stateCounter]);while((this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error)if(this._stateCounter++,y("parse: state complete. _stateCounter is now: %d",this._stateCounter),y("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length)this._stateCounter=0;return y("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let K=this._list.readUInt8(0),J=K>>c.CMD_SHIFT;this.packet.cmd=c.types[J];let Z=K&15,X=c.requiredHeaderFlags[J];if(X!=null&&Z!==X)return this._emitError(new Error(c.requiredHeaderFlagsErrors[J]));if(this.packet.retain=(K&c.RETAIN_MASK)!==0,this.packet.qos=K>>c.QOS_SHIFT&c.QOS_MASK,this.packet.qos>2)return this._emitError(new Error("Packet must not have both QoS bits set to 1"));return this.packet.dup=(K&c.DUP_MASK)!==0,y("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){let K=this._parseVarByteNum(!0);if(K)this.packet.length=K.value,this._list.consume(K.bytes);return y("_parseLength %d",K.value),!!K}_parsePayload(){y("_parsePayload: payload %O",this._list);let K=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}K=!0}return y("_parsePayload complete result: %s",K),K}_parseConnect(){y("_parseConnect");let K,J,Z,X,M={},H=this.packet,Y=this._parseString();if(Y===null)return this._emitError(new Error("Cannot parse protocolId"));if(Y!=="MQTT"&&Y!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(H.protocolId=Y,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(H.protocolVersion=this._list.readUInt8(this._pos),H.protocolVersion>=128)H.bridgeMode=!0,H.protocolVersion=H.protocolVersion-128;if(H.protocolVersion!==3&&H.protocolVersion!==4&&H.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));M.username=this._list.readUInt8(this._pos)&c.USERNAME_MASK,M.password=this._list.readUInt8(this._pos)&c.PASSWORD_MASK,M.will=this._list.readUInt8(this._pos)&c.WILL_FLAG_MASK;let U=!!(this._list.readUInt8(this._pos)&c.WILL_RETAIN_MASK),G=(this._list.readUInt8(this._pos)&c.WILL_QOS_MASK)>>c.WILL_QOS_SHIFT;if(M.will)H.will={},H.will.retain=U,H.will.qos=G;else{if(U)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(G)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(H.clean=(this._list.readUInt8(this._pos)&c.CLEAN_SESSION_MASK)!==0,this._pos++,H.keepalive=this._parseNum(),H.keepalive===-1)return this._emitError(new Error("Packet too short"));if(H.protocolVersion===5){let q=this._parseProperties();if(Object.getOwnPropertyNames(q).length)H.properties=q}let z=this._parseString();if(z===null)return this._emitError(new Error("Packet too short"));if(H.clientId=z,y("_parseConnect: packet.clientId: %s",H.clientId),M.will){if(H.protocolVersion===5){let q=this._parseProperties();if(Object.getOwnPropertyNames(q).length)H.will.properties=q}if(K=this._parseString(),K===null)return this._emitError(new Error("Cannot parse will topic"));if(H.will.topic=K,y("_parseConnect: packet.will.topic: %s",H.will.topic),J=this._parseBuffer(),J===null)return this._emitError(new Error("Cannot parse will payload"));H.will.payload=J,y("_parseConnect: packet.will.paylaod: %s",H.will.payload)}if(M.username){if(X=this._parseString(),X===null)return this._emitError(new Error("Cannot parse username"));H.username=X,y("_parseConnect: packet.username: %s",H.username)}if(M.password){if(Z=this._parseBuffer(),Z===null)return this._emitError(new Error("Cannot parse password"));H.password=Z}return this.settings=H,y("_parseConnect: complete"),H}_parseConnack(){y("_parseConnack");let K=this.packet;if(this._list.length<1)return null;let J=this._list.readUInt8(this._pos++);if(J>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(K.sessionPresent=!!(J&c.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)if(this._list.length>=2)K.reasonCode=this._list.readUInt8(this._pos++);else K.reasonCode=0;else{if(this._list.length<2)return null;K.returnCode=this._list.readUInt8(this._pos++)}if(K.returnCode===-1||K.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let Z=this._parseProperties();if(Object.getOwnPropertyNames(Z).length)K.properties=Z}y("_parseConnack: complete")}_parsePublish(){y("_parsePublish");let K=this.packet;if(K.topic=this._parseString(),K.topic===null)return this._emitError(new Error("Cannot parse topic"));if(K.qos>0){if(!this._parseMessageId())return}if(this.settings.protocolVersion===5){let J=this._parseProperties();if(Object.getOwnPropertyNames(J).length)K.properties=J}K.payload=this._list.slice(this._pos,K.length),y("_parsePublish: payload from buffer list: %o",K.payload)}_parseSubscribe(){y("_parseSubscribe");let K=this.packet,J,Z,X,M,H,Y,U;if(K.subscriptions=[],!this._parseMessageId())return;if(this.settings.protocolVersion===5){let G=this._parseProperties();if(Object.getOwnPropertyNames(G).length)K.properties=G}if(K.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));while(this._pos<K.length){if(J=this._parseString(),J===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=K.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(Z=this._parseByte(),this.settings.protocolVersion===5){if(Z&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(Z&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(X=Z&c.SUBSCRIBE_OPTIONS_QOS_MASK,X>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(Y=(Z>>c.SUBSCRIBE_OPTIONS_NL_SHIFT&c.SUBSCRIBE_OPTIONS_NL_MASK)!==0,H=(Z>>c.SUBSCRIBE_OPTIONS_RAP_SHIFT&c.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,M=Z>>c.SUBSCRIBE_OPTIONS_RH_SHIFT&c.SUBSCRIBE_OPTIONS_RH_MASK,M>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));if(U={topic:J,qos:X},this.settings.protocolVersion===5)U.nl=Y,U.rap=H,U.rh=M;else if(this.settings.bridgeMode)U.rh=0,U.rap=!0,U.nl=!0;y("_parseSubscribe: push subscription `%s` to subscription",U),K.subscriptions.push(U)}}_parseSuback(){y("_parseSuback");let K=this.packet;if(this.packet.granted=[],!this._parseMessageId())return;if(this.settings.protocolVersion===5){let J=this._parseProperties();if(Object.getOwnPropertyNames(J).length)K.properties=J}if(K.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));while(this._pos<this.packet.length){let J=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!c.MQTT5_SUBACK_CODES[J])return this._emitError(new Error("Invalid suback code"))}else if(J>2&&J!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(J)}}_parseUnsubscribe(){y("_parseUnsubscribe");let K=this.packet;if(K.unsubscriptions=[],!this._parseMessageId())return;if(this.settings.protocolVersion===5){let J=this._parseProperties();if(Object.getOwnPropertyNames(J).length)K.properties=J}if(K.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));while(this._pos<K.length){let J=this._parseString();if(J===null)return this._emitError(new Error("Cannot parse topic"));y("_parseUnsubscribe: push topic `%s` to unsubscriptions",J),K.unsubscriptions.push(J)}}_parseUnsuback(){y("_parseUnsuback");let K=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&K.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(K.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let J=this._parseProperties();if(Object.getOwnPropertyNames(J).length)K.properties=J;K.granted=[];while(this._pos<this.packet.length){let Z=this._list.readUInt8(this._pos++);if(!c.MQTT5_UNSUBACK_CODES[Z])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(Z)}}}_parseConfirmation(){y("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let K=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(K.length>2){switch(K.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!c.MQTT5_PUBACK_PUBREC_CODES[K.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!c.MQTT5_PUBREL_PUBCOMP_CODES[K.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}y("_parseConfirmation: packet.reasonCode `%d`",K.reasonCode)}else K.reasonCode=0;if(K.length>3){let J=this._parseProperties();if(Object.getOwnPropertyNames(J).length)K.properties=J}}return!0}_parseDisconnect(){let K=this.packet;if(y("_parseDisconnect"),this.settings.protocolVersion===5){if(this._list.length>0){if(K.reasonCode=this._parseByte(),!c.MQTT5_DISCONNECT_CODES[K.reasonCode])this._emitError(new Error("Invalid disconnect reason code"))}else K.reasonCode=0;let J=this._parseProperties();if(Object.getOwnPropertyNames(J).length)K.properties=J}return y("_parseDisconnect result: true"),!0}_parseAuth(){y("_parseAuth");let K=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(K.reasonCode=this._parseByte(),!c.MQTT5_AUTH_CODES[K.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let J=this._parseProperties();if(Object.getOwnPropertyNames(J).length)K.properties=J;return y("_parseAuth: result: true"),!0}_parseMessageId(){let K=this.packet;if(K.messageId=this._parseNum(),K.messageId===null)return this._emitError(new Error("Cannot parse messageId")),!1;return y("_parseMessageId: packet.messageId %d",K.messageId),!0}_parseString(K){let J=this._parseNum(),Z=J+this._pos;if(J===-1||Z>this._list.length||Z>this.packet.length)return null;let X=this._list.toString("utf8",this._pos,Z);return this._pos+=J,y("_parseString: result: %s",X),X}_parseStringPair(){return y("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let K=this._parseNum(),J=K+this._pos;if(K===-1||J>this._list.length||J>this.packet.length)return null;let Z=this._list.slice(this._pos,J);return this._pos+=K,y("_parseBuffer: result: %o",Z),Z}_parseNum(){if(this._list.length-this._pos<2)return-1;let K=this._list.readUInt16BE(this._pos);return this._pos+=2,y("_parseNum: result: %s",K),K}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let K=this._list.readUInt32BE(this._pos);return this._pos+=4,y("_parse4ByteNum: result: %s",K),K}_parseVarByteNum(K){y("_parseVarByteNum");let J=4,Z=0,X=1,M=0,H=!1,Y,U=this._pos?this._pos:0;while(Z<J&&U+Z<this._list.length){if(Y=this._list.readUInt8(U+Z++),M+=X*(Y&c.VARBYTEINT_MASK),X*=128,(Y&c.VARBYTEINT_FIN_MASK)===0){H=!0;break}if(this._list.length<=Z)break}if(!H&&Z===J&&this._list.length>=Z)this._emitError(new Error("Invalid variable byte integer"));if(U)this._pos+=Z;if(H)if(K)H={bytes:Z,value:M};else H=M;else H=!1;return y("_parseVarByteNum: result: %o",H),H}_parseByte(){let K;if(this._pos<this._list.length)K=this._list.readUInt8(this._pos),this._pos++;return y("_parseByte: result: %o",K),K}_parseByType(K){switch(y("_parseByType: type: %s",K),K){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){y("_parseProperties");let K=this._parseVarByteNum(),Z=this._pos+K,X={};while(this._pos<Z){let M=this._parseByte();if(!M)return this._emitError(new Error("Cannot parse property code type")),!1;let H=c.propertiesCodes[M];if(!H)return this._emitError(new Error("Unknown property")),!1;if(H==="userProperties"){if(!X[H])X[H]=Object.create(null);let Y=this._parseByType(c.propertiesTypes[H]);if(X[H][Y.name])if(Array.isArray(X[H][Y.name]))X[H][Y.name].push(Y.value);else{let U=X[H][Y.name];X[H][Y.name]=[U],X[H][Y.name].push(Y.value)}else X[H][Y.name]=Y.value;continue}if(X[H])if(Array.isArray(X[H]))X[H].push(this._parseByType(c.propertiesTypes[H]));else X[H]=[X[H]],X[H].push(this._parseByType(c.propertiesTypes[H]));else X[H]=this._parseByType(c.propertiesTypes[H])}return X}_newPacket(){if(y("_newPacket"),this.packet)this._list.consume(this.packet.length),y("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet);return y("_newPacket: new packet"),this.packet=new PH,this._pos=0,!0}_emitError(K){y("_emitError",K),this.error=K,this.emit("error",K)}}FH.exports=kK});var CH=O((tO,NH)=>{var{Buffer:B8}=S("buffer"),IH={},r3=B8.isBuffer(B8.from([1,2]).subarray(0,1));function OH(K){let J=B8.allocUnsafe(2);return J.writeUInt8(K>>8,0),J.writeUInt8(K&255,1),J}function a3(){for(let K=0;K<65536;K++)IH[K]=OH(K)}function s3(K){let Z=0,X=0,M=B8.allocUnsafe(4);do{if(Z=K%128|0,K=K/128|0,K>0)Z=Z|128;M.writeUInt8(Z,X++)}while(K>0&&X<4);if(K>0)X=0;return r3?M.subarray(0,X):M.slice(0,X)}function t3(K){let J=B8.allocUnsafe(4);return J.writeUInt32BE(K,0),J}NH.exports={cache:IH,generateCache:a3,generateNumber:OH,genBufVariableByteInt:s3,generate4ByteBuffer:t3}});var _H=O((eO,jJ)=>{if(typeof process==="undefined"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0)jJ.exports={nextTick:e3};else jJ.exports=process;function e3(K,J,Z,X){if(typeof K!=="function")throw new TypeError('"callback" argument must be a function');var M=arguments.length,H,Y;switch(M){case 0:case 1:return process.nextTick(K);case 2:return process.nextTick(function U(){K.call(null,J)});case 3:return process.nextTick(function U(){K.call(null,J,Z)});case 4:return process.nextTick(function U(){K.call(null,J,Z,X)});default:H=new Array(M-1),Y=0;while(Y<H.length)H[Y++]=arguments[Y];return process.nextTick(function U(){K.apply(null,H)})}}});var BJ=O((KN,BH)=>{var h=CJ(),{Buffer:k}=S("buffer"),KW=k.allocUnsafe(0),JW=k.from([0]),w8=CH(),ZW=_H().nextTick,k0=DJ()("mqtt-packet:writeToStream"),yK=w8.cache,XW=w8.generateNumber,MW=w8.generateCache,xJ=w8.genBufVariableByteInt,HW=w8.generate4ByteBuffer,O0=RJ,hK=!0;function xH(K,J,Z){if(k0("generate called"),J.cork)J.cork(),ZW(YW,J);if(hK)hK=!1,MW();switch(k0("generate: packet.cmd: %s",K.cmd),K.cmd){case"connect":return UW(K,J,Z);case"connack":return GW(K,J,Z);case"publish":return zW(K,J,Z);case"puback":case"pubrec":case"pubrel":case"pubcomp":return qW(K,J,Z);case"subscribe":return $W(K,J,Z);case"suback":return QW(K,J,Z);case"unsubscribe":return VW(K,J,Z);case"unsuback":return WW(K,J,Z);case"pingreq":case"pingresp":return PW(K,J,Z);case"disconnect":return FW(K,J,Z);case"auth":return TW(K,J,Z);default:return J.destroy(new Error("Unknown command")),!1}}Object.defineProperty(xH,"cacheNumbers",{get(){return O0===RJ},set(K){if(K){if(!yK||Object.keys(yK).length===0)hK=!0;O0=RJ}else hK=!1,O0=IW}});function YW(K){K.uncork()}function UW(K,J,Z){let X=K||{},M=X.protocolId||"MQTT",H=X.protocolVersion||4,Y=X.will,U=X.clean,G=X.keepalive||0,z=X.clientId||"",q=X.username,$=X.password,V=X.properties;if(U===void 0)U=!0;let W=0;if(!M||typeof M!=="string"&&!k.isBuffer(M))return J.destroy(new Error("Invalid protocolId")),!1;else W+=M.length+2;if(H!==3&&H!==4&&H!==5)return J.destroy(new Error("Invalid protocol version")),!1;else W+=1;if((typeof z==="string"||k.isBuffer(z))&&(z||H>=4)&&(z||U))W+=k.byteLength(z)+2;else{if(H<4)return J.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(U*1===0)return J.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof G!=="number"||G<0||G>65535||G%1!==0)return J.destroy(new Error("Invalid keepalive")),!1;else W+=2;W+=1;let x,_;if(H===5){if(x=N1(J,V),!x)return!1;W+=x.length}if(Y){if(typeof Y!=="object")return J.destroy(new Error("Invalid will")),!1;if(!Y.topic||typeof Y.topic!=="string")return J.destroy(new Error("Invalid will topic")),!1;else W+=k.byteLength(Y.topic)+2;if(W+=2,Y.payload)if(Y.payload.length>=0)if(typeof Y.payload==="string")W+=k.byteLength(Y.payload);else W+=Y.payload.length;else return J.destroy(new Error("Invalid will payload")),!1;if(_={},H===5){if(_=N1(J,Y.properties),!_)return!1;W+=_.length}}let j=!1;if(q!=null)if(jH(q))j=!0,W+=k.byteLength(q)+2;else return J.destroy(new Error("Invalid username")),!1;if($!=null){if(!j)return J.destroy(new Error("Username is required to use password")),!1;if(jH($))W+=RH($)+2;else return J.destroy(new Error("Invalid password")),!1}if(J.write(h.CONNECT_HEADER),y0(J,W),z8(J,M),X.bridgeMode)H+=128;J.write(H===131?h.VERSION131:H===132?h.VERSION132:H===4?h.VERSION4:H===5?h.VERSION5:h.VERSION3);let A=0;if(A|=q!=null?h.USERNAME_MASK:0,A|=$!=null?h.PASSWORD_MASK:0,A|=Y&&Y.retain?h.WILL_RETAIN_MASK:0,A|=Y&&Y.qos?Y.qos<<h.WILL_QOS_SHIFT:0,A|=Y?h.WILL_FLAG_MASK:0,A|=U?h.CLEAN_SESSION_MASK:0,J.write(k.from([A])),O0(J,G),H===5)x.write();if(z8(J,z),Y){if(H===5)_.write();u1(J,Y.topic),z8(J,Y.payload)}if(q!=null)z8(J,q);if($!=null)z8(J,$);return!0}function GW(K,J,Z){let X=Z?Z.protocolVersion:4,M=K||{},H=X===5?M.reasonCode:M.returnCode,Y=M.properties,U=2;if(typeof H!=="number")return J.destroy(new Error("Invalid return code")),!1;let G=null;if(X===5){if(G=N1(J,Y),!G)return!1;U+=G.length}if(J.write(h.CONNACK_HEADER),y0(J,U),J.write(M.sessionPresent?h.SESSIONPRESENT_HEADER:JW),J.write(k.from([H])),G!=null)G.write();return!0}function zW(K,J,Z){k0("publish: packet: %o",K);let X=Z?Z.protocolVersion:4,M=K||{},H=M.qos||0,Y=M.retain?h.RETAIN_MASK:0,U=M.topic,G=M.payload||KW,z=M.messageId,q=M.properties,$=0;if(typeof U==="string")$+=k.byteLength(U)+2;else if(k.isBuffer(U))$+=U.length+2;else return J.destroy(new Error("Invalid topic")),!1;if(!k.isBuffer(G))$+=k.byteLength(G);else $+=G.length;if(H&&typeof z!=="number")return J.destroy(new Error("Invalid messageId")),!1;else if(H)$+=2;let V=null;if(X===5){if(V=N1(J,q),!V)return!1;$+=V.length}if(J.write(h.PUBLISH_HEADER[H][M.dup?1:0][Y?1:0]),y0(J,$),O0(J,RH(U)),J.write(U),H>0)O0(J,z);if(V!=null)V.write();return k0("publish: payload: %o",G),J.write(G)}function qW(K,J,Z){let X=Z?Z.protocolVersion:4,M=K||{},H=M.cmd||"puback",Y=M.messageId,U=M.dup&&H==="pubrel"?h.DUP_MASK:0,G=0,z=M.reasonCode,q=M.properties,$=X===5?3:2;if(H==="pubrel")G=1;if(typeof Y!=="number")return J.destroy(new Error("Invalid messageId")),!1;let V=null;if(X===5){if(typeof q==="object"){if(V=S8(J,q,Z,$),!V)return!1;$+=V.length}}if(J.write(h.ACKS[H][G][U][0]),$===3)$+=z!==0?1:-1;if(y0(J,$),O0(J,Y),X===5&&$!==2)J.write(k.from([z]));if(V!==null)V.write();else if($===4)J.write(k.from([0]));return!0}function $W(K,J,Z){k0("subscribe: packet: ");let X=Z?Z.protocolVersion:4,M=K||{},H=M.dup?h.DUP_MASK:0,Y=M.messageId,U=M.subscriptions,G=M.properties,z=0;if(typeof Y!=="number")return J.destroy(new Error("Invalid messageId")),!1;else z+=2;let q=null;if(X===5){if(q=N1(J,G),!q)return!1;z+=q.length}if(typeof U==="object"&&U.length)for(let V=0;V<U.length;V+=1){let W=U[V].topic,x=U[V].qos;if(typeof W!=="string")return J.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof x!=="number")return J.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(X===5){if(typeof(U[V].nl||!1)!=="boolean")return J.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(U[V].rap||!1)!=="boolean")return J.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let A=U[V].rh||0;if(typeof A!=="number"||A>2)return J.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}z+=k.byteLength(W)+2+1}else return J.destroy(new Error("Invalid subscriptions")),!1;if(k0("subscribe: writing to stream: %o",h.SUBSCRIBE_HEADER),J.write(h.SUBSCRIBE_HEADER[1][H?1:0][0]),y0(J,z),O0(J,Y),q!==null)q.write();let $=!0;for(let V of U){let{topic:W,qos:x}=V,_=+V.nl,j=+V.rap,A=V.rh,B;if(u1(J,W),B=h.SUBSCRIBE_OPTIONS_QOS[x],X===5)B|=_?h.SUBSCRIBE_OPTIONS_NL:0,B|=j?h.SUBSCRIBE_OPTIONS_RAP:0,B|=A?h.SUBSCRIBE_OPTIONS_RH[A]:0;$=J.write(k.from([B]))}return $}function QW(K,J,Z){let X=Z?Z.protocolVersion:4,M=K||{},H=M.messageId,Y=M.granted,U=M.properties,G=0;if(typeof H!=="number")return J.destroy(new Error("Invalid messageId")),!1;else G+=2;if(typeof Y==="object"&&Y.length)for(let q=0;q<Y.length;q+=1){if(typeof Y[q]!=="number")return J.destroy(new Error("Invalid qos vector")),!1;G+=1}else return J.destroy(new Error("Invalid qos vector")),!1;let z=null;if(X===5){if(z=S8(J,U,Z,G),!z)return!1;G+=z.length}if(J.write(h.SUBACK_HEADER),y0(J,G),O0(J,H),z!==null)z.write();return J.write(k.from(Y))}function VW(K,J,Z){let X=Z?Z.protocolVersion:4,M=K||{},H=M.messageId,Y=M.dup?h.DUP_MASK:0,U=M.unsubscriptions,G=M.properties,z=0;if(typeof H!=="number")return J.destroy(new Error("Invalid messageId")),!1;else z+=2;if(typeof U==="object"&&U.length)for(let V=0;V<U.length;V+=1){if(typeof U[V]!=="string")return J.destroy(new Error("Invalid unsubscriptions")),!1;z+=k.byteLength(U[V])+2}else return J.destroy(new Error("Invalid unsubscriptions")),!1;let q=null;if(X===5){if(q=N1(J,G),!q)return!1;z+=q.length}if(J.write(h.UNSUBSCRIBE_HEADER[1][Y?1:0][0]),y0(J,z),O0(J,H),q!==null)q.write();let $=!0;for(let V=0;V<U.length;V++)$=u1(J,U[V]);return $}function WW(K,J,Z){let X=Z?Z.protocolVersion:4,M=K||{},H=M.messageId,Y=M.dup?h.DUP_MASK:0,U=M.granted,G=M.properties,z=M.cmd,q=0,$=2;if(typeof H!=="number")return J.destroy(new Error("Invalid messageId")),!1;if(X===5)if(typeof U==="object"&&U.length)for(let W=0;W<U.length;W+=1){if(typeof U[W]!=="number")return J.destroy(new Error("Invalid qos vector")),!1;$+=1}else return J.destroy(new Error("Invalid qos vector")),!1;let V=null;if(X===5){if(V=S8(J,G,Z,$),!V)return!1;$+=V.length}if(J.write(h.ACKS[z][0][Y][0]),y0(J,$),O0(J,H),V!==null)V.write();if(X===5)J.write(k.from(U));return!0}function PW(K,J,Z){return J.write(h.EMPTY[K.cmd])}function FW(K,J,Z){let X=Z?Z.protocolVersion:4,M=K||{},H=M.reasonCode,Y=M.properties,U=X===5?1:0,G=null;if(X===5){if(G=S8(J,Y,Z,U),!G)return!1;U+=G.length}if(J.write(k.from([h.codes.disconnect<<4])),y0(J,U),X===5)J.write(k.from([H]));if(G!==null)G.write();return!0}function TW(K,J,Z){let X=Z?Z.protocolVersion:4,M=K||{},H=M.reasonCode,Y=M.properties,U=X===5?1:0;if(X!==5)J.destroy(new Error("Invalid mqtt version for auth packet"));let G=S8(J,Y,Z,U);if(!G)return!1;if(U+=G.length,J.write(k.from([h.codes.auth<<4])),y0(J,U),J.write(k.from([H])),G!==null)G.write();return!0}var AH={};function y0(K,J){if(J>h.VARBYTEINT_MAX)return K.destroy(new Error(`Invalid variable byte integer: ${J}`)),!1;let Z=AH[J];if(!Z){if(Z=xJ(J),J<16384)AH[J]=Z}return k0("writeVarByteInt: writing to stream: %o",Z),K.write(Z)}function u1(K,J){let Z=k.byteLength(J);return O0(K,Z),k0("writeString: %s",J),K.write(J,"utf8")}function LH(K,J,Z){u1(K,J),u1(K,Z)}function RJ(K,J){return k0("writeNumberCached: number: %d",J),k0("writeNumberCached: %o",yK[J]),K.write(yK[J])}function IW(K,J){let Z=XW(J);return k0("writeNumberGenerated: %o",Z),K.write(Z)}function OW(K,J){let Z=HW(J);return k0("write4ByteNumber: %o",Z),K.write(Z)}function z8(K,J){if(typeof J==="string")u1(K,J);else if(J)O0(K,J.length),K.write(J);else O0(K,0)}function N1(K,J){if(typeof J!=="object"||J.length!=null)return{length:1,write(){DH(K,{},0)}};let Z=0;function X(H,Y){let U=h.propertiesTypes[H],G=0;switch(U){case"byte":{if(typeof Y!=="boolean")return K.destroy(new Error(`Invalid ${H}: ${Y}`)),!1;G+=2;break}case"int8":{if(typeof Y!=="number"||Y<0||Y>255)return K.destroy(new Error(`Invalid ${H}: ${Y}`)),!1;G+=2;break}case"binary":{if(Y&&Y===null)return K.destroy(new Error(`Invalid ${H}: ${Y}`)),!1;G+=1+k.byteLength(Y)+2;break}case"int16":{if(typeof Y!=="number"||Y<0||Y>65535)return K.destroy(new Error(`Invalid ${H}: ${Y}`)),!1;G+=3;break}case"int32":{if(typeof Y!=="number"||Y<0||Y>4294967295)return K.destroy(new Error(`Invalid ${H}: ${Y}`)),!1;G+=5;break}case"var":{if(typeof Y!=="number"||Y<0||Y>268435455)return K.destroy(new Error(`Invalid ${H}: ${Y}`)),!1;G+=1+k.byteLength(xJ(Y));break}case"string":{if(typeof Y!=="string")return K.destroy(new Error(`Invalid ${H}: ${Y}`)),!1;G+=3+k.byteLength(Y.toString());break}case"pair":{if(typeof Y!=="object")return K.destroy(new Error(`Invalid ${H}: ${Y}`)),!1;G+=Object.getOwnPropertyNames(Y).reduce((z,q)=>{let $=Y[q];if(Array.isArray($))z+=$.reduce((V,W)=>{return V+=3+k.byteLength(q.toString())+2+k.byteLength(W.toString()),V},0);else z+=3+k.byteLength(q.toString())+2+k.byteLength(Y[q].toString());return z},0);break}default:return K.destroy(new Error(`Invalid property ${H}: ${Y}`)),!1}return G}if(J)for(let H in J){let Y=0,U=0,G=J[H];if(Array.isArray(G))for(let z=0;z<G.length;z++){if(U=X(H,G[z]),!U)return!1;Y+=U}else{if(U=X(H,G),!U)return!1;Y=U}if(!Y)return!1;Z+=Y}return{length:k.byteLength(xJ(Z))+Z,write(){DH(K,J,Z)}}}function S8(K,J,Z,X){let M=["reasonString","userProperties"],H=Z&&Z.properties&&Z.properties.maximumPacketSize?Z.properties.maximumPacketSize:0,Y=N1(K,J);if(H)while(X+Y.length>H){let U=M.shift();if(U&&J[U])delete J[U],Y=N1(K,J);else return!1}return Y}function EH(K,J,Z){switch(h.propertiesTypes[J]){case"byte":{K.write(k.from([h.properties[J]])),K.write(k.from([+Z]));break}case"int8":{K.write(k.from([h.properties[J]])),K.write(k.from([Z]));break}case"binary":{K.write(k.from([h.properties[J]])),z8(K,Z);break}case"int16":{K.write(k.from([h.properties[J]])),O0(K,Z);break}case"int32":{K.write(k.from([h.properties[J]])),OW(K,Z);break}case"var":{K.write(k.from([h.properties[J]])),y0(K,Z);break}case"string":{K.write(k.from([h.properties[J]])),u1(K,Z);break}case"pair":{Object.getOwnPropertyNames(Z).forEach((M)=>{let H=Z[M];if(Array.isArray(H))H.forEach((Y)=>{K.write(k.from([h.properties[J]])),LH(K,M.toString(),Y.toString())});else K.write(k.from([h.properties[J]])),LH(K,M.toString(),H.toString())});break}default:return K.destroy(new Error(`Invalid property ${J} value: ${Z}`)),!1}}function DH(K,J,Z){y0(K,Z);for(let X in J)if(Object.prototype.hasOwnProperty.call(J,X)&&J[X]!==null){let M=J[X];if(Array.isArray(M))for(let H=0;H<M.length;H++)EH(K,X,M[H]);else EH(K,X,M)}}function RH(K){if(!K)return 0;else if(K instanceof k)return K.length;else return k.byteLength(K)}function jH(K){return typeof K==="string"||K instanceof k}BH.exports=xH});var yH=O((JN,kH)=>{var NW=BJ(),{EventEmitter:CW}=S("events"),{Buffer:wH}=S("buffer");function _W(K,J){let Z=new SH;return NW(K,Z,J),Z.concat()}class SH extends CW{constructor(){super();this._array=new Array(20),this._i=0}write(K){return this._array[this._i++]=K,!0}concat(){let K=0,J=new Array(this._array.length),Z=this._array,X=0,M;for(M=0;M<Z.length&&Z[M]!==void 0;M++){if(typeof Z[M]!=="string")J[M]=Z[M].length;else J[M]=wH.byteLength(Z[M]);K+=J[M]}let H=wH.allocUnsafe(K);for(M=0;M<Z.length&&Z[M]!==void 0;M++)if(typeof Z[M]!=="string")Z[M].copy(H,X),X+=J[M];else H.write(Z[M],X),X+=J[M];return H}destroy(K){if(K)this.emit("error",K)}}kH.exports=_W});var wJ=O((AW)=>{AW.parser=TH().parser;AW.generate=yH();AW.writeToStream=BJ()});var gH=O((XN,vH)=>{vH.exports=hH;function hH(K,J){if(K&&J)return hH(K)(J);if(typeof K!=="function")throw new TypeError("need wrapper function");return Object.keys(K).forEach(function(X){Z[X]=K[X]}),Z;function Z(){var X=new Array(arguments.length);for(var M=0;M<X.length;M++)X[M]=arguments[M];var H=K.apply(this,X),Y=X[X.length-1];if(typeof H==="function"&&H!==Y)Object.keys(Y).forEach(function(U){H[U]=Y[U]});return H}}});var fH=O((MN,SJ)=>{var uH=gH();SJ.exports=uH(vK);SJ.exports.strict=uH(mH);vK.proto=vK(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return vK(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return mH(this)},configurable:!0})});function vK(K){var J=function(){if(J.called)return J.value;return J.called=!0,J.value=K.apply(this,arguments)};return J.called=!1,J}function mH(K){var J=function(){if(J.called)throw new Error(J.onceError);return J.called=!0,J.value=K.apply(this,arguments)},Z=K.name||"Function wrapped with `once`";return J.onceError=Z+" shouldn't be called more than once",J.called=!1,J}});var bH=O((HN,dH)=>{var jW=fH(),xW=function(){},RW=function(K){return K.setHeader&&typeof K.abort==="function"},BW=function(K){return K.stdio&&Array.isArray(K.stdio)&&K.stdio.length===3},cH=function(K,J,Z){if(typeof J==="function")return cH(K,null,J);if(!J)J={};Z=jW(Z||xW);var{_writableState:X,_readableState:M}=K,H=J.readable||J.readable!==!1&&K.readable,Y=J.writable||J.writable!==!1&&K.writable,U=!1,G=function(){if(!K.writable)z()},z=function(){if(Y=!1,!H)Z.call(K)},q=function(){if(H=!1,!Y)Z.call(K)},$=function(j){Z.call(K,j?new Error("exited with error code: "+j):null)},V=function(j){Z.call(K,j)},W=function(){process.nextTick(x)},x=function(){if(U)return;if(H&&!(M&&(M.ended&&!M.destroyed)))return Z.call(K,new Error("premature close"));if(Y&&!(X&&(X.ended&&!X.destroyed)))return Z.call(K,new Error("premature close"))},_=function(){K.req.on("finish",z)};if(RW(K))if(K.on("complete",z),K.on("abort",W),K.req)_();else K.on("request",_);else if(Y&&!X)K.on("end",G),K.on("close",G);if(BW(K))K.on("exit",$);if(K.on("end",q),K.on("finish",z),J.error!==!1)K.on("error",V);return K.on("close",W),function(){if(U=!0,K.removeListener("complete",z),K.removeListener("abort",W),K.removeListener("request",_),K.req)K.req.removeListener("finish",z);K.removeListener("end",G),K.removeListener("close",G),K.removeListener("finish",z),K.removeListener("exit",$),K.removeListener("end",q),K.removeListener("error",V),K.removeListener("close",W)}};dH.exports=cH});var $1=O((YN,pH)=>{var wW=wJ();function SW(K,J,Z){let X=null;if(K.connecting||K.connected)try{if(!wW.writeToStream(J,K.conn)&&!K.errored){K.conn.once("drain",Z);return}}catch(M){X=new Error("packet received not valid")}else X=new Error("connection closed");setImmediate(Z,X,K)}pH.exports=SW});var kJ=O((UN,nH)=>{var lH=p1(),kW=S("util");function iH(K,J){if(lH.call(this,K,J.broker),this.writeCallback=J._onError.bind(J),!K.messageId)if(this.messageId=J._nextId,J._nextId>=65535)J._nextId=1;else J._nextId++;else this.messageId=K.messageId}kW.inherits(iH,lH);nH.exports=iH});var aH=O((GN,rH)=>{var yW=m8(),oH=[];function hW(K,J){if(Array.isArray(K))J=K,K=null;var Z=yW(vW);return J?H:X;function X(){var Y=Z.get();if(Y.release=M,arguments.length===3)Y.context=arguments[0],Y.list=arguments[1],Y.callback=arguments[2]||k8;else Y.context=K,Y.list=arguments[0],Y.callback=arguments[1]||k8;Y.work()}function M(Y){Z.release(Y)}function H(){var Y=Z.get();Y.release=M,Y.list=J;var U,G,z=arguments.length-1;switch(Y.context=this||K,Y.callback=arguments[z]||k8,z){case 0:Y.work();break;case 1:Y.work(null,arguments[0]);break;case 2:Y.work(null,arguments[0],arguments[1]);break;case 3:Y.work(null,arguments[0],arguments[1],arguments[2]);break;case 4:Y.work(null,arguments[0],arguments[1],arguments[2],arguments[3]);break;default:U=new Array(z+1),U[0]=null;for(G=0;G<z;G++)U[G+1]=arguments[G];Y.work.apply(null,U)}}}function k8(){}function vW(){this.list=oH,this.callback=k8,this.count=0,this.context=void 0,this.release=k8;var K=this;this.work=function J(){if(arguments.length>0&&arguments[0])return K.callback.call(K.context,arguments[0]);var Z=arguments.length,X,M,H;if(K.count<K.list.length)switch(H=K.list[K.count++],Z){case 0:case 1:return H.call(K.context,J);case 2:return H.call(K.context,arguments[1],J);case 3:return H.call(K.context,arguments[1],arguments[2],J);case 4:return H.call(K.context,arguments[1],arguments[2],arguments[3],J);default:M=new Array(Z);for(X=1;X<Z;X++)M[X-1]=arguments[X];M[Z-1]=J,H.apply(K.context,M)}else{switch(Z){case 0:K.callback.call(K.context);break;case 1:K.callback.call(K.context,arguments[0]);break;case 2:K.callback.call(K.context,arguments[0],arguments[1]);break;case 3:K.callback.call(K.context,arguments[0],arguments[1],arguments[2]);break;case 4:K.callback.call(K.context,arguments[0],arguments[1],arguments[2],arguments[3]);break;default:M=new Array(Z);for(X=0;X<Z;X++)M[X]=arguments[X];K.callback.apply(K.context,M)}K.context=void 0,K.list=oH,K.count=0,K.release(K)}}}rH.exports=hW});var m1=O((zN,sH)=>{var{Transform:gW,Writable:uW}=S("stream");function mW(K,J){if(!K||K.length===0)return new Error("impossible to "+J+" to an empty topic");let Z=K.length-1,X=Z-1,M=X>0&&K.charCodeAt(X)!==47;for(let H=0;H<K.length;H++)switch(K.charCodeAt(H)){case 35:{if(H!==Z||M)return new Error("# is only allowed in "+J+" in the last position");break}case 43:{let Y=H<Z-1&&K.charCodeAt(H+1)!==47,U=H>1&&K.charCodeAt(H-1)!==47;if(Y||U)return new Error("+ is only allowed in "+J+" between /");break}}}function fW(K){return new gW({objectMode:!0,transform:K})}function cW(K){return new uW({objectMode:!0,writev:function(J,Z){K(J.map((X)=>X.chunk),Z)}})}sH.exports={validateTopic:mW,through:fW,bulk:cW,$SYS_PREFIX:"$SYS/"}});var gK=O((qN,X5)=>{var eH=aH(),K5=p1(),{through:dW}=m1(),{validateTopic:bW,$SYS_PREFIX:pW}=m1(),lW=$1(),iW=eH([J5,J2,Z5]),nW=eH([J5,Z5]);function oW(K,J){this.cmd="suback",this.messageId=K.messageId,this.granted=J}function tH(K,J,Z,X,M){this.qos=K,this.func=J,this.rh=Z,this.rap=X,this.nl=M}function rW(K,J,Z,X){this.client=K,this.packet=J,this.actions=Z?nW:iW,this.finish=X,this.subState=[]}function aW(K,J,Z,X,M,H){this.client=K,this.packet=J,this.granted=Z,this.rh=X,this.rap=M,this.nl=H}function sW(K){let J={};for(let X=0;X<K.length;X++){let M=K[X];J[M.topic]=M}let Z=[];for(let X in J)Z.push(J[X]);return Z}function tW(K,J,Z,X){J.subscriptions=J.subscriptions.length===1?J.subscriptions:sW(J.subscriptions),K.broker._parallel(new rW(K,J,Z,X),eW,J.subscriptions,Z?X:X2)}function eW(K,J){let Z=new aW(this.client,this.packet,K.qos,K.rh,K.rap,K.nl);this.subState.push(Z),this.actions.call(Z,K,J)}function J5(K,J){let Z=bW(K.topic,"SUBSCRIBE");if(Z)return J(Z);let X=this.client;X.broker.authorizeSubscribe(X,K,J)}function K2(K){return function J(Z,X){if(Z.topic.charCodeAt(0)===36)X();else K(Z,X)}}function J2(K,J){if(!K||typeof K!=="object")return this.granted=128,J(null,null);let Z=this.packet,X=this.client;if(X.clean)return J(null,K);X.broker.persistence.addSubscriptions(X,Z.subscriptions,function M(H){J(H,K)})}function Z5(K,J){if(!K||typeof K!=="object")return J();let Z=this.client,X=Z.broker,M=K.topic,H=K.qos,Y=this.rh,U=this.rap,G=this.nl,z=H>0?Z.deliverQoS:Z.deliver0,q=z;if(z=function $(V,W){if(V=new K5(V,X),V.nl=G,!U)V.retain=!1;q(V,W)},Z2(M))z=K2(z);if(Z.closed||Z.broker.closed)return;if(!Z.subscriptions[M])Z.subscriptions[M]=new tH(H,z,Y,U,G),X.subscribe(M,z,J);else if(Z.subscriptions[M].qos!==H||Z.subscriptions[M].rh!==Y||Z.subscriptions[M].rap!==U||Z.subscriptions[M].nl!==G)X.unsubscribe(M,Z.subscriptions[M].func),Z.subscriptions[M]=new tH(H,z,Y,U,G),X.subscribe(M,z,J);else J()}function Z2(K){let J=K.charCodeAt(0);return J===43||J===35}function X2(K){let J=this.finish;if(K)return J(K);let Z=this.packet,X=this.client;if(Z.messageId!==void 0)lW(X,new oW(Z,this.subState.map((U)=>U.granted)),J);else J();let M=X.broker,H=Z.subscriptions,Y=[];for(let U=0;U<H.length;U++){if(this.subState[U].granted!==128)Y.push(H[U].topic);H[U].qos=this.subState[U].granted}if(this.subState=[],M.emit("subscribe",H,X),M.publish({topic:pW+M.id+"/new/subscribes",payload:Buffer.from(JSON.stringify({clientId:X.id,subs:H}),"utf8")},M2),Y.length>0)M.persistence.createRetainedStreamCombi(Y).pipe(dW(function z(q,$,V){q=new K5({cmd:q.cmd,qos:q.qos,topic:q.topic,payload:q.payload,retain:!0},M),q.brokerId=null,X.deliverQoS(q,V)}))}function M2(){}X5.exports=tW});var hJ=O(($N,M5)=>{var H2=$1(),{validateTopic:Y2,$SYS_PREFIX:U2}=m1();function G2(K){this.cmd="unsuback",this.messageId=K.messageId}function z2(K,J,Z){this.client=K,this.packet=J,this.finish=Z}function q2(K,J,Z){let X=K.broker,M=J.unsubscriptions,H;for(let Y=0;Y<M.length;Y++)if(H=Y2(M[Y],"UNSUBSCRIBE"),H)return Z(H);if(J.messageId!==void 0){if(K.clean)return yJ(K,J,Z);X.persistence.removeSubscriptions(K,M,function(Y){if(Y)return Z(Y);yJ(K,J,Z)})}else yJ(K,J,Z)}function yJ(K,J,Z){K.broker._parallel(new z2(K,J,Z),$2,J.unsubscriptions,Q2)}function $2(K,J){let Z=this.client,X=Z.broker,M=Z.subscriptions[K];if(M){let H=M.func;delete Z.subscriptions[K],X.unsubscribe(K,H,J)}else J()}function Q2(K){let J=this.client;if(K){J.emit("error",K);return}let Z=this.packet,X=this.finish;if(Z.messageId!==void 0)H2(J,new G2(Z),X);else X();if((!J.closed||J.clean===!0)&&Z.unsubscriptions.length>0)J.broker.emit("unsubscribe",Z.unsubscriptions,J),J.broker.publish({topic:U2+J.broker.id+"/new/unsubscribes",payload:Buffer.from(JSON.stringify({clientId:J.id,subs:Z.unsubscriptions}),"utf8")},V2)}function V2(){}M5.exports=q2});var Y5=O((QN,H5)=>{H5.exports=function K(){let J=process.hrtime();return Math.floor(J[0]*1000+J[1]/1e6)}});var G5=O((VN,U5)=>{U5.exports={clearInterval,clearTimeout,setInterval,setTimeout}});var $5=O((WN,gJ)=>{var uK=Y5(),{clearTimeout:z5,setTimeout:q5}=G5();class vJ{constructor(K,J,Z){let X=this;this._started=uK(),this._rescheduled=0,this._scheduled=J,this._args=Z,this._triggered=!1,this._timerWrapper=()=>{if(X._rescheduled>0)X._scheduled=X._rescheduled-(uK()-X._started),X._schedule(X._scheduled);else X._triggered=!0,K.apply(null,X._args)},this._timer=q5(this._timerWrapper,J)}reschedule(K){if(!K)K=this._scheduled;let J=uK();if(J+K-(this._started+this._scheduled)<0)z5(this._timer),this._schedule(K);else if(!this._triggered)this._started=J,this._rescheduled=K;else this._schedule(K)}_schedule(K){this._triggered=!1,this._started=uK(),this._rescheduled=0,this._scheduled=K,this._timer=q5(this._timerWrapper,K)}clear(){z5(this._timer)}}function W2(){if(typeof arguments[0]!=="function")throw new Error("callback needed");if(typeof arguments[1]!=="number")throw new Error("timeout needed");let K;if(arguments.length>0){K=new Array(arguments.length-2);for(var J=0;J<K.length;J++)K[J]=arguments[J+2]}return new vJ(arguments[0],arguments[1],K)}gJ.exports=W2;gJ.exports.Retimer=vJ});var uJ=O((Q5)=>{Object.defineProperty(Q5,"__esModule",{value:!0});Q5.default=T2;var P2=F2(S("crypto"));function F2(K){return K&&K.__esModule?K:{default:K}}var fK=new Uint8Array(256),mK=fK.length;function T2(){if(mK>fK.length-16)P2.default.randomFillSync(fK),mK=0;return fK.slice(mK,mK+=16)}});var P5=O((V5)=>{Object.defineProperty(V5,"__esModule",{value:!0});V5.default=void 0;var O2=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;V5.default=O2});var y8=O((F5)=>{Object.defineProperty(F5,"__esModule",{value:!0});F5.default=void 0;var N2=C2(P5());function C2(K){return K&&K.__esModule?K:{default:K}}function _2(K){return typeof K==="string"&&N2.default.test(K)}var A2=_2;F5.default=A2});var h8=O((I5)=>{Object.defineProperty(I5,"__esModule",{value:!0});I5.default=void 0;var L2=E2(y8());function E2(K){return K&&K.__esModule?K:{default:K}}var $0=[];for(let K=0;K<256;++K)$0.push((K+256).toString(16).substr(1));function D2(K,J=0){let Z=($0[K[J+0]]+$0[K[J+1]]+$0[K[J+2]]+$0[K[J+3]]+"-"+$0[K[J+4]]+$0[K[J+5]]+"-"+$0[K[J+6]]+$0[K[J+7]]+"-"+$0[K[J+8]]+$0[K[J+9]]+"-"+$0[K[J+10]]+$0[K[J+11]]+$0[K[J+12]]+$0[K[J+13]]+$0[K[J+14]]+$0[K[J+15]]).toLowerCase();if(!L2.default(Z))throw TypeError("Stringified UUID is invalid");return Z}var j2=D2;I5.default=j2});var L5=O((_5)=>{Object.defineProperty(_5,"__esModule",{value:!0});_5.default=void 0;var x2=C5(uJ()),R2=C5(h8());function C5(K){return K&&K.__esModule?K:{default:K}}var N5,mJ,fJ=0,cJ=0;function B2(K,J,Z){let X=J&&Z||0,M=J||new Array(16);K=K||{};let H=K.node||N5,Y=K.clockseq!==void 0?K.clockseq:mJ;if(H==null||Y==null){let V=K.random||(K.rng||x2.default)();if(H==null)H=N5=[V[0]|1,V[1],V[2],V[3],V[4],V[5]];if(Y==null)Y=mJ=(V[6]<<8|V[7])&16383}let U=K.msecs!==void 0?K.msecs:Date.now(),G=K.nsecs!==void 0?K.nsecs:cJ+1,z=U-fJ+(G-cJ)/1e4;if(z<0&&K.clockseq===void 0)Y=Y+1&16383;if((z<0||U>fJ)&&K.nsecs===void 0)G=0;if(G>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");fJ=U,cJ=G,mJ=Y,U+=12219292800000;let q=((U&268435455)*1e4+G)%4294967296;M[X++]=q>>>24&255,M[X++]=q>>>16&255,M[X++]=q>>>8&255,M[X++]=q&255;let $=U/4294967296*1e4&268435455;M[X++]=$>>>8&255,M[X++]=$&255,M[X++]=$>>>24&15|16,M[X++]=$>>>16&255,M[X++]=Y>>>8|128,M[X++]=Y&255;for(let V=0;V<6;++V)M[X+V]=H[V];return J||R2.default(M)}var w2=B2;_5.default=w2});var dJ=O((E5)=>{Object.defineProperty(E5,"__esModule",{value:!0});E5.default=void 0;var S2=k2(y8());function k2(K){return K&&K.__esModule?K:{default:K}}function y2(K){if(!S2.default(K))throw TypeError("Invalid UUID");let J,Z=new Uint8Array(16);return Z[0]=(J=parseInt(K.slice(0,8),16))>>>24,Z[1]=J>>>16&255,Z[2]=J>>>8&255,Z[3]=J&255,Z[4]=(J=parseInt(K.slice(9,13),16))>>>8,Z[5]=J&255,Z[6]=(J=parseInt(K.slice(14,18),16))>>>8,Z[7]=J&255,Z[8]=(J=parseInt(K.slice(19,23),16))>>>8,Z[9]=J&255,Z[10]=(J=parseInt(K.slice(24,36),16))/1099511627776&255,Z[11]=J/4294967296&255,Z[12]=J>>>24&255,Z[13]=J>>>16&255,Z[14]=J>>>8&255,Z[15]=J&255,Z}var h2=y2;E5.default=h2});var bJ=O((B5)=>{Object.defineProperty(B5,"__esModule",{value:!0});B5.default=m2;B5.URL=B5.DNS=void 0;var v2=j5(h8()),g2=j5(dJ());function j5(K){return K&&K.__esModule?K:{default:K}}function u2(K){K=unescape(encodeURIComponent(K));let J=[];for(let Z=0;Z<K.length;++Z)J.push(K.charCodeAt(Z));return J}var x5="6ba7b810-9dad-11d1-80b4-00c04fd430c8";B5.DNS=x5;var R5="6ba7b811-9dad-11d1-80b4-00c04fd430c8";B5.URL=R5;function m2(K,J,Z){function X(M,H,Y,U){if(typeof M==="string")M=u2(M);if(typeof H==="string")H=g2.default(H);if(H.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let G=new Uint8Array(16+M.length);if(G.set(H),G.set(M,H.length),G=Z(G),G[6]=G[6]&15|J,G[8]=G[8]&63|128,Y){U=U||0;for(let z=0;z<16;++z)Y[U+z]=G[z];return Y}return v2.default(G)}try{X.name=K}catch(M){}return X.DNS=x5,X.URL=R5,X}});var y5=O((S5)=>{Object.defineProperty(S5,"__esModule",{value:!0});S5.default=void 0;var d2=b2(S("crypto"));function b2(K){return K&&K.__esModule?K:{default:K}}function p2(K){if(Array.isArray(K))K=Buffer.from(K);else if(typeof K==="string")K=Buffer.from(K,"utf8");return d2.default.createHash("md5").update(K).digest()}var l2=p2;S5.default=l2});var u5=O((v5)=>{Object.defineProperty(v5,"__esModule",{value:!0});v5.default=void 0;var i2=h5(bJ()),n2=h5(y5());function h5(K){return K&&K.__esModule?K:{default:K}}var o2=i2.default("v3",48,n2.default),r2=o2;v5.default=r2});var d5=O((f5)=>{Object.defineProperty(f5,"__esModule",{value:!0});f5.default=void 0;var a2=m5(uJ()),s2=m5(h8());function m5(K){return K&&K.__esModule?K:{default:K}}function t2(K,J,Z){K=K||{};let X=K.random||(K.rng||a2.default)();if(X[6]=X[6]&15|64,X[8]=X[8]&63|128,J){Z=Z||0;for(let M=0;M<16;++M)J[Z+M]=X[M];return J}return s2.default(X)}var e2=t2;f5.default=e2});var l5=O((b5)=>{Object.defineProperty(b5,"__esModule",{value:!0});b5.default=void 0;var KP=JP(S("crypto"));function JP(K){return K&&K.__esModule?K:{default:K}}function ZP(K){if(Array.isArray(K))K=Buffer.from(K);else if(typeof K==="string")K=Buffer.from(K,"utf8");return KP.default.createHash("sha1").update(K).digest()}var XP=ZP;b5.default=XP});var r5=O((n5)=>{Object.defineProperty(n5,"__esModule",{value:!0});n5.default=void 0;var MP=i5(bJ()),HP=i5(l5());function i5(K){return K&&K.__esModule?K:{default:K}}var YP=MP.default("v5",80,HP.default),UP=YP;n5.default=UP});var t5=O((a5)=>{Object.defineProperty(a5,"__esModule",{value:!0});a5.default=void 0;var GP="00000000-0000-0000-0000-000000000000";a5.default=GP});var JY=O((e5)=>{Object.defineProperty(e5,"__esModule",{value:!0});e5.default=void 0;var zP=qP(y8());function qP(K){return K&&K.__esModule?K:{default:K}}function $P(K){if(!zP.default(K))throw TypeError("Invalid UUID");return parseInt(K.substr(14,1),16)}var QP=$P;e5.default=QP});var ZY=O((l0)=>{Object.defineProperty(l0,"__esModule",{value:!0});Object.defineProperty(l0,"v1",{enumerable:!0,get:function(){return VP.default}});Object.defineProperty(l0,"v3",{enumerable:!0,get:function(){return WP.default}});Object.defineProperty(l0,"v4",{enumerable:!0,get:function(){return PP.default}});Object.defineProperty(l0,"v5",{enumerable:!0,get:function(){return FP.default}});Object.defineProperty(l0,"NIL",{enumerable:!0,get:function(){return TP.default}});Object.defineProperty(l0,"version",{enumerable:!0,get:function(){return IP.default}});Object.defineProperty(l0,"validate",{enumerable:!0,get:function(){return OP.default}});Object.defineProperty(l0,"stringify",{enumerable:!0,get:function(){return NP.default}});Object.defineProperty(l0,"parse",{enumerable:!0,get:function(){return CP.default}});var VP=Q1(L5()),WP=Q1(u5()),PP=Q1(d5()),FP=Q1(r5()),TP=Q1(t5()),IP=Q1(JY()),OP=Q1(y8()),NP=Q1(h8()),CP=Q1(dJ());function Q1(K){return K&&K.__esModule?K:{default:K}}});var HY=O((BN,MY)=>{var _P=ZY(),XY=S("crypto");MY.exports=typeof XY.randomUUID==="function"?XY.randomUUID:_P.v4});var GY=O((wN,UY)=>{var pJ=[],YY={};for(f1=0;f1<256;f1++)pJ[f1]=(f1+256).toString(16).substr(1),YY[pJ[f1]]=f1;var f1;function AP(K,J,Z){var X=J&&Z||0,M=0;J=J||[],K.toLowerCase().replace(/[0-9a-f]{2}/g,function(H){if(M<16)J[X+M++]=YY[H]});while(M<16)J[X+M++]=0;return J}function LP(K,J){var Z=J||0,X=pJ;return X[K[Z++]]+X[K[Z++]]+X[K[Z++]]+X[K[Z++]]+"-"+X[K[Z++]]+X[K[Z++]]+"-"+X[K[Z++]]+X[K[Z++]]+"-"+X[K[Z++]]+X[K[Z++]]+"-"+X[K[Z++]]+X[K[Z++]]+X[K[Z++]]+X[K[Z++]]+X[K[Z++]]+X[K[Z++]]}UY.exports={parse:AP,unparse:LP}});var $Y=O((SP)=>{SP.byteLength=DP;SP.toByteArray=xP;SP.fromByteArray=wP;var K1=[],h0=[],EP=typeof Uint8Array!=="undefined"?Uint8Array:Array,lJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(c1=0,zY=lJ.length;c1<zY;++c1)K1[c1]=lJ[c1],h0[lJ.charCodeAt(c1)]=c1;var c1,zY;h0["-".charCodeAt(0)]=62;h0["_".charCodeAt(0)]=63;function qY(K){var J=K.length;if(J%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Z=K.indexOf("=");if(Z===-1)Z=J;var X=Z===J?0:4-Z%4;return[Z,X]}function DP(K){var J=qY(K),Z=J[0],X=J[1];return(Z+X)*3/4-X}function jP(K,J,Z){return(J+Z)*3/4-Z}function xP(K){var J,Z=qY(K),X=Z[0],M=Z[1],H=new EP(jP(K,X,M)),Y=0,U=M>0?X-4:X,G;for(G=0;G<U;G+=4)J=h0[K.charCodeAt(G)]<<18|h0[K.charCodeAt(G+1)]<<12|h0[K.charCodeAt(G+2)]<<6|h0[K.charCodeAt(G+3)],H[Y++]=J>>16&255,H[Y++]=J>>8&255,H[Y++]=J&255;if(M===2)J=h0[K.charCodeAt(G)]<<2|h0[K.charCodeAt(G+1)]>>4,H[Y++]=J&255;if(M===1)J=h0[K.charCodeAt(G)]<<10|h0[K.charCodeAt(G+1)]<<4|h0[K.charCodeAt(G+2)]>>2,H[Y++]=J>>8&255,H[Y++]=J&255;return H}function RP(K){return K1[K>>18&63]+K1[K>>12&63]+K1[K>>6&63]+K1[K&63]}function BP(K,J,Z){var X,M=[];for(var H=J;H<Z;H+=3)X=(K[H]<<16&16711680)+(K[H+1]<<8&65280)+(K[H+2]&255),M.push(RP(X));return M.join("")}function wP(K){var J,Z=K.length,X=Z%3,M=[],H=16383;for(var Y=0,U=Z-X;Y<U;Y+=H)M.push(BP(K,Y,Y+H>U?U:Y+H));if(X===1)J=K[Z-1],M.push(K1[J>>2]+K1[J<<4&63]+"==");else if(X===2)J=(K[Z-2]<<8)+K[Z-1],M.push(K1[J>>10]+K1[J>>4&63]+K1[J<<2&63]+"=");return M.join("")}});var QY=O((vP)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */vP.read=function(K,J,Z,X,M){var H,Y,U=M*8-X-1,G=(1<<U)-1,z=G>>1,q=-7,$=Z?M-1:0,V=Z?-1:1,W=K[J+$];$+=V,H=W&(1<<-q)-1,W>>=-q,q+=U;for(;q>0;H=H*256+K[J+$],$+=V,q-=8);Y=H&(1<<-q)-1,H>>=-q,q+=X;for(;q>0;Y=Y*256+K[J+$],$+=V,q-=8);if(H===0)H=1-z;else if(H===G)return Y?NaN:(W?-1:1)*(1/0);else Y=Y+Math.pow(2,X),H=H-z;return(W?-1:1)*Y*Math.pow(2,H-X)};vP.write=function(K,J,Z,X,M,H){var Y,U,G,z=H*8-M-1,q=(1<<z)-1,$=q>>1,V=M===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=X?0:H-1,x=X?1:-1,_=J<0||J===0&&1/J<0?1:0;if(J=Math.abs(J),isNaN(J)||J===1/0)U=isNaN(J)?1:0,Y=q;else{if(Y=Math.floor(Math.log(J)/Math.LN2),J*(G=Math.pow(2,-Y))<1)Y--,G*=2;if(Y+$>=1)J+=V/G;else J+=V*Math.pow(2,1-$);if(J*G>=2)Y++,G/=2;if(Y+$>=q)U=0,Y=q;else if(Y+$>=1)U=(J*G-1)*Math.pow(2,M),Y=Y+$;else U=J*Math.pow(2,$-1)*Math.pow(2,M),Y=0}for(;M>=8;K[Z+W]=U&255,W+=x,U/=256,M-=8);Y=Y<<M|U,z+=M;for(;z>0;K[Z+W]=Y&255,W+=x,Y/=256,z-=8);K[Z+W-x]|=_*128}});var DY=O((GF)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var iJ=$Y(),q8=QY(),VY=typeof Symbol==="function"&&typeof Symbol.for==="function"?Symbol.for("nodejs.util.inspect.custom"):null;GF.Buffer=N;GF.SlowBuffer=pP;GF.INSPECT_MAX_BYTES=50;var cK=2147483647;GF.kMaxLength=cK;N.TYPED_ARRAY_SUPPORT=mP();if(!N.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function")console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function mP(){try{var K=new Uint8Array(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,Uint8Array.prototype),Object.setPrototypeOf(K,J),K.foo()===42}catch(Z){return!1}}Object.defineProperty(N.prototype,"parent",{enumerable:!0,get:function(){if(!N.isBuffer(this))return;return this.buffer}});Object.defineProperty(N.prototype,"offset",{enumerable:!0,get:function(){if(!N.isBuffer(this))return;return this.byteOffset}});function V1(K){if(K>cK)throw new RangeError('The value "'+K+'" is invalid for option "size"');var J=new Uint8Array(K);return Object.setPrototypeOf(J,N.prototype),J}function N(K,J,Z){if(typeof K==="number"){if(typeof J==="string")throw new TypeError('The "string" argument must be of type string. Received type number');return aJ(K)}return FY(K,J,Z)}N.poolSize=8192;function FY(K,J,Z){if(typeof K==="string")return cP(K,J);if(ArrayBuffer.isView(K))return dP(K);if(K==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K);if(J1(K,ArrayBuffer)||K&&J1(K.buffer,ArrayBuffer))return oJ(K,J,Z);if(typeof SharedArrayBuffer!=="undefined"&&(J1(K,SharedArrayBuffer)||K&&J1(K.buffer,SharedArrayBuffer)))return oJ(K,J,Z);if(typeof K==="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var X=K.valueOf&&K.valueOf();if(X!=null&&X!==K)return N.from(X,J,Z);var M=bP(K);if(M)return M;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof K[Symbol.toPrimitive]==="function")return N.from(K[Symbol.toPrimitive]("string"),J,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K)}N.from=function(K,J,Z){return FY(K,J,Z)};Object.setPrototypeOf(N.prototype,Uint8Array.prototype);Object.setPrototypeOf(N,Uint8Array);function TY(K){if(typeof K!=="number")throw new TypeError('"size" argument must be of type number');else if(K<0)throw new RangeError('The value "'+K+'" is invalid for option "size"')}function fP(K,J,Z){if(TY(K),K<=0)return V1(K);if(J!==void 0)return typeof Z==="string"?V1(K).fill(J,Z):V1(K).fill(J);return V1(K)}N.alloc=function(K,J,Z){return fP(K,J,Z)};function aJ(K){return TY(K),V1(K<0?0:sJ(K)|0)}N.allocUnsafe=function(K){return aJ(K)};N.allocUnsafeSlow=function(K){return aJ(K)};function cP(K,J){if(typeof J!=="string"||J==="")J="utf8";if(!N.isEncoding(J))throw new TypeError("Unknown encoding: "+J);var Z=IY(K,J)|0,X=V1(Z),M=X.write(K,J);if(M!==Z)X=X.slice(0,M);return X}function nJ(K){var J=K.length<0?0:sJ(K.length)|0,Z=V1(J);for(var X=0;X<J;X+=1)Z[X]=K[X]&255;return Z}function dP(K){if(J1(K,Uint8Array)){var J=new Uint8Array(K);return oJ(J.buffer,J.byteOffset,J.byteLength)}return nJ(K)}function oJ(K,J,Z){if(J<0||K.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(K.byteLength<J+(Z||0))throw new RangeError('"length" is outside of buffer bounds');var X;if(J===void 0&&Z===void 0)X=new Uint8Array(K);else if(Z===void 0)X=new Uint8Array(K,J);else X=new Uint8Array(K,J,Z);return Object.setPrototypeOf(X,N.prototype),X}function bP(K){if(N.isBuffer(K)){var J=sJ(K.length)|0,Z=V1(J);if(Z.length===0)return Z;return K.copy(Z,0,0,J),Z}if(K.length!==void 0){if(typeof K.length!=="number"||tJ(K.length))return V1(0);return nJ(K)}if(K.type==="Buffer"&&Array.isArray(K.data))return nJ(K.data)}function sJ(K){if(K>=cK)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+cK.toString(16)+" bytes");return K|0}function pP(K){if(+K!=K)K=0;return N.alloc(+K)}N.isBuffer=function K(J){return J!=null&&J._isBuffer===!0&&J!==N.prototype};N.compare=function K(J,Z){if(J1(J,Uint8Array))J=N.from(J,J.offset,J.byteLength);if(J1(Z,Uint8Array))Z=N.from(Z,Z.offset,Z.byteLength);if(!N.isBuffer(J)||!N.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(J===Z)return 0;var X=J.length,M=Z.length;for(var H=0,Y=Math.min(X,M);H<Y;++H)if(J[H]!==Z[H]){X=J[H],M=Z[H];break}if(X<M)return-1;if(M<X)return 1;return 0};N.isEncoding=function K(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};N.concat=function K(J,Z){if(!Array.isArray(J))throw new TypeError('"list" argument must be an Array of Buffers');if(J.length===0)return N.alloc(0);var X;if(Z===void 0){Z=0;for(X=0;X<J.length;++X)Z+=J[X].length}var M=N.allocUnsafe(Z),H=0;for(X=0;X<J.length;++X){var Y=J[X];if(J1(Y,Uint8Array))if(H+Y.length>M.length)N.from(Y).copy(M,H);else Uint8Array.prototype.set.call(M,Y,H);else if(!N.isBuffer(Y))throw new TypeError('"list" argument must be an Array of Buffers');else Y.copy(M,H);H+=Y.length}return M};function IY(K,J){if(N.isBuffer(K))return K.length;if(ArrayBuffer.isView(K)||J1(K,ArrayBuffer))return K.byteLength;if(typeof K!=="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof K);var Z=K.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&Z===0)return 0;var M=!1;for(;;)switch(J){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return rJ(K).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return LY(K).length;default:if(M)return X?-1:rJ(K).length;J=(""+J).toLowerCase(),M=!0}}N.byteLength=IY;function lP(K,J,Z){var X=!1;if(J===void 0||J<0)J=0;if(J>this.length)return"";if(Z===void 0||Z>this.length)Z=this.length;if(Z<=0)return"";if(Z>>>=0,J>>>=0,Z<=J)return"";if(!K)K="utf8";while(!0)switch(K){case"hex":return JF(this,J,Z);case"utf8":case"utf-8":return NY(this,J,Z);case"ascii":return eP(this,J,Z);case"latin1":case"binary":return KF(this,J,Z);case"base64":return sP(this,J,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ZF(this,J,Z);default:if(X)throw new TypeError("Unknown encoding: "+K);K=(K+"").toLowerCase(),X=!0}}N.prototype._isBuffer=!0;function d1(K,J,Z){var X=K[J];K[J]=K[Z],K[Z]=X}N.prototype.swap16=function K(){var J=this.length;if(J%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Z=0;Z<J;Z+=2)d1(this,Z,Z+1);return this};N.prototype.swap32=function K(){var J=this.length;if(J%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Z=0;Z<J;Z+=4)d1(this,Z,Z+3),d1(this,Z+1,Z+2);return this};N.prototype.swap64=function K(){var J=this.length;if(J%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Z=0;Z<J;Z+=8)d1(this,Z,Z+7),d1(this,Z+1,Z+6),d1(this,Z+2,Z+5),d1(this,Z+3,Z+4);return this};N.prototype.toString=function K(){var J=this.length;if(J===0)return"";if(arguments.length===0)return NY(this,0,J);return lP.apply(this,arguments)};N.prototype.toLocaleString=N.prototype.toString;N.prototype.equals=function K(J){if(!N.isBuffer(J))throw new TypeError("Argument must be a Buffer");if(this===J)return!0;return N.compare(this,J)===0};N.prototype.inspect=function K(){var J="",Z=GF.INSPECT_MAX_BYTES;if(J=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z)J+=" ... ";return"<Buffer "+J+">"};if(VY)N.prototype[VY]=N.prototype.inspect;N.prototype.compare=function K(J,Z,X,M,H){if(J1(J,Uint8Array))J=N.from(J,J.offset,J.byteLength);if(!N.isBuffer(J))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof J);if(Z===void 0)Z=0;if(X===void 0)X=J?J.length:0;if(M===void 0)M=0;if(H===void 0)H=this.length;if(Z<0||X>J.length||M<0||H>this.length)throw new RangeError("out of range index");if(M>=H&&Z>=X)return 0;if(M>=H)return-1;if(Z>=X)return 1;if(Z>>>=0,X>>>=0,M>>>=0,H>>>=0,this===J)return 0;var Y=H-M,U=X-Z,G=Math.min(Y,U),z=this.slice(M,H),q=J.slice(Z,X);for(var $=0;$<G;++$)if(z[$]!==q[$]){Y=z[$],U=q[$];break}if(Y<U)return-1;if(U<Y)return 1;return 0};function OY(K,J,Z,X,M){if(K.length===0)return-1;if(typeof Z==="string")X=Z,Z=0;else if(Z>2147483647)Z=2147483647;else if(Z<-2147483648)Z=-2147483648;if(Z=+Z,tJ(Z))Z=M?0:K.length-1;if(Z<0)Z=K.length+Z;if(Z>=K.length)if(M)return-1;else Z=K.length-1;else if(Z<0)if(M)Z=0;else return-1;if(typeof J==="string")J=N.from(J,X);if(N.isBuffer(J)){if(J.length===0)return-1;return WY(K,J,Z,X,M)}else if(typeof J==="number"){if(J=J&255,typeof Uint8Array.prototype.indexOf==="function")if(M)return Uint8Array.prototype.indexOf.call(K,J,Z);else return Uint8Array.prototype.lastIndexOf.call(K,J,Z);return WY(K,[J],Z,X,M)}throw new TypeError("val must be string, number or Buffer")}function WY(K,J,Z,X,M){var H=1,Y=K.length,U=J.length;if(X!==void 0){if(X=String(X).toLowerCase(),X==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le"){if(K.length<2||J.length<2)return-1;H=2,Y/=2,U/=2,Z/=2}}function G(W,x){if(H===1)return W[x];else return W.readUInt16BE(x*H)}var z;if(M){var q=-1;for(z=Z;z<Y;z++)if(G(K,z)===G(J,q===-1?0:z-q)){if(q===-1)q=z;if(z-q+1===U)return q*H}else{if(q!==-1)z-=z-q;q=-1}}else{if(Z+U>Y)Z=Y-U;for(z=Z;z>=0;z--){var $=!0;for(var V=0;V<U;V++)if(G(K,z+V)!==G(J,V)){$=!1;break}if($)return z}}return-1}N.prototype.includes=function K(J,Z,X){return this.indexOf(J,Z,X)!==-1};N.prototype.indexOf=function K(J,Z,X){return OY(this,J,Z,X,!0)};N.prototype.lastIndexOf=function K(J,Z,X){return OY(this,J,Z,X,!1)};function iP(K,J,Z,X){Z=Number(Z)||0;var M=K.length-Z;if(!X)X=M;else if(X=Number(X),X>M)X=M;var H=J.length;if(X>H/2)X=H/2;for(var Y=0;Y<X;++Y){var U=parseInt(J.substr(Y*2,2),16);if(tJ(U))return Y;K[Z+Y]=U}return Y}function nP(K,J,Z,X){return dK(rJ(J,K.length-Z),K,Z,X)}function oP(K,J,Z,X){return dK(HF(J),K,Z,X)}function rP(K,J,Z,X){return dK(LY(J),K,Z,X)}function aP(K,J,Z,X){return dK(YF(J,K.length-Z),K,Z,X)}N.prototype.write=function K(J,Z,X,M){if(Z===void 0)M="utf8",X=this.length,Z=0;else if(X===void 0&&typeof Z==="string")M=Z,X=this.length,Z=0;else if(isFinite(Z))if(Z=Z>>>0,isFinite(X)){if(X=X>>>0,M===void 0)M="utf8"}else M=X,X=void 0;else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var H=this.length-Z;if(X===void 0||X>H)X=H;if(J.length>0&&(X<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");if(!M)M="utf8";var Y=!1;for(;;)switch(M){case"hex":return iP(this,J,Z,X);case"utf8":case"utf-8":return nP(this,J,Z,X);case"ascii":case"latin1":case"binary":return oP(this,J,Z,X);case"base64":return rP(this,J,Z,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return aP(this,J,Z,X);default:if(Y)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),Y=!0}};N.prototype.toJSON=function K(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function sP(K,J,Z){if(J===0&&Z===K.length)return iJ.fromByteArray(K);else return iJ.fromByteArray(K.slice(J,Z))}function NY(K,J,Z){Z=Math.min(K.length,Z);var X=[],M=J;while(M<Z){var H=K[M],Y=null,U=H>239?4:H>223?3:H>191?2:1;if(M+U<=Z){var G,z,q,$;switch(U){case 1:if(H<128)Y=H;break;case 2:if(G=K[M+1],(G&192)===128){if($=(H&31)<<6|G&63,$>127)Y=$}break;case 3:if(G=K[M+1],z=K[M+2],(G&192)===128&&(z&192)===128){if($=(H&15)<<12|(G&63)<<6|z&63,$>2047&&($<55296||$>57343))Y=$}break;case 4:if(G=K[M+1],z=K[M+2],q=K[M+3],(G&192)===128&&(z&192)===128&&(q&192)===128){if($=(H&15)<<18|(G&63)<<12|(z&63)<<6|q&63,$>65535&&$<1114112)Y=$}}}if(Y===null)Y=65533,U=1;else if(Y>65535)Y-=65536,X.push(Y>>>10&1023|55296),Y=56320|Y&1023;X.push(Y),M+=U}return tP(X)}var PY=4096;function tP(K){var J=K.length;if(J<=PY)return String.fromCharCode.apply(String,K);var Z="",X=0;while(X<J)Z+=String.fromCharCode.apply(String,K.slice(X,X+=PY));return Z}function eP(K,J,Z){var X="";Z=Math.min(K.length,Z);for(var M=J;M<Z;++M)X+=String.fromCharCode(K[M]&127);return X}function KF(K,J,Z){var X="";Z=Math.min(K.length,Z);for(var M=J;M<Z;++M)X+=String.fromCharCode(K[M]);return X}function JF(K,J,Z){var X=K.length;if(!J||J<0)J=0;if(!Z||Z<0||Z>X)Z=X;var M="";for(var H=J;H<Z;++H)M+=UF[K[H]];return M}function ZF(K,J,Z){var X=K.slice(J,Z),M="";for(var H=0;H<X.length-1;H+=2)M+=String.fromCharCode(X[H]+X[H+1]*256);return M}N.prototype.slice=function K(J,Z){var X=this.length;if(J=~~J,Z=Z===void 0?X:~~Z,J<0){if(J+=X,J<0)J=0}else if(J>X)J=X;if(Z<0){if(Z+=X,Z<0)Z=0}else if(Z>X)Z=X;if(Z<J)Z=J;var M=this.subarray(J,Z);return Object.setPrototypeOf(M,N.prototype),M};function Y0(K,J,Z){if(K%1!==0||K<0)throw new RangeError("offset is not uint");if(K+J>Z)throw new RangeError("Trying to access beyond buffer length")}N.prototype.readUintLE=N.prototype.readUIntLE=function K(J,Z,X){if(J=J>>>0,Z=Z>>>0,!X)Y0(J,Z,this.length);var M=this[J],H=1,Y=0;while(++Y<Z&&(H*=256))M+=this[J+Y]*H;return M};N.prototype.readUintBE=N.prototype.readUIntBE=function K(J,Z,X){if(J=J>>>0,Z=Z>>>0,!X)Y0(J,Z,this.length);var M=this[J+--Z],H=1;while(Z>0&&(H*=256))M+=this[J+--Z]*H;return M};N.prototype.readUint8=N.prototype.readUInt8=function K(J,Z){if(J=J>>>0,!Z)Y0(J,1,this.length);return this[J]};N.prototype.readUint16LE=N.prototype.readUInt16LE=function K(J,Z){if(J=J>>>0,!Z)Y0(J,2,this.length);return this[J]|this[J+1]<<8};N.prototype.readUint16BE=N.prototype.readUInt16BE=function K(J,Z){if(J=J>>>0,!Z)Y0(J,2,this.length);return this[J]<<8|this[J+1]};N.prototype.readUint32LE=N.prototype.readUInt32LE=function K(J,Z){if(J=J>>>0,!Z)Y0(J,4,this.length);return(this[J]|this[J+1]<<8|this[J+2]<<16)+this[J+3]*16777216};N.prototype.readUint32BE=N.prototype.readUInt32BE=function K(J,Z){if(J=J>>>0,!Z)Y0(J,4,this.length);return this[J]*16777216+(this[J+1]<<16|this[J+2]<<8|this[J+3])};N.prototype.readIntLE=function K(J,Z,X){if(J=J>>>0,Z=Z>>>0,!X)Y0(J,Z,this.length);var M=this[J],H=1,Y=0;while(++Y<Z&&(H*=256))M+=this[J+Y]*H;if(H*=128,M>=H)M-=Math.pow(2,8*Z);return M};N.prototype.readIntBE=function K(J,Z,X){if(J=J>>>0,Z=Z>>>0,!X)Y0(J,Z,this.length);var M=Z,H=1,Y=this[J+--M];while(M>0&&(H*=256))Y+=this[J+--M]*H;if(H*=128,Y>=H)Y-=Math.pow(2,8*Z);return Y};N.prototype.readInt8=function K(J,Z){if(J=J>>>0,!Z)Y0(J,1,this.length);if(!(this[J]&128))return this[J];return(255-this[J]+1)*-1};N.prototype.readInt16LE=function K(J,Z){if(J=J>>>0,!Z)Y0(J,2,this.length);var X=this[J]|this[J+1]<<8;return X&32768?X|4294901760:X};N.prototype.readInt16BE=function K(J,Z){if(J=J>>>0,!Z)Y0(J,2,this.length);var X=this[J+1]|this[J]<<8;return X&32768?X|4294901760:X};N.prototype.readInt32LE=function K(J,Z){if(J=J>>>0,!Z)Y0(J,4,this.length);return this[J]|this[J+1]<<8|this[J+2]<<16|this[J+3]<<24};N.prototype.readInt32BE=function K(J,Z){if(J=J>>>0,!Z)Y0(J,4,this.length);return this[J]<<24|this[J+1]<<16|this[J+2]<<8|this[J+3]};N.prototype.readFloatLE=function K(J,Z){if(J=J>>>0,!Z)Y0(J,4,this.length);return q8.read(this,J,!0,23,4)};N.prototype.readFloatBE=function K(J,Z){if(J=J>>>0,!Z)Y0(J,4,this.length);return q8.read(this,J,!1,23,4)};N.prototype.readDoubleLE=function K(J,Z){if(J=J>>>0,!Z)Y0(J,8,this.length);return q8.read(this,J,!0,52,8)};N.prototype.readDoubleBE=function K(J,Z){if(J=J>>>0,!Z)Y0(J,8,this.length);return q8.read(this,J,!1,52,8)};function _0(K,J,Z,X,M,H){if(!N.isBuffer(K))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>M||J<H)throw new RangeError('"value" argument is out of bounds');if(Z+X>K.length)throw new RangeError("Index out of range")}N.prototype.writeUintLE=N.prototype.writeUIntLE=function K(J,Z,X,M){if(J=+J,Z=Z>>>0,X=X>>>0,!M){var H=Math.pow(2,8*X)-1;_0(this,J,Z,X,H,0)}var Y=1,U=0;this[Z]=J&255;while(++U<X&&(Y*=256))this[Z+U]=J/Y&255;return Z+X};N.prototype.writeUintBE=N.prototype.writeUIntBE=function K(J,Z,X,M){if(J=+J,Z=Z>>>0,X=X>>>0,!M){var H=Math.pow(2,8*X)-1;_0(this,J,Z,X,H,0)}var Y=X-1,U=1;this[Z+Y]=J&255;while(--Y>=0&&(U*=256))this[Z+Y]=J/U&255;return Z+X};N.prototype.writeUint8=N.prototype.writeUInt8=function K(J,Z,X){if(J=+J,Z=Z>>>0,!X)_0(this,J,Z,1,255,0);return this[Z]=J&255,Z+1};N.prototype.writeUint16LE=N.prototype.writeUInt16LE=function K(J,Z,X){if(J=+J,Z=Z>>>0,!X)_0(this,J,Z,2,65535,0);return this[Z]=J&255,this[Z+1]=J>>>8,Z+2};N.prototype.writeUint16BE=N.prototype.writeUInt16BE=function K(J,Z,X){if(J=+J,Z=Z>>>0,!X)_0(this,J,Z,2,65535,0);return this[Z]=J>>>8,this[Z+1]=J&255,Z+2};N.prototype.writeUint32LE=N.prototype.writeUInt32LE=function K(J,Z,X){if(J=+J,Z=Z>>>0,!X)_0(this,J,Z,4,4294967295,0);return this[Z+3]=J>>>24,this[Z+2]=J>>>16,this[Z+1]=J>>>8,this[Z]=J&255,Z+4};N.prototype.writeUint32BE=N.prototype.writeUInt32BE=function K(J,Z,X){if(J=+J,Z=Z>>>0,!X)_0(this,J,Z,4,4294967295,0);return this[Z]=J>>>24,this[Z+1]=J>>>16,this[Z+2]=J>>>8,this[Z+3]=J&255,Z+4};N.prototype.writeIntLE=function K(J,Z,X,M){if(J=+J,Z=Z>>>0,!M){var H=Math.pow(2,8*X-1);_0(this,J,Z,X,H-1,-H)}var Y=0,U=1,G=0;this[Z]=J&255;while(++Y<X&&(U*=256)){if(J<0&&G===0&&this[Z+Y-1]!==0)G=1;this[Z+Y]=(J/U>>0)-G&255}return Z+X};N.prototype.writeIntBE=function K(J,Z,X,M){if(J=+J,Z=Z>>>0,!M){var H=Math.pow(2,8*X-1);_0(this,J,Z,X,H-1,-H)}var Y=X-1,U=1,G=0;this[Z+Y]=J&255;while(--Y>=0&&(U*=256)){if(J<0&&G===0&&this[Z+Y+1]!==0)G=1;this[Z+Y]=(J/U>>0)-G&255}return Z+X};N.prototype.writeInt8=function K(J,Z,X){if(J=+J,Z=Z>>>0,!X)_0(this,J,Z,1,127,-128);if(J<0)J=255+J+1;return this[Z]=J&255,Z+1};N.prototype.writeInt16LE=function K(J,Z,X){if(J=+J,Z=Z>>>0,!X)_0(this,J,Z,2,32767,-32768);return this[Z]=J&255,this[Z+1]=J>>>8,Z+2};N.prototype.writeInt16BE=function K(J,Z,X){if(J=+J,Z=Z>>>0,!X)_0(this,J,Z,2,32767,-32768);return this[Z]=J>>>8,this[Z+1]=J&255,Z+2};N.prototype.writeInt32LE=function K(J,Z,X){if(J=+J,Z=Z>>>0,!X)_0(this,J,Z,4,2147483647,-2147483648);return this[Z]=J&255,this[Z+1]=J>>>8,this[Z+2]=J>>>16,this[Z+3]=J>>>24,Z+4};N.prototype.writeInt32BE=function K(J,Z,X){if(J=+J,Z=Z>>>0,!X)_0(this,J,Z,4,2147483647,-2147483648);if(J<0)J=4294967295+J+1;return this[Z]=J>>>24,this[Z+1]=J>>>16,this[Z+2]=J>>>8,this[Z+3]=J&255,Z+4};function CY(K,J,Z,X,M,H){if(Z+X>K.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function _Y(K,J,Z,X,M){if(J=+J,Z=Z>>>0,!M)CY(K,J,Z,4,340282346638528860000000000000000000000,-340282346638528860000000000000000000000);return q8.write(K,J,Z,X,23,4),Z+4}N.prototype.writeFloatLE=function K(J,Z,X){return _Y(this,J,Z,!0,X)};N.prototype.writeFloatBE=function K(J,Z,X){return _Y(this,J,Z,!1,X)};function AY(K,J,Z,X,M){if(J=+J,Z=Z>>>0,!M)CY(K,J,Z,8,179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,-179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000);return q8.write(K,J,Z,X,52,8),Z+8}N.prototype.writeDoubleLE=function K(J,Z,X){return AY(this,J,Z,!0,X)};N.prototype.writeDoubleBE=function K(J,Z,X){return AY(this,J,Z,!1,X)};N.prototype.copy=function K(J,Z,X,M){if(!N.isBuffer(J))throw new TypeError("argument should be a Buffer");if(!X)X=0;if(!M&&M!==0)M=this.length;if(Z>=J.length)Z=J.length;if(!Z)Z=0;if(M>0&&M<X)M=X;if(M===X)return 0;if(J.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");if(M>this.length)M=this.length;if(J.length-Z<M-X)M=J.length-Z+X;var H=M-X;if(this===J&&typeof Uint8Array.prototype.copyWithin==="function")this.copyWithin(Z,X,M);else Uint8Array.prototype.set.call(J,this.subarray(X,M),Z);return H};N.prototype.fill=function K(J,Z,X,M){if(typeof J==="string"){if(typeof Z==="string")M=Z,Z=0,X=this.length;else if(typeof X==="string")M=X,X=this.length;if(M!==void 0&&typeof M!=="string")throw new TypeError("encoding must be a string");if(typeof M==="string"&&!N.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(J.length===1){var H=J.charCodeAt(0);if(M==="utf8"&&H<128||M==="latin1")J=H}}else if(typeof J==="number")J=J&255;else if(typeof J==="boolean")J=Number(J);if(Z<0||this.length<Z||this.length<X)throw new RangeError("Out of range index");if(X<=Z)return this;if(Z=Z>>>0,X=X===void 0?this.length:X>>>0,!J)J=0;var Y;if(typeof J==="number")for(Y=Z;Y<X;++Y)this[Y]=J;else{var U=N.isBuffer(J)?J:N.from(J,M),G=U.length;if(G===0)throw new TypeError('The value "'+J+'" is invalid for argument "value"');for(Y=0;Y<X-Z;++Y)this[Y+Z]=U[Y%G]}return this};var XF=/[^+/0-9A-Za-z-_]/g;function MF(K){if(K=K.split("=")[0],K=K.trim().replace(XF,""),K.length<2)return"";while(K.length%4!==0)K=K+"=";return K}function rJ(K,J){J=J||1/0;var Z,X=K.length,M=null,H=[];for(var Y=0;Y<X;++Y){if(Z=K.charCodeAt(Y),Z>55295&&Z<57344){if(!M){if(Z>56319){if((J-=3)>-1)H.push(239,191,189);continue}else if(Y+1===X){if((J-=3)>-1)H.push(239,191,189);continue}M=Z;continue}if(Z<56320){if((J-=3)>-1)H.push(239,191,189);M=Z;continue}Z=(M-55296<<10|Z-56320)+65536}else if(M){if((J-=3)>-1)H.push(239,191,189)}if(M=null,Z<128){if((J-=1)<0)break;H.push(Z)}else if(Z<2048){if((J-=2)<0)break;H.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((J-=3)<0)break;H.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((J-=4)<0)break;H.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return H}function HF(K){var J=[];for(var Z=0;Z<K.length;++Z)J.push(K.charCodeAt(Z)&255);return J}function YF(K,J){var Z,X,M,H=[];for(var Y=0;Y<K.length;++Y){if((J-=2)<0)break;Z=K.charCodeAt(Y),X=Z>>8,M=Z%256,H.push(M),H.push(X)}return H}function LY(K){return iJ.toByteArray(MF(K))}function dK(K,J,Z,X){for(var M=0;M<X;++M){if(M+Z>=J.length||M>=K.length)break;J[M+Z]=K[M]}return M}function J1(K,J){return K instanceof J||K!=null&&K.constructor!=null&&K.constructor.name!=null&&K.constructor.name===J.name}function tJ(K){return K!==K}var UF=function(){var K="0123456789abcdef",J=new Array(256);for(var Z=0;Z<16;++Z){var X=Z*16;for(var M=0;M<16;++M)J[X+M]=K[Z]+K[M]}return J}()});var wY=O((hN,eJ)=>{var jY=HY(),RY=GY(),bK=QF();function QF(){let K=S("buffer");return K&&K.Buffer?K.Buffer:DY().Buffer}var VF=bK.from("==","base64");function WF(K){let J=!1,Z=!1,X=Math.pow(2,31)-1;if(typeof K==="boolean")J=K;else K=K||{},X=K.maxInt||Math.pow(2,31)-1,Z=!!K.urlSafe,J=!!K.fixedLength;Y.uuid=jY(),Y.decode=BY;let M=xY(Y.uuid,Z),H=Math.floor(K.startFrom||0);if(isNaN(X))throw new Error(`maxInt must be a number. recieved ${K.maxInt}`);if(isNaN(H)||!(X>H&&H>=0))throw new Error([`when passed, opts.startFrom must be a number between 0 and ${X}.`,"Only the integer part matters.",`- got: ${K.startFrom}`].join("\n"));return Y;function Y(){let U;if(H===X)Y.uuid=jY(),M=xY(Y.uuid,Z),H=0;if(J)U=M+`0000000000${H}`.slice(-10);else U=M+H;return H=H+1|0,U}}function xY(K,J){let Z=bK.concat([bK.from(RY.parse(K)),VF]).toString("base64");if(J)return Z.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"-");return Z.replace(/=+$/,"/")}function BY(K,J){if(J=J||{},!!J.urlSafe)K=K.replace(/-([^-]*)$/,"/$1").replace(/-/g,"+").replace(/_/g,"/");if(K.length<22)return null;let X=K.lastIndexOf("/");if(X===-1)return null;let M=K.substring(0,X),H=Number(K.substring(X+1));if(!M||isNaN(H))return null;return{uuid:RY.unparse(bK.from(M+"==","base64")),count:H}}eJ.exports=WF;eJ.exports.decode=BY});var yY=O((vN,kY)=>{var PF=$5(),{pipeline:FF}=S("stream"),SY=$1(),TF=kJ(),{through:IF}=m1(),OF=gK(),NF=wY()();function CF(K){this.cmd="connack",this.returnCode=K.returnCode,this.sessionPresent=K.sessionPresent}function _F(K,J){this.client=K,this.packet=J}var AF=[DF,jF,xF,BF,wF,SF,JZ,kF],KZ=["","unacceptable protocol version","identifier rejected","Server unavailable","bad user name or password","not authorized","keep alive limit exceeded"];function LF(K,J,Z){clearTimeout(K._connectTimer),K._connectTimer=null,K.connecting=!0,K.broker.preConnect(K,J,X);function X(M,H){if(!M&&H===!0)setImmediate(EF,K,J,Z);else K.connecting=!1,Z(M)}}function EF(K,J,Z){let X=J.clientId,M=0;if(J.protocolVersion<3||J.protocolVersion>4)M=1;if(J.protocolVersion===3&&X.length>K.broker.maxClientsIdLength)M=2;if(K.broker.keepaliveLimit&&(!J.keepalive||J.keepalive>K.broker.keepaliveLimit))M=6;if(M>0){let H=new Error(KZ[M]);H.errorCode=M,JZ({client:K,returnCode:M,sessionPresent:!1},Z.bind(this,H));return}K.id=X||"aedes_"+NF(),K.clean=J.clean,K.version=J.protocolVersion,K._will=J.will,K.broker._series(new _F(K,J),AF,{returnCode:0,sessionPresent:!1},function(H){if(this.client.connecting=!1,!H)this.client.connected=!0,this.client.broker.emit("clientReady",K),this.client.emit("connected");Z(H)})}function DF(K,J){let Z=this.client;Z.pause(),Z.broker.authenticate(Z,this.packet.username,this.packet.password,X);function X(M,H){if(Z.closed||Z.broker.closed)return;if(!M&&H)return Z._authorized=!0,J();if(M){let Y=M.returnCode;if(Y&&(Y>=2&&Y<=5))K.returnCode=Y;else K.returnCode=5;if(!M.message)M.message=KZ[K.returnCode]}else K.returnCode=5,M=new Error(KZ[K.returnCode]);M.errorCode=K.returnCode,K.client=Z,JZ(K,Z.close.bind(Z,J.bind(this,M)))}}function jF(K,J){if(this.packet.keepalive>0){let Z=this.client;Z._keepaliveInterval=this.packet.keepalive*1500+1,Z._keepaliveTimer=PF(function X(){Z.broker.emit("keepaliveTimeout",Z),Z.emit("error",new Error("keep alive timeout"))},Z._keepaliveInterval)}J()}function xF(K,J){let Z=this.client;if(!this.packet.clean){Z.broker.persistence.subscriptionsByClient({id:Z.id,done:J,arg:K},RF);return}K.sessionPresent=!1,Z.broker.persistence.cleanSubscriptions(Z,J)}function RF(K,J,Z){if(K)return Z.done(K);Z.arg.subs=J,Z.done()}function BF(K,J){if(K.subs){OF(this.client,{subscriptions:K.subs},!0,J),K.sessionPresent=!!K.subs;return}K.sessionPresent=!1,J()}function wF(K,J){let Z=this.client;Z.will=Z._will,Z.broker.persistence.delWill(Z,function(){if(Z.will)Z.broker.persistence.putWill(Z,Z.will,J);else J()})}function SF(K,J){let Z=this.client;Z.broker.registerClient(Z),J()}function JZ(K,J){let Z=K.client||this.client,X=new CF(K);SY(Z,X,function(M){if(!M)Z.broker.emit("connackSent",X,Z),Z.connackSent=!0;J(M)})}function kF(K,J){let Z=this.client,X=Z.broker.persistence,M=X.outgoingStream(Z);Z.resume(),FF(M,IF(function H(Y,U,G){let z=new TF(Y,Z);z.writeCallback=(q,$)=>G(q),X.outgoingUpdate(Z,z,yF)}),J)}function yF(K,J,Z){let X=Z.writeCallback;if(K)return J.emit("error",K),X();let M=Z.cmd==="publish"?J.broker.authorizeForward(J,Z):!0,H=J.broker.persistence;if(J.clean||!M)H.outgoingClearMessageId(J,Z,X);else SY(J,Z,X)}kY.exports=LF});var gY=O((gN,vY)=>{var hY=$1();function hF(K){this.cmd="puback",this.messageId=K.messageId}function vF(K){this.cmd="pubrec",this.messageId=K.messageId}var gF=[fF,mF];function uF(K,J,Z){let X=J.topic,M;if(X.length===0)return M=new Error("empty topic not allowed in PUBLISH"),Z(M);if(X.indexOf("#")>-1)return M=new Error("# is not allowed in PUBLISH"),Z(M);if(X.indexOf("+")>-1)return M=new Error("+ is not allowed in PUBLISH"),Z(M);K.broker._series(K,gF,J,Z)}function mF(K,J){let Z=this;switch(K.qos){case 2:Z.broker.persistence.incomingStorePacket(Z,K,function(X){if(X)return J(X);hY(Z,new vF(K),J)});break;case 1:hY(Z,new hF(K),function(X){if(X)return J(X);Z.broker.publish(K,Z,J)});break;case 0:Z.broker.publish(K,Z,J);break;default:}}function fF(K,J){this.broker.authorizePublish(this,K,J)}vY.exports=uF});var mY=O((uN,uY)=>{function cF(K,J,Z){K.broker.persistence.outgoingClearMessageId(K,J,function(M,H){K.broker.emit("ack",H,K),Z(M)})}uY.exports=cF});var cY=O((mN,fY)=>{var dF=$1();function bF(K,J){this.client=K,this.packet=J}function pF(K){this.cmd="pubcomp",this.messageId=K.messageId}var lF=[nF,oF,rF,aF];function iF(K,J,Z){K.broker._series(new bF(K,J),lF,{},Z)}function nF(K,J){this.client.broker.persistence.incomingGetPacket(this.client,this.packet,X);function X(M,H){K.packet=H,J(M)}}function oF(K,J){this.client.broker.publish(K.packet,this.client,J)}function rF(K,J){dF(this.client,new pF(K.packet),J)}function aF(K,J){this.client.broker.persistence.incomingDelPacket(this.client,K.packet,J)}fY.exports=iF});var pY=O((fN,bY)=>{var dY=$1();function sF(K){this.cmd="pubrel",this.messageId=K.messageId}function tF(K,J,Z){let X=new sF(J);if(K.clean){dY(K,X,Z);return}K.broker.persistence.outgoingUpdate(K,X,M);function M(H){if(H)Z(H);else dY(K,X,Z)}}bY.exports=tF});var iY=O((cN,lY)=>{var eF=$1(),KT={cmd:"pingresp"};function JT(K,J,Z){K.broker.emit("ping",J,K),eF(K,KT,Z)}lY.exports=JT});var rY=O((dN,oY)=>{var ZT=yY(),XT=gK(),MT=hJ(),HT=gY(),YT=mY(),UT=cY(),GT=pY(),zT=iY();function qT(K,J,Z){if(J.cmd==="connect"){if(K.connecting||K.connected){nY(K.conn,J,Z);return}ZT(K,J,Z);return}if(!K.connecting&&!K.connected){nY(K.conn,J,Z);return}switch(J.cmd){case"publish":HT(K,J,Z);break;case"subscribe":XT(K,J,!1,Z);break;case"unsubscribe":MT(K,J,Z);break;case"pubcomp":case"puback":YT(K,J,Z);break;case"pubrel":UT(K,J,Z);break;case"pubrec":GT(K,J,Z);break;case"pingreq":zT(K,J,Z);break;case"disconnect":K._disconnected=!0,K.conn.destroy(),Z();return;default:K.conn.destroy(),Z();return}if(K._keepaliveInterval>0)K._keepaliveTimer.reschedule(K._keepaliveInterval)}function nY(K,J,Z){K.destroy();let X=new Error("Invalid protocol");X.info=J,Z(X)}oY.exports=qT});var XU=O((bN,ZU)=>{var $T=wJ(),QT=S("events"),VT=S("util"),WT=bH(),sY=p1(),tY=$1(),PT=kJ(),FT=gK(),eY=hJ(),KU=rY(),{pipeline:TT}=S("stream"),{through:IT}=m1();ZU.exports=Z1;function Z1(K,J,Z){let X=this;this.closed=!1,this.connecting=!1,this.connected=!1,this.connackSent=!1,this.errored=!1,this.id=null,this.clean=!0,this.version=null,this.subscriptions={},this.duplicates={},this.broker=K,this.conn=J,J.client=this,this._disconnected=!1,this._authorized=!1,this._parsingBatch=1,this._nextId=Math.ceil(Math.random()*65535),this.req=Z,this.connDetails=Z?Z.connDetails:null,this.will=null,this._will=null,this._parser=$T.parser(),this._parser.client=this,this._parser._queue=[],this._parser.on("packet",CT),this.once("connected",_T);function M(Y){if(Y){X.emit("error",Y);return}let U=X;if(U._paused)return;if(X._parsingBatch--,X._parsingBatch<=0){X._parsingBatch=0;let G=U.conn.read(null);if(G)U._parser.parse(G)}}this._nextBatch=M,J.on("readable",M),this.on("error",JU),J.on("error",this.emit.bind(this,"error")),this._parser.on("error",this.emit.bind(this,"error")),J.on("end",this.close.bind(this)),this._eos=WT(this.conn,this.close.bind(this));let H=(Y)=>{if(Y.clientId===X.id&&Y.nl)return;return OT(X,Y)&&X.broker.authorizeForward(X,Y)};this.deliver0=function Y(U,G){let z=H(U);if(z)setImmediate(()=>{let q=new sY(z,K);q.qos=0,tY(X,q,function($){X._onError($),G()})});else setImmediate(G)},this.deliverQoS=function Y(U,G){if(U.qos===0){X.deliver0(U,G);return}let z=H(U);if(z)setImmediate(()=>{let q=new PT(z,X),$=X.subscriptions[q.topic];if($&&($.qos||0)<q.qos)q.qos=$.qos;if(q.writeCallback=G,X.clean||q.retain)aY(null,X,q);else K.persistence.outgoingUpdate(X,q,aY)});else if(X.clean===!1)X.broker.persistence.outgoingClearMessageId(X,U,$8),setImmediate(G);else setImmediate(G)},this._keepaliveTimer=null,this._keepaliveInterval=-1,this._connectTimer=setTimeout(function(){X.emit("error",new Error("connect did not arrive in time"))},K.connectTimeout)}function OT(K,J){let Z=J.brokerId;if(!Z)return!0;let X=K.duplicates,M=J.brokerCounter,H=(X[Z]||0)<M;if(H)X[Z]=M;return H}function aY(K,J,Z){if(K)J.emit("error",K),Z.writeCallback();else tY(J,Z,function(X){if(X)J.emit("error",X);Z.writeCallback()})}function NT(K){K.callback()}function JU(K){if(!K)return;this.errored=!0,this.conn.removeAllListeners("error"),this.conn.on("error",$8);let J=this.conn._writableState;(typeof J.getBuffer==="function"?J.getBuffer():J.buffer).forEach(NT),this.broker.emit(this.id?"clientError":"connectionError",this,K),this.close()}VT.inherits(Z1,QT);Z1.prototype._onError=JU;Z1.prototype.publish=function(K,J){let Z=new sY(K,this.broker),X=this;if(Z.qos===0){this.deliver0(Z,J);return}if(!this.clean&&this.id)this.broker.persistence.outgoingEnqueue({clientId:this.id},Z,function M(H){if(H)return J(H);X.deliverQoS(Z,J)});else X.deliverQoS(Z,J)};Z1.prototype.subscribe=function(K,J){if(!K.subscriptions){if(!Array.isArray(K))K=[K];K={subscriptions:K}}FT(this,K,!1,J)};Z1.prototype.unsubscribe=function(K,J){if(!K.unsubscriptions){if(!Array.isArray(K))K=[K];K={unsubscriptions:K}}eY(this,K,J)};Z1.prototype.close=function(K){if(this.closed){if(typeof K==="function")K();return}let J=this,Z=this.conn;if(this.closed=!0,this._parser.removeAllListeners("packet"),Z.removeAllListeners("readable"),this._parser._queue=null,this._keepaliveTimer)this._keepaliveTimer.clear(),this._keepaliveInterval=-1,this._keepaliveTimer=null;if(this._connectTimer)clearTimeout(this._connectTimer),this._connectTimer=null;this._eos(),this._eos=$8,eY(this,{unsubscriptions:Object.keys(this.subscriptions)},X);function X(){let M=J.will;if(!J._disconnected&&M)J.broker.authorizePublish(J,M,function(H){if(H)return Y();J.broker.publish(M,J,Y);function Y(){J.broker.persistence.delWill({id:J.id,brokerId:J.broker.id},$8)}});else if(M)J.broker.persistence.delWill({id:J.id,brokerId:J.broker.id},$8);if(J.will=null,J._will=null,J.connected=!1,J.connecting=!1,Z.removeAllListeners("error"),Z.on("error",$8),J.broker.clients[J.id]&&J._authorized)J.broker.unregisterClient(J);if(J.conn.emit("drain"),J.conn.removeAllListeners("drain"),Z.destroy(),typeof K==="function")K()}};Z1.prototype.pause=function(){this._paused=!0};Z1.prototype.resume=function(){this._paused=!1,this._nextBatch()};function CT(K){let J=this.client;if(J._parsingBatch++,J.connackSent||J._parsingBatch===1)KU(J,K,J._nextBatch);else if(this._queue.length<J.broker.queueLimit)this._queue.push(K);else this.emit("error",new Error("Client queue limit reached"))}function _T(){let K=this._parser._queue;if(K){for(let J=0,Z=K.length;J<Z;J++)KU(this,K[J],this._nextBatch);this._parser._queue=null}}Z1.prototype.emptyOutgoingQueue=function(K){let J=this,Z=J.broker.persistence;function X(M,H,Y){Z.outgoingClearMessageId(J,M,Y)}TT(Z.outgoingStream(J),IT(X),K)};function $8(){}});var MU=O((pN,AT)=>{AT.exports={name:"aedes",version:"0.51.3",description:"Stream-based MQTT broker",main:"aedes.js",types:"aedes.d.ts",scripts:{lint:"npm run lint:standard && npm run lint:typescript && npm run lint:markdown","lint:fix":"standard --fix && eslint -c types/.eslintrc.json --fix aedes.d.ts types/**/*.ts test/types/**/*.test-d.ts","lint:standard":"standard --verbose | snazzy","lint:typescript":"eslint -c types/.eslintrc.json aedes.d.ts types/**/*.ts test/types/**/*.test-d.ts","lint:markdown":"markdownlint docs/*.md README.md",test:"npm run lint && npm run unit && npm run test:typescript","test:ci":"npm run lint && npm run unit -- --cov --no-check-coverage --coverage-report=lcovonly && npm run test:typescript","test:report":"npm run lint && npm run unit:report && npm run test:typescript","test:typescript":"tsd",unit:"tap -J test/*.js","unit:report":"tap -J test/*.js --cov --coverage-report=html --coverage-report=cobertura | tee out.tap","license-checker":"license-checker --production --onlyAllow=\"MIT;ISC;BSD-3-Clause;BSD-2-Clause;0BSD\"",release:"read -p 'GITHUB_TOKEN: ' GITHUB_TOKEN && export GITHUB_TOKEN=$GITHUB_TOKEN && release-it --disable-metrics"},"release-it":{github:{release:!0},git:{tagName:"v${version}"},hooks:{"before:init":["npm run test:ci"]},npm:{publish:!0}},"pre-commit":["test"],tsd:{directory:"test/types"},standard:{ignore:["types/*","test/types/*"]},repository:{type:"git",url:"git+https://github.com/moscajs/aedes.git"},keywords:["mqtt","broker","server","mqtt-server","stream","streams","publish","subscribe","pubsub","messaging","mosca","mosquitto","iot","internet","of","things"],author:"Matteo Collina <hello@matteocollina.com>",contributors:[{name:"Gavin D'mello",url:"https://github.com/GavinDmello"},{name:"Behrad Zari",url:"https://github.com/behrad"},{name:"Gnought",url:"https://github.com/gnought"},{name:"Daniel Lando",url:"https://github.com/robertsLando"}],license:"MIT",funding:{type:"opencollective",url:"https://opencollective.com/aedes"},bugs:{url:"https://github.com/moscajs/aedes/issues"},homepage:"https://github.com/moscajs/aedes#readme",engines:{node:">=16"},devDependencies:{"@sinonjs/fake-timers":"^11.2.2","@types/node":"^20.11.17","@typescript-eslint/eslint-plugin":"^7.0.1","@typescript-eslint/parser":"^7.0.1","concat-stream":"^2.0.0",duplexify:"^4.1.2","license-checker":"^25.0.1","markdownlint-cli":"^0.41.0",mqtt:"^5.3.5","mqtt-connection":"^4.1.0","pre-commit":"^1.2.2",proxyquire:"^2.1.3","release-it":"^17.0.5",snazzy:"^9.0.0",standard:"^17.1.0",tap:"^16.3.10",tsd:"^0.31.0",typescript:"^5.3.3","websocket-stream":"^5.5.2"},dependencies:{"aedes-packet":"^3.0.0","aedes-persistence":"^9.1.2","end-of-stream":"^1.4.4",fastfall:"^1.5.1",fastparallel:"^2.4.1",fastseries:"^2.0.0",hyperid:"^3.2.0",mqemitter:"^6.0.0","mqtt-packet":"^9.0.0",retimer:"^4.0.0",reusify:"^1.0.4",uuid:"^10.0.0"}}});var zU=O((lN,GU)=>{var LT=S("events"),ET=S("util"),DT=nK(),jT=IZ(),{v4:xT}=_6(),RT=m8(),{pipeline:BT}=S("stream"),wT=p1(),ST=w6(),kT=u6(),yT=XU(),{$SYS_PREFIX:X1,bulk:hT}=m1();GU.exports=A0.createBroker=A0;var vT={concurrency:100,heartbeatInterval:60000,connectTimeout:30000,decodeProtocol:null,preConnect:bT,authenticate:pT,authorizePublish:lT,authorizeSubscribe:iT,authorizeForward:nT,published:oT,trustProxy:!1,trustedProxies:[],queueLimit:42,maxClientsIdLength:23,keepaliveLimit:0};function A0(K){let J=this;if(!(this instanceof A0))return new A0(K);K=Object.assign({},vT,K),this.id=K.id||xT(),this.counter=0,this.queueLimit=K.queueLimit,this.connectTimeout=K.connectTimeout,this.keepaliveLimit=K.keepaliveLimit,this.maxClientsIdLength=K.maxClientsIdLength,this.mq=K.mq||kT({concurrency:K.concurrency,matchEmptyLevels:!0}),this.handle=function z(q,$){return q.setMaxListeners(K.concurrency*2),new yT(J,q,$)},this.persistence=K.persistence||ST(),this.persistence.broker=this,this._parallel=DT(),this._series=jT(),this._enqueuers=RT(uT),this.preConnect=K.preConnect,this.authenticate=K.authenticate,this.authorizePublish=K.authorizePublish,this.authorizeSubscribe=K.authorizeSubscribe,this.authorizeForward=K.authorizeForward,this.published=K.published,this.decodeProtocol=K.decodeProtocol,this.trustProxy=K.trustProxy,this.trustedProxies=K.trustedProxies,this.clients={},this.brokers={};let Z=X1+J.id+"/heartbeat",X=X1+J.id+"/birth";this._heartbeatInterval=setInterval(H,K.heartbeatInterval);let M=Buffer.from(J.id,"utf8");J.publish({topic:X,payload:M},v8);function H(){J.publish({topic:Z,payload:M},v8)}function Y(z){if(J.brokers[z]+3*K.heartbeatInterval<Date.now())delete J.brokers[z]}this._clearWillInterval=setInterval(function(){Object.keys(J.brokers).forEach(Y),BT(J.persistence.streamWill(J.brokers),hT(U),function z(q){if(q)J.emit("error",q)})},K.heartbeatInterval*4);function U(z,q){J._parallel(J,G,z,q)}function G(z,q){if(J.brokers[z.brokerId]!==void 0&&J.brokers[z.brokerId]+3*K.heartbeatInterval>=Date.now())return q();this.authorizePublish(J.clients[z.clientId]||null,z,function(V){if(V)return W();J.publish(z,W);function W(x){if(x)return q(x);J.persistence.delWill({id:z.clientId,brokerId:z.brokerId},q)}})}this.mq.on(X1+"+/heartbeat",function z(q,$){J.brokers[q.payload.toString()]=Date.now(),$()}),this.mq.on(X1+"+/birth",function z(q,$){let V=q.payload.toString();if(V!==J.id)for(let W in J.clients)delete J.clients[W].duplicates[V];$()}),this.mq.on(X1+"+/new/clients",function z(q,$){let V=q.topic.split("/")[1],W=q.payload.toString();if(J.clients[W]&&V!==J.id)if(J.clients[W].closed)J.deleteClient(W),$();else J.clients[W].close($);else $()}),this.connectedClients=0,this.closed=!1}ET.inherits(A0,LT);function HU(K,J){if(K.retain)this.broker.persistence.storeRetained(K,J);else J()}function YU(K,J){if(this.client)K.clientId=this.client.id;this.broker.mq.emit(K,J)}function gT(K,J){let Z=this.broker._enqueuers.get();Z.complete=J,Z.packet=K,Z.topic=K.topic,Z.broker=this.broker,this.broker.persistence.subscriptionsByTopic(K.topic,Z.done)}function uT(){this.next=null,this.complete=null,this.packet=null,this.topic=null,this.broker=null;let K=this;this.done=function J(Z,X){let M=K.broker;if(Z){M.emit("error",Z);return}if(K.topic.indexOf(X1)===0)X=X.filter(mT);let{packet:H,complete:Y}=K;K.packet=null,K.complete=null,K.topic=null,M.persistence.outgoingEnqueueCombi(X,H,Y),M._enqueuers.release(K)}}function mT(K){let J=K.topic.charCodeAt(0);return J!==43&&J!==35}function UU(K,J){this.broker.published(this.packet,this.client,J),this.broker.emit("publish",this.packet,this.client)}var fT=[HU,YU,UU],cT=[HU,gT,YU,UU];A0.prototype.publish=function(K,J,Z){if(typeof J==="function")Z=J,J=null;let X=new wT(K,this),M=X.qos>0?cT:fT;this._series(new rT(this,J,K),M,X,Z)};A0.prototype.subscribe=function(K,J,Z){this.mq.on(K,J,Z)};A0.prototype.unsubscribe=function(K,J,Z){this.mq.removeListener(K,J,Z)};A0.prototype.registerClient=function(K){let J=this;if(this.clients[K.id])this.clients[K.id].close(function Z(){J._finishRegisterClient(K)});else this._finishRegisterClient(K)};A0.prototype._finishRegisterClient=function(K){this.connectedClients++,this.clients[K.id]=K,this.emit("client",K),this.publish({topic:X1+this.id+"/new/clients",payload:Buffer.from(K.id,"utf8")},v8)};A0.prototype.unregisterClient=function(K){this.deleteClient(K.id),this.emit("clientDisconnect",K),this.publish({topic:X1+this.id+"/disconnect/clients",payload:Buffer.from(K.id,"utf8")},v8)};A0.prototype.deleteClient=function(K){this.connectedClients--,delete this.clients[K]};function dT(K,J){this.clients[K].close(J)}A0.prototype.close=function(K=v8){let J=this;if(this.closed)return K();this.closed=!0,clearInterval(this._heartbeatInterval),clearInterval(this._clearWillInterval),this._parallel(this,dT,Object.keys(this.clients),Z);function Z(){J.emit("closed"),J.mq.close(K)}};A0.prototype.version=MU().version;function bT(K,J,Z){Z(null,!0)}function pT(K,J,Z,X){X(null,!0)}function lT(K,J,Z){if(J.topic.startsWith(X1))return Z(new Error(X1+" topic is reserved"));Z(null)}function iT(K,J,Z){Z(null,J)}function nT(K,J){return J}function oT(K,J,Z){Z(null)}function rT(K,J,Z){this.broker=K,this.client=J,this.packet=Z}function v8(){}});var qU=O((iN,pK)=>{var aT=(()=>{let M={},H={font:"Standard",fontPath:"./fonts"};function Y(F,T){let Q={},P,I,C,R,L=[[16384,"vLayout",2],[8192,"vLayout",1],[4096,"vRule5",!0],[2048,"vRule4",!0],[1024,"vRule3",!0],[512,"vRule2",!0],[256,"vRule1",!0],[128,"hLayout",2],[64,"hLayout",1],[32,"hRule6",!0],[16,"hRule5",!0],[8,"hRule4",!0],[4,"hRule3",!0],[2,"hRule2",!0],[1,"hRule1",!0]];P=T!==null?T:F,I=0,C=L.length;while(I<C){if(R=L[I],P>=R[0])P=P-R[0],Q[R[1]]=typeof Q[R[1]]==="undefined"?R[2]:Q[R[1]];else if(R[1]!=="vLayout"&&R[1]!=="hLayout")Q[R[1]]=!1;I++}if(typeof Q.hLayout==="undefined")if(F===0)Q.hLayout=1;else if(F===-1)Q.hLayout=0;else if(Q.hRule1||Q.hRule2||Q.hRule3||Q.hRule4||Q.hRule5||Q.hRule6)Q.hLayout=3;else Q.hLayout=2;else if(Q.hLayout===2){if(Q.hRule1||Q.hRule2||Q.hRule3||Q.hRule4||Q.hRule5||Q.hRule6)Q.hLayout=3}if(typeof Q.vLayout==="undefined")if(Q.vRule1||Q.vRule2||Q.vRule3||Q.vRule4||Q.vRule5)Q.vLayout=3;else Q.vLayout=0;else if(Q.vLayout===2){if(Q.vRule1||Q.vRule2||Q.vRule3||Q.vRule4||Q.vRule5)Q.vLayout=3}return Q}function U(F,T,Q){if(F===T&&F!==Q)return F;return!1}function G(F,T){let Q="|/\\[]{}()<>";if(F==="_"){if(Q.indexOf(T)!==-1)return T}else if(T==="_"){if(Q.indexOf(F)!==-1)return F}return!1}function z(F,T){let Q="| /\\ [] {} () <>",P=Q.indexOf(F),I=Q.indexOf(T);if(P!==-1&&I!==-1){if(P!==I&&Math.abs(P-I)!==1){let C=Math.max(P,I),R=C+1;return Q.substring(C,R)}}return!1}function q(F,T){let Q="[] {} ()",P=Q.indexOf(F),I=Q.indexOf(T);if(P!==-1&&I!==-1){if(Math.abs(P-I)<=1)return"|"}return!1}function $(F,T){let Q="/\\ \\/ ><",P={0:"|",3:"Y",6:"X"},I=Q.indexOf(F),C=Q.indexOf(T);if(I!==-1&&C!==-1){if(C-I===1)return P[I]}return!1}function V(F,T,Q){if(F===Q&&T===Q)return Q;return!1}function W(F,T){if(F===T)return F;return!1}function x(F,T){let Q="|/\\[]{}()<>";if(F==="_"){if(Q.indexOf(T)!==-1)return T}else if(T==="_"){if(Q.indexOf(F)!==-1)return F}return!1}function _(F,T){let Q="| /\\ [] {} () <>",P=Q.indexOf(F),I=Q.indexOf(T);if(P!==-1&&I!==-1){if(P!==I&&Math.abs(P-I)!==1){let C=Math.max(P,I),R=C+1;return Q.substring(C,R)}}return!1}function j(F,T){if(F==="-"&&T==="_"||F==="_"&&T==="-")return"=";return!1}function A(F,T){if(F==="|"&&T==="|")return"|";return!1}function B(F,T,Q){if(T===" "||T==="")return F;else if(T===Q&&F!==" ")return F;else return T}function p(F,T,Q){if(Q.fittingRules.vLayout===0)return"invalid";let P,I=Math.min(F.length,T.length),C,R,L=!1,E;if(I===0)return"invalid";for(P=0;P<I;P++)if(C=F.substring(P,P+1),R=T.substring(P,P+1),C!==" "&&R!==" ")if(Q.fittingRules.vLayout===1)return"invalid";else if(Q.fittingRules.vLayout===2)return"end";else{if(A(C,R)){L=L||!1;continue}if(E=!1,E=Q.fittingRules.vRule1?W(C,R):E,E=!E&&Q.fittingRules.vRule2?x(C,R):E,E=!E&&Q.fittingRules.vRule3?_(C,R):E,E=!E&&Q.fittingRules.vRule4?j(C,R):E,L=!0,!E)return"invalid"}if(L)return"end";else return"valid"}function v(F,T,Q){let{length:P,length:I}=F,C=T.length,R,L,E,w=1,n,s,u;while(w<=P){R=F.slice(Math.max(0,I-w),I),L=T.slice(0,Math.min(P,w)),E=L.length,u="";for(n=0;n<E;n++)if(s=p(R[n],L[n],Q),s==="end")u=s;else if(s==="invalid"){u=s;break}else if(u==="")u="valid";if(u==="invalid"){w--;break}if(u==="end")break;if(u==="valid")w++}return Math.min(P,w)}function t(F,T,Q){let P,I=Math.min(F.length,T.length),C,R,L="",E;for(P=0;P<I;P++)if(C=F.substring(P,P+1),R=T.substring(P,P+1),C!==" "&&R!==" ")if(Q.fittingRules.vLayout===1)L+=B(C,R);else if(Q.fittingRules.vLayout===2)L+=B(C,R);else E=!1,E=Q.fittingRules.vRule5?A(C,R):E,E=!E&&Q.fittingRules.vRule1?W(C,R):E,E=!E&&Q.fittingRules.vRule2?x(C,R):E,E=!E&&Q.fittingRules.vRule3?_(C,R):E,E=!E&&Q.fittingRules.vRule4?j(C,R):E,L+=E;else L+=B(C,R);return L}function L0(F,T,Q,P){let I=F.length,C=T.length,R=F.slice(0,Math.max(0,I-Q)),L=F.slice(Math.max(0,I-Q),I),E=T.slice(0,Math.min(Q,C)),w,n,s,u=[],l,D0=[];n=L.length;for(w=0;w<n;w++){if(w>=C)s=L[w];else s=t(L[w],E[w],P);u.push(s)}return l=T.slice(Math.min(Q,C),C),D0.concat(R,u,l)}function U0(F,T){let Q,P=F.length,I="";for(Q=0;Q<T;Q++)I+=" ";for(Q=0;Q<P;Q++)F[Q]+=I}function g0(F,T,Q){let P=F[0].length,I=T[0].length,C;if(P>I)U0(T,P-I);else if(I>P)U0(F,I-P);return C=v(F,T,Q),L0(F,T,C,Q)}function M0(F,T,Q){if(Q.fittingRules.hLayout===0)return 0;let P,I=F.length,C=T.length,R=I,L=1,E=!1,w=!1,n,s,u,l;if(I===0)return 0;K:while(L<=R){let D0=I-L;n=F.substring(D0,D0+L),s=T.substring(0,Math.min(L,C));for(P=0;P<Math.min(L,C);P++)if(u=n.substring(P,P+1),l=s.substring(P,P+1),u!==" "&&l!==" "){if(Q.fittingRules.hLayout===1){L=L-1;break K}else if(Q.fittingRules.hLayout===2){if(u===Q.hardBlank||l===Q.hardBlank)L=L-1;break K}else if(E=!0,w=!1,w=Q.fittingRules.hRule1?U(u,l,Q.hardBlank):w,w=!w&&Q.fittingRules.hRule2?G(u,l,Q.hardBlank):w,w=!w&&Q.fittingRules.hRule3?z(u,l,Q.hardBlank):w,w=!w&&Q.fittingRules.hRule4?q(u,l,Q.hardBlank):w,w=!w&&Q.fittingRules.hRule5?$(u,l,Q.hardBlank):w,w=!w&&Q.fittingRules.hRule6?V(u,l,Q.hardBlank):w,!w){L=L-1;break K}}if(E)break;L++}return Math.min(R,L)}function E0(F,T,Q,P){let I,C,R=[],L,E,w,n,s,u,l,D0;for(I=0;I<P.height;I++){l=F[I],D0=T[I],s=l.length,u=D0.length,L=s-Q,E=l.substr(0,Math.max(0,L)),w="";let GZ=Math.max(0,s-Q);var b1=l.substring(GZ,GZ+Q),u8=D0.substring(0,Math.min(Q,u));for(C=0;C<Q;C++){var J0=C<s?b1.substring(C,C+1):" ",G0=C<u?u8.substring(C,C+1):" ";if(J0!==" "&&G0!==" ")if(P.fittingRules.hLayout===1)w+=B(J0,G0,P.hardBlank);else if(P.fittingRules.hLayout===2)w+=B(J0,G0,P.hardBlank);else{var o="";o=!o&&P.fittingRules.hRule1?U(J0,G0,P.hardBlank):o,o=!o&&P.fittingRules.hRule2?G(J0,G0,P.hardBlank):o,o=!o&&P.fittingRules.hRule3?z(J0,G0,P.hardBlank):o,o=!o&&P.fittingRules.hRule4?q(J0,G0,P.hardBlank):o,o=!o&&P.fittingRules.hRule5?$(J0,G0,P.hardBlank):o,o=!o&&P.fittingRules.hRule6?V(J0,G0,P.hardBlank):o,o=o||B(J0,G0,P.hardBlank),w+=o}else w+=B(J0,G0,P.hardBlank)}if(Q>=u)n="";else n=D0.substring(Q,Q+Math.max(0,u-Q));R[I]=E+w+n}return R}function M1(F){let T=[],Q;for(Q=0;Q<F;Q++)T[Q]="";return T}let C1=function(F){return Math.max.apply(Math,F.map(function(T,Q){return T.length}))};function T0(F,T,Q){return F.reduce(function(P,I){return E0(P,I.fig,I.overlap,Q)},M1(T))}function OU(F,T,Q){let P={};for(let I=F.length;--I;){let C=T0(F.slice(0,I),T,Q);if(C1(C)<=Q.width){if(P.outputFigText=C,I<F.length)P.chars=F.slice(I);else P.chars=[];break}}return P}function NU(F,T,Q){let P,I,C=0,R,L,E,w=Q.height,n=[],s,u,l=[],D0,b1,u8,J0,G0;if(L=M1(w),Q.width>0&&Q.whitespaceBreak)u={chars:[],overlap:C};if(Q.printDirection===1)F=F.split("").reverse().join("");E=F.length;for(P=0;P<E;P++)if(D0=F.substring(P,P+1),b1=D0.match(/\s/),I=T[D0.charCodeAt(0)],J0=null,I){if(Q.fittingRules.hLayout!==0){C=1e4;for(R=0;R<Q.height;R++)C=Math.min(C,M0(L[R],I[R],Q));C=C===1e4?0:C}if(Q.width>0){if(Q.whitespaceBreak)u8=T0(u.chars.concat([{fig:I,overlap:C}]),w,Q),J0=T0(l.concat([{fig:u8,overlap:u.overlap}]),w,Q),s=C1(J0);else J0=E0(L,I,C,Q),s=C1(J0);if(s>=Q.width&&P>0)if(Q.whitespaceBreak){if(L=T0(l.slice(0,-1),w,Q),l.length>1)n.push(L),L=M1(w);l=[]}else n.push(L),L=M1(w)}if(Q.width>0&&Q.whitespaceBreak){if(!b1||P===E-1)u.chars.push({fig:I,overlap:C});if(b1||P===E-1){G0=null;while(!0)if(J0=T0(u.chars,w,Q),s=C1(J0),s>=Q.width)G0=OU(u.chars,w,Q),u={chars:G0.chars},n.push(G0.outputFigText);else break;if(s>0)if(G0)l.push({fig:J0,overlap:1});else l.push({fig:J0,overlap:u.overlap});if(b1)l.push({fig:I,overlap:C}),L=M1(w);if(P===E-1)L=T0(l,w,Q);u={chars:[],overlap:C};continue}}L=E0(L,I,C,Q)}if(C1(L)>0)n.push(L);if(Q.showHardBlanks!==!0)n.forEach(function(o){E=o.length;for(R=0;R<E;R++)o[R]=o[R].replace(new RegExp("\\"+Q.hardBlank,"g")," ")});return n}let CU=function(F,T){let Q=["hLayout","hRule1","hRule2","hRule3","hRule4","hRule5","hRule6"],P={},I;if(F==="default")for(I=0;I<Q.length;I++)P[Q[I]]=T.fittingRules[Q[I]];else if(F==="full")P={hLayout:0,hRule1:!1,hRule2:!1,hRule3:!1,hRule4:!1,hRule5:!1,hRule6:!1};else if(F==="fitted")P={hLayout:1,hRule1:!1,hRule2:!1,hRule3:!1,hRule4:!1,hRule5:!1,hRule6:!1};else if(F==="controlled smushing")P={hLayout:3,hRule1:!0,hRule2:!0,hRule3:!0,hRule4:!0,hRule5:!0,hRule6:!0};else if(F==="universal smushing")P={hLayout:2,hRule1:!1,hRule2:!1,hRule3:!1,hRule4:!1,hRule5:!1,hRule6:!1};else return;return P},_U=function(F,T){let Q=["vLayout","vRule1","vRule2","vRule3","vRule4","vRule5"],P={},I;if(F==="default")for(I=0;I<Q.length;I++)P[Q[I]]=T.fittingRules[Q[I]];else if(F==="full")P={vLayout:0,vRule1:!1,vRule2:!1,vRule3:!1,vRule4:!1,vRule5:!1};else if(F==="fitted")P={vLayout:1,vRule1:!1,vRule2:!1,vRule3:!1,vRule4:!1,vRule5:!1};else if(F==="controlled smushing")P={vLayout:3,vRule1:!0,vRule2:!0,vRule3:!0,vRule4:!0,vRule5:!0};else if(F==="universal smushing")P={vLayout:2,vRule1:!1,vRule2:!1,vRule3:!1,vRule4:!1,vRule5:!1};else return;return P},YZ=function(F,T,Q){Q=Q.replace(/\r\n/g,"\n").replace(/\r/g,"\n");let P=Q.split("\n"),I=[],C,R,L;R=P.length;for(C=0;C<R;C++)I=I.concat(NU(P[C],M[F],T));R=I.length,L=I[0];for(C=1;C<R;C++)L=g0(L,I[C],T);return L?L.join("\n"):""};function UZ(F,T){let Q=JSON.parse(JSON.stringify(F)),P,I;if(typeof T.horizontalLayout!=="undefined"){P=CU(T.horizontalLayout,F);for(I in P)if(P.hasOwnProperty(I))Q.fittingRules[I]=P[I]}if(typeof T.verticalLayout!=="undefined"){P=_U(T.verticalLayout,F);for(I in P)if(P.hasOwnProperty(I))Q.fittingRules[I]=P[I]}return Q.printDirection=typeof T.printDirection!=="undefined"?T.printDirection:F.printDirection,Q.showHardBlanks=T.showHardBlanks||!1,Q.width=T.width||-1,Q.whitespaceBreak=T.whitespaceBreak||!1,Q}let Q0=function(F,T,Q){return Q0.text(F,T,Q)};return Q0.text=async function(F,T,Q){let P="";if(F=F+"",typeof arguments[1]==="function")Q=T,T={},T.font=H.font;if(typeof T==="string")P=T,T={};else T=T||{},P=T.font||H.font;return await new Promise((I,C)=>{Q0.loadFont(P,function(R,L){if(R){if(C(R),Q)Q(R);return}let E=YZ(P,UZ(L,T),F);if(I(E),Q)Q(null,E)})})},Q0.textSync=function(F,T){let Q="";if(F=F+"",typeof T==="string")Q=T,T={};else T=T||{},Q=T.font||H.font;var P=UZ(Q0.loadFontSync(Q),T);return YZ(Q,P,F)},Q0.metadata=function(F,T){return F=F+"",new Promise(function(Q,P){Q0.loadFont(F,function(I,C){if(I){if(T)T(I);P(I);return}if(T)T(null,C,M[F].comment);Q([C,M[F].comment])})})},Q0.defaults=function(F){if(typeof F==="object"&&F!==null){for(var T in F)if(F.hasOwnProperty(T))H[T]=F[T]}return JSON.parse(JSON.stringify(H))},Q0.parseFont=function(F,T){T=T.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),M[F]={};var Q=T.split("\n"),P=Q.splice(0,1)[0].split(" "),I=M[F],C={};if(C.hardBlank=P[0].substr(5,1),C.height=parseInt(P[1],10),C.baseline=parseInt(P[2],10),C.maxLength=parseInt(P[3],10),C.oldLayout=parseInt(P[4],10),C.numCommentLines=parseInt(P[5],10),C.printDirection=P.length>=6?parseInt(P[6],10):0,C.fullLayout=P.length>=7?parseInt(P[7],10):null,C.codeTagCount=P.length>=8?parseInt(P[8],10):null,C.fittingRules=Y(C.oldLayout,C.fullLayout),I.options=C,C.hardBlank.length!==1||isNaN(C.height)||isNaN(C.baseline)||isNaN(C.maxLength)||isNaN(C.oldLayout)||isNaN(C.numCommentLines))throw new Error("FIGlet header contains invalid values.");let R=[],L;for(L=32;L<=126;L++)R.push(L);if(R=R.concat(196,214,220,228,246,252,223),Q.length<C.numCommentLines+C.height*R.length)throw new Error("FIGlet file is missing data.");let E,w,n=!1;I.comment=Q.splice(0,C.numCommentLines).join("\n"),I.numChars=0;while(Q.length>0&&I.numChars<R.length){E=R[I.numChars],I[E]=Q.splice(0,C.height);for(L=0;L<C.height;L++)if(typeof I[E][L]==="undefined")I[E][L]="";else w=new RegExp("\\"+I[E][L].substr(I[E][L].length-1,1)+"+$"),I[E][L]=I[E][L].replace(w,"");I.numChars++}while(Q.length>0){if(E=Q.splice(0,1)[0].split(" ")[0],/^0[xX][0-9a-fA-F]+$/.test(E))E=parseInt(E,16);else if(/^0[0-7]+$/.test(E))E=parseInt(E,8);else if(/^[0-9]+$/.test(E))E=parseInt(E,10);else if(/^-0[xX][0-9a-fA-F]+$/.test(E))E=parseInt(E,16);else{if(E==="")break;console.log("Invalid data:"+E),n=!0;break}I[E]=Q.splice(0,C.height);for(L=0;L<C.height;L++)if(typeof I[E][L]==="undefined")I[E][L]="";else w=new RegExp("\\"+I[E][L].substr(I[E][L].length-1,1)+"+$"),I[E][L]=I[E][L].replace(w,"");I.numChars++}if(n===!0)throw new Error("Error parsing data.");return C},Q0.loadFont=function(F,T){if(M[F]){if(T)T(null,M[F].options);return Promise.resolve()}if(typeof fetch!=="function")throw console.error("figlet.js requires the fetch API or a fetch polyfill such as https://cdnjs.com/libraries/fetch"),new Error("fetch is required for figlet.js to work.");return fetch(H.fontPath+"/"+F+".flf").then(function(Q){if(Q.ok)return Q.text();throw console.log("Unexpected response",Q),new Error("Network response was not ok.")}).then(function(Q){if(T)T(null,Q0.parseFont(F,Q))}).catch(T)},Q0.loadFontSync=function(F){if(M[F])return M[F].options;throw new Error("synchronous font loading is not implemented for the browser")},Q0.preloadFonts=function(F,T){let Q=[];return F.reduce(function(P,I){return P.then(function(){return fetch(H.fontPath+"/"+I+".flf").then((C)=>{return C.text()}).then(function(C){Q.push(C)})})},Promise.resolve()).then(function(P){for(var I in F)if(F.hasOwnProperty(I))Q0.parseFont(F[I],Q[I]);if(T)T()})},Q0.figFonts=M,Q0})();if(typeof pK!=="undefined"){if(typeof pK.exports!=="undefined")pK.exports=aT}});var QU=O((nN,$U)=>{var __dirname="C:\\Users\\AlexWebDev\\Desktop\\bun_smart_table\\node_modules\\figlet\\lib",v0=qU(),lK=S("fs"),ZZ=S("path"),iK=ZZ.join(__dirname,"/../fonts/");v0.loadFont=function(K,J){return new Promise(function(Z,X){if(v0.figFonts[K]){J&&J(null,v0.figFonts[K].options),Z(v0.figFonts[K].options);return}lK.readFile(ZZ.join(iK,K+".flf"),{encoding:"utf-8"},function(M,H){if(M){J&&J(M),X(M);return}H=H+"";try{var Y=v0.parseFont(K,H);J&&J(null,Y),Z(Y)}catch(U){J&&J(U),X(U)}})})};v0.loadFontSync=function(K){if(v0.figFonts[K])return v0.figFonts[K].options;var J=lK.readFileSync(ZZ.join(iK,K+".flf"),{encoding:"utf-8"});return J=J+"",v0.parseFont(K,J)};v0.fonts=function(K){return new Promise(function(J,Z){var X=[];lK.readdir(iK,function(M,H){if(M){K&&K(M),Z(M);return}H.forEach(function(Y){if(/\.flf$/.test(Y))X.push(Y.replace(/\.flf$/,""))}),K&&K(null,X),J(X)})})};v0.fontsSync=function(){var K=[];return lK.readdirSync(iK).forEach(function(J){if(/\.flf$/.test(J))K.push(J.replace(/\.flf$/,""))}),K};$U.exports=v0});var TU=qZ(zU(),1),IU=qZ(QU(),1);import{createServer as KI}from"net";import{spawn as sT}from"child_process";import tT from"path";class VU{listeners={};on(K,J){if(!this.listeners[K])this.listeners[K]=[];this.listeners[K].push(J)}emit({event:K,args:J}){if(K==="change")(this.listeners.change||[]).forEach((X)=>X(...J));if(K==="alert")(this.listeners.alert||[]).forEach((X)=>X(...J));if(K==="command")(this.listeners.command||[]).forEach((X)=>X(...J));if(K==="error")(this.listeners.error||[]).forEach((X)=>X(...J));if(K==="exit")(this.listeners.exit||[]).forEach((X)=>X(...J));if(K==="forceExit")(this.listeners.forceExit||[]).forEach((X)=>X(...J))}}class XZ{audioDeviceProcess=null;exePath=tT.join("bin","af-win-audio.exe");deviceInfo={id:"",name:"",volume:0,muted:!1};deviceChange={id:!1,name:!1,volume:!1,muted:!1};eventEmitter=new VU;autoStart;logger;delay;step;constructor(K){if(this.autoStart=K?.autoStart??!0,this.logger=K?.logger??!0,this.delay=K?.delay!==void 0?Math.max(K.delay,75):250,this.step=K?.step||5,this.autoStart)this.start()}on(K,J){this.eventEmitter.on(K,J)}start(){if(this.audioDeviceProcess){this.printMessage("error","\u041F\u0440\u043E\u0446\u0435\u0441\u0441 \u0443\u0436\u0435 \u0437\u0430\u043F\u0443\u0449\u0435\u043D.");return}if(this.audioDeviceProcess=sT(this.exePath,[this.delay.toString(),this.step.toString()]),this.printMessage("alert","\u041F\u0440\u043E\u0446\u0435\u0441\u0441 \u0437\u0430\u043F\u0443\u0449\u0435\u043D"),this.audioDeviceProcess.on("error",(K)=>{this.printMessage("error",`\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u043F\u0440\u043E\u0446\u0435\u0441\u0441: ${K.message}`)}),this.audioDeviceProcess&&this.audioDeviceProcess.stdout)this.audioDeviceProcess.stdout.on("data",(K)=>{try{let J=JSON.parse(K.toString());this.checkChange(J),this.deviceInfo=J,this.eventEmitter.emit({event:"change",args:[this.deviceInfo,this.deviceChange]}),this.defaultChange()}catch(J){this.printMessage("error",`\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435: ${J}`)}});else this.printMessage("error","\u0421\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u0432\u044B\u0432\u043E\u0434 \u043F\u0440\u043E\u0446\u0435\u0441\u0441\u0430 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D.");this.audioDeviceProcess.stderr?.on("data",(K)=>{this.printMessage("error",`C# \u041E\u0448\u0438\u0431\u043A\u0430: ${K.toString("utf-8")}`)}),this.audioDeviceProcess.on("close",(K)=>{let J;if(K===0||K===null)J="\u041F\u0440\u043E\u0446\u0435\u0441\u0441 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u043B\u0441\u044F.";else if(K===1)J=`\u041F\u0440\u043E\u0446\u0435\u0441\u0441 \u043D\u0435 \u0441\u043C\u043E\u0433 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C\u0441\u044F \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u043E: ${K} code`;else J=`\u041E\u0448\u0438\u0431\u043A\u0430 \u043A\u043E\u0434: ${K}`;this.printMessage("exit",J)}),process.on("SIGINT",()=>{if(this.audioDeviceProcess)this.audioDeviceProcess.kill("SIGINT");setTimeout(()=>process.exit(),1000)}),process.on("SIGTERM",()=>{if(this.audioDeviceProcess)this.audioDeviceProcess.kill("SIGTERM");setTimeout(()=>process.exit(),1000)})}stop(){if(this.audioDeviceProcess)if(!this.audioDeviceProcess.killed)this.audioDeviceProcess.kill("SIGTERM"),this.audioDeviceProcess=null,setTimeout(()=>{if(this.audioDeviceProcess?.killed===!1)this.audioDeviceProcess?.kill("SIGKILL"),this.audioDeviceProcess=null,this.printMessage("forceExit","\u041F\u0440\u043E\u0446\u0435\u0441\u0441 \u0431\u044B\u043B \u043F\u0440\u0438\u043D\u0443\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043D.")});else this.printMessage("error","\u041F\u0440\u043E\u0446\u0435\u0441\u0441 \u0443\u0436\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043D.");else this.printMessage("error","\u041D\u0435\u0442 \u043F\u0440\u043E\u0446\u0435\u0441\u0441\u0430 \u0434\u043B\u044F \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0438.")}isWork(){return this.audioDeviceProcess!==null&&!this.audioDeviceProcess.killed}incrementVolume(K){if(this.audioDeviceProcess&&this.audioDeviceProcess.stdin)if(K)this.printMessage("command",`\u0423\u0432\u0435\u043B\u0438\u0447\u0438\u0442\u044C \u0433\u0440\u043E\u043C\u043A\u043E\u0441\u0442\u044C \u043D\u0430 ${K}.`),this.audioDeviceProcess.stdin.write(`upVolume ${K}\n`);else this.printMessage("command","\u0423\u0432\u0435\u043B\u0438\u0447\u0438\u0442\u044C \u0433\u0440\u043E\u043C\u043A\u043E\u0441\u0442\u044C."),this.audioDeviceProcess.stdin.write("upVolume\n");else this.printMessage("error","\u041F\u0440\u043E\u0446\u0435\u0441\u0441 \u043D\u0435 \u0437\u0430\u043F\u0443\u0449\u0435\u043D \u0438\u043B\u0438 \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u0432\u0432\u043E\u0434 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D.")}decrementVolume(K){if(this.audioDeviceProcess&&this.audioDeviceProcess.stdin)if(K)this.printMessage("command",`\u0423\u043C\u0435\u043D\u044C\u0448\u0438\u0442\u044C \u0433\u0440\u043E\u043C\u043A\u043E\u0441\u0442\u044C \u043D\u0430 ${K}.`),this.audioDeviceProcess.stdin.write(`downVolume ${K}\n`);else this.printMessage("command","\u0423\u043C\u0435\u043D\u044C\u0448\u0438\u0442\u044C \u0433\u0440\u043E\u043C\u043A\u043E\u0441\u0442\u044C."),this.audioDeviceProcess.stdin.write("downVolume\n");else this.printMessage("error","\u041F\u0440\u043E\u0446\u0435\u0441\u0441 \u043D\u0435 \u0437\u0430\u043F\u0443\u0449\u0435\u043D \u0438\u043B\u0438 \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u0432\u0432\u043E\u0434 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D.")}mute(){if(this.audioDeviceProcess&&this.audioDeviceProcess.stdin)this.printMessage("command","\u0417\u0432\u0443\u043A \u0437\u0430\u0433\u043B\u0443\u0448\u0435\u043D."),this.audioDeviceProcess.stdin.write("mute\n");else this.printMessage("error","\u041F\u0440\u043E\u0446\u0435\u0441\u0441 \u043D\u0435 \u0437\u0430\u043F\u0443\u0449\u0435\u043D \u0438\u043B\u0438 \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u0432\u0432\u043E\u0434 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D.")}unmute(){if(this.audioDeviceProcess&&this.audioDeviceProcess.stdin)this.printMessage("command","\u0417\u0432\u0443\u043A \u0432\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D."),this.audioDeviceProcess.stdin.write("unmute\n");else this.printMessage("error","\u041F\u0440\u043E\u0446\u0435\u0441\u0441 \u043D\u0435 \u0437\u0430\u043F\u0443\u0449\u0435\u043D \u0438\u043B\u0438 \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u0432\u0432\u043E\u0434 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D.")}toggleMute(){if(this.audioDeviceProcess&&this.audioDeviceProcess.stdin)this.printMessage("command","\u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F \u0437\u0432\u0443\u043A\u0430 \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u043E."),this.audioDeviceProcess.stdin.write("toggleMute\n");else this.printMessage("error","\u041F\u0440\u043E\u0446\u0435\u0441\u0441 \u043D\u0435 \u0437\u0430\u043F\u0443\u0449\u0435\u043D \u0438\u043B\u0438 \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u0432\u0432\u043E\u0434 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D.")}updateSettings(K){if(K.delay&&this.setDelay(K.delay),K.step!==void 0)this.setStepVolume(K.step)}setDelay(K){if(this.audioDeviceProcess&&this.audioDeviceProcess.stdin)if(K>=75)this.delay=K,this.printMessage("command",`\u0417\u0430\u0434\u0435\u0440\u0436\u043A\u0430 \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0430 \u0432 ${this.delay} \u043C\u0441.`),this.audioDeviceProcess.stdin.write(`setDelay ${this.delay}\n`);else this.printMessage("error","\u0417\u0430\u0434\u0435\u0440\u0436\u043A\u0430 \u0434\u043E\u043B\u0436\u043D\u0430 \u0431\u044B\u0442\u044C \u043D\u0435 \u043C\u0435\u043D\u0435\u0435 75 \u043C\u0441.");else this.printMessage("error","\u041F\u0440\u043E\u0446\u0435\u0441\u0441 \u043D\u0435 \u0437\u0430\u043F\u0443\u0449\u0435\u043D \u0438\u043B\u0438 \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u0432\u0432\u043E\u0434 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D.")}setStepVolume(K){if(this.audioDeviceProcess&&this.audioDeviceProcess.stdin)if(K>0&&K<=100)this.step=K,this.printMessage("command",`\u0428\u0430\u0433 \u0433\u0440\u043E\u043C\u043A\u043E\u0441\u0442\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0451\u043D \u0434\u043E ${this.step}.`),this.audioDeviceProcess.stdin.write(`setStepVolume ${this.step}\n`);else this.printMessage("error","\u0428\u0430\u0433 \u0433\u0440\u043E\u043C\u043A\u043E\u0441\u0442\u0438 \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u0431\u043E\u043B\u044C\u0448\u0435 \u0432 \u0434\u0438\u0430\u043F\u043E\u0437\u043E\u043D\u0435 \u043E\u0442 1 \u0434\u043E 100.");else this.printMessage("error","\u041F\u0440\u043E\u0446\u0435\u0441\u0441 \u043D\u0435 \u0437\u0430\u043F\u0443\u0449\u0435\u043D \u0438\u043B\u0438 \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u0432\u0432\u043E\u0434 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D.")}checkChange(K){for(let J in K)if(K[J]!==this.deviceInfo[J])this.deviceChange[J]=!0}defaultChange(){this.deviceChange={id:!1,name:!1,volume:!1,muted:!1}}printMessage(K,J){this.logger&&console.log(`#${K}:: `,J),this.eventEmitter.emit({event:K,args:[J]})}}var MZ=null,HZ=null,WU,PU=()=>{W1.on("change",(K,J)=>{if(WU=K,J.id)console.log(K.id);if(J.name)console.log(K.name);if(J.volume)eT();if(J.muted)console.log("change mute:: ",K.muted)}),g8.on("client",(K)=>{console.log(`\u041A\u043B\u0438\u0435\u043D\u0442 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D: ${K?K.id:"\u043D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B\u0439"}`),W1.start(),MZ=!1,HZ=setInterval(()=>{if(!W1.isWork()&&!MZ)W1.start()},1000)}),g8.on("clientDisconnect",(K)=>{console.log(`\u041A\u043B\u0438\u0435\u043D\u0442 \u043E\u0442\u043A\u043B\u044E\u0447\u0438\u043B\u0441\u044F: ${K.id}`),W1.stop(),MZ=!0,clearInterval(HZ),HZ=null}),g8.on("publish",(K,J)=>{let Z=K.topic;if(J){if(Z==="increment/volume")W1.incrementVolume();else if(Z==="decrement/volume")W1.decrementVolume();else if(Z==="toggle/volume")W1.toggleMute()}})},eT=()=>{console.log(WU)};var FU=1883,JI={delay:100,step:5,autoStart:!1,logger:!0},W1=new XZ(JI),g8=new TU.default({id:"mqtt-broker"}),ZI=KI(g8.handle);ZI.listen(FU,function(){console.log(IU.default.textSync("server zapuxen - port "+FU+"!",{font:"Moscow"}))});PU();export{g8 as aedes,W1 as AudioMonitor};
